/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var sip_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sip.js */ \"./node_modules/sip.js/lib/api/inviter.js\");\n\r\n\r\nconst ua = new UA({\r\n  uri: 'pjsip:8302@172.16.0.198',\r\n  transportOptions: {\r\n    wsServers: ['wss://vm-queuemetrics.technodom.kz:8089/ws'],\r\n  },\r\n  authorizationUser: '8302',\r\n  password: '5ca5f4f5e7ebff0922f8ad28ab3075f4',\r\n});\r\n\r\n// Функция для обработки вызовов\r\nfunction makeCall(target) {\r\n  const inviter = new sip_js__WEBPACK_IMPORTED_MODULE_0__.Inviter(userAgent, target);\r\n  inviter.invite().then(() => {\r\n    console.log('Call initiated');\r\n  }).catch((error) => {\r\n    console.error('Call failed', error);\r\n  });\r\n\r\n  // Обработка завершения вызова\r\n  hangupButton.addEventListener('click', () => {\r\n    inviter.cancel().then(() => {\r\n      console.log('Call canceled');\r\n    }).catch((error) => {\r\n      console.error('Failed to cancel call', error);\r\n    });\r\n  });\r\n}\r\n\r\n// Обработка событий кнопок\r\nconst callButton = document.getElementById('callButton');\r\nconst hangupButton = document.getElementById('hangupButton');\r\n\r\ncallButton.addEventListener('click', () => {\r\n  const phoneNumber = document.getElementById('phoneNumber').value;\r\n  if (phoneNumber) {\r\n    makeCall(`sip:${phoneNumber}@sip_server`);\r\n  } else {\r\n    alert('Введите номер телефона');\r\n  }\r\n});\r\n\r\nuserAgent.start();\r\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./src/index.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/api/ack.js":
/*!********************************************!*\
  !*** ./node_modules/sip.js/lib/api/ack.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Ack: () => (/* binding */ Ack)\n/* harmony export */ });\n/**\n * A request to confirm a {@link Session} (incoming ACK).\n * @public\n */\nclass Ack {\n    /** @internal */\n    constructor(incomingAckRequest) {\n        this.incomingAckRequest = incomingAckRequest;\n    }\n    /** Incoming ACK request message. */\n    get request() {\n        return this.incomingAckRequest.message;\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/api/ack.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/api/bye.js":
/*!********************************************!*\
  !*** ./node_modules/sip.js/lib/api/bye.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Bye: () => (/* binding */ Bye)\n/* harmony export */ });\n/**\n * A request to end a {@link Session} (incoming BYE).\n * @public\n */\nclass Bye {\n    /** @internal */\n    constructor(incomingByeRequest) {\n        this.incomingByeRequest = incomingByeRequest;\n    }\n    /** Incoming BYE request message. */\n    get request() {\n        return this.incomingByeRequest.message;\n    }\n    /** Accept the request. */\n    accept(options) {\n        this.incomingByeRequest.accept(options);\n        return Promise.resolve();\n    }\n    /** Reject the request. */\n    reject(options) {\n        this.incomingByeRequest.reject(options);\n        return Promise.resolve();\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/api/bye.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/api/emitter.js":
/*!************************************************!*\
  !*** ./node_modules/sip.js/lib/api/emitter.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EmitterImpl: () => (/* binding */ EmitterImpl)\n/* harmony export */ });\n/**\n * An {@link Emitter} implementation.\n * @internal\n */\nclass EmitterImpl {\n    constructor() {\n        this.listeners = new Array();\n    }\n    /**\n     * Sets up a function that will be called whenever the target changes.\n     * @param listener - Callback function.\n     * @param options - An options object that specifies characteristics about the listener.\n     *                  If once true, indicates that the listener should be invoked at most once after being added.\n     *                  If once true, the listener would be automatically removed when invoked.\n     */\n    addListener(listener, options) {\n        const onceWrapper = (data) => {\n            this.removeListener(onceWrapper);\n            listener(data);\n        };\n        (options === null || options === void 0 ? void 0 : options.once) === true ? this.listeners.push(onceWrapper) : this.listeners.push(listener);\n    }\n    /**\n     * Emit change.\n     * @param data - Data to emit.\n     */\n    emit(data) {\n        this.listeners.slice().forEach((listener) => listener(data));\n    }\n    /**\n     * Removes all listeners previously registered with addListener.\n     */\n    removeAllListeners() {\n        this.listeners = [];\n    }\n    /**\n     * Removes a listener previously registered with addListener.\n     * @param listener - Callback function.\n     */\n    removeListener(listener) {\n        this.listeners = this.listeners.filter((l) => l !== listener);\n    }\n    /**\n     * Registers a listener.\n     * @param listener - Callback function.\n     * @deprecated Use addListener.\n     */\n    on(listener) {\n        return this.addListener(listener);\n    }\n    /**\n     * Unregisters a listener.\n     * @param listener - Callback function.\n     * @deprecated Use removeListener.\n     */\n    off(listener) {\n        return this.removeListener(listener);\n    }\n    /**\n     * Registers a listener then unregisters the listener after one event emission.\n     * @param listener - Callback function.\n     * @deprecated Use addListener.\n     */\n    once(listener) {\n        return this.addListener(listener, { once: true });\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/api/emitter.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/api/exceptions/content-type-unsupported.js":
/*!****************************************************************************!*\
  !*** ./node_modules/sip.js/lib/api/exceptions/content-type-unsupported.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContentTypeUnsupportedError: () => (/* binding */ ContentTypeUnsupportedError)\n/* harmony export */ });\n/* harmony import */ var _core_exceptions_exception_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/exceptions/exception.js */ \"./node_modules/sip.js/lib/core/exceptions/exception.js\");\n\n/**\n * An exception indicating an unsupported content type prevented execution.\n * @public\n */\nclass ContentTypeUnsupportedError extends _core_exceptions_exception_js__WEBPACK_IMPORTED_MODULE_0__.Exception {\n    constructor(message) {\n        super(message ? message : \"Unsupported content type.\");\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/api/exceptions/content-type-unsupported.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/api/exceptions/request-pending.js":
/*!*******************************************************************!*\
  !*** ./node_modules/sip.js/lib/api/exceptions/request-pending.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RequestPendingError: () => (/* binding */ RequestPendingError)\n/* harmony export */ });\n/* harmony import */ var _core_exceptions_exception_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/exceptions/exception.js */ \"./node_modules/sip.js/lib/core/exceptions/exception.js\");\n\n/**\n * An exception indicating an outstanding prior request prevented execution.\n * @public\n */\nclass RequestPendingError extends _core_exceptions_exception_js__WEBPACK_IMPORTED_MODULE_0__.Exception {\n    /** @internal */\n    constructor(message) {\n        super(message ? message : \"Request pending.\");\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/api/exceptions/request-pending.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/api/info.js":
/*!*********************************************!*\
  !*** ./node_modules/sip.js/lib/api/info.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Info: () => (/* binding */ Info)\n/* harmony export */ });\n/**\n * An exchange of information (incoming INFO).\n * @public\n */\nclass Info {\n    /** @internal */\n    constructor(incomingInfoRequest) {\n        this.incomingInfoRequest = incomingInfoRequest;\n    }\n    /** Incoming MESSAGE request message. */\n    get request() {\n        return this.incomingInfoRequest.message;\n    }\n    /** Accept the request. */\n    accept(options) {\n        this.incomingInfoRequest.accept(options);\n        return Promise.resolve();\n    }\n    /** Reject the request. */\n    reject(options) {\n        this.incomingInfoRequest.reject(options);\n        return Promise.resolve();\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/api/info.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/api/inviter.js":
/*!************************************************!*\
  !*** ./node_modules/sip.js/lib/api/inviter.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Inviter: () => (/* binding */ Inviter)\n/* harmony export */ });\n/* harmony import */ var _grammar_grammar_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../grammar/grammar.js */ \"./node_modules/sip.js/lib/grammar/grammar.js\");\n/* harmony import */ var _core_messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/messages/methods/constants.js */ \"./node_modules/sip.js/lib/core/messages/methods/constants.js\");\n/* harmony import */ var _core_session_session_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/session/session.js */ \"./node_modules/sip.js/lib/core/session/session.js\");\n/* harmony import */ var _core_messages_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/messages/utils.js */ \"./node_modules/sip.js/lib/core/messages/utils.js\");\n/* harmony import */ var _session_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./session.js */ \"./node_modules/sip.js/lib/api/session.js\");\n/* harmony import */ var _session_state_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./session-state.js */ \"./node_modules/sip.js/lib/api/session-state.js\");\n/* harmony import */ var _user_agent_options_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./user-agent-options.js */ \"./node_modules/sip.js/lib/api/user-agent-options.js\");\n\n\n\n\n\n\n\n/**\n * An inviter offers to establish a {@link Session} (outgoing INVITE).\n * @public\n */\nclass Inviter extends _session_js__WEBPACK_IMPORTED_MODULE_0__.Session {\n    /**\n     * Constructs a new instance of the `Inviter` class.\n     * @param userAgent - User agent. See {@link UserAgent} for details.\n     * @param targetURI - Request URI identifying the target of the message.\n     * @param options - Options bucket. See {@link InviterOptions} for details.\n     */\n    constructor(userAgent, targetURI, options = {}) {\n        super(userAgent, options);\n        /** True if dispose() has been called. */\n        this.disposed = false;\n        /** True if early media use is enabled. */\n        this.earlyMedia = false;\n        /** The early media session description handlers. */\n        this.earlyMediaSessionDescriptionHandlers = new Map();\n        /** True if cancel() was called. */\n        this.isCanceled = false;\n        /** True if initial INVITE without SDP. */\n        this.inviteWithoutSdp = false;\n        this.logger = userAgent.getLogger(\"sip.Inviter\");\n        // Early media\n        this.earlyMedia = options.earlyMedia !== undefined ? options.earlyMedia : this.earlyMedia;\n        // From tag\n        this.fromTag = (0,_core_messages_utils_js__WEBPACK_IMPORTED_MODULE_1__.newTag)();\n        // Invite without SDP\n        this.inviteWithoutSdp = options.inviteWithoutSdp !== undefined ? options.inviteWithoutSdp : this.inviteWithoutSdp;\n        // Inviter options (could do better copying these options)\n        const inviterOptions = Object.assign({}, options);\n        inviterOptions.params = Object.assign({}, options.params);\n        // Anonymous call\n        const anonymous = options.anonymous || false;\n        // Contact\n        const contact = userAgent.contact.toString({\n            anonymous,\n            // Do not add ;ob in initial forming dialog requests if the\n            // registration over the current connection got a GRUU URI.\n            outbound: anonymous ? !userAgent.contact.tempGruu : !userAgent.contact.pubGruu\n        });\n        // FIXME: TODO: We should not be parsing URIs here as if it fails we have to throw an exception\n        // which is not something we want our constructor to do. URIs should be passed in as params.\n        // URIs\n        if (anonymous && userAgent.configuration.uri) {\n            inviterOptions.params.fromDisplayName = \"Anonymous\";\n            inviterOptions.params.fromUri = \"sip:anonymous@anonymous.invalid\";\n        }\n        let fromURI = userAgent.userAgentCore.configuration.aor;\n        if (inviterOptions.params.fromUri) {\n            fromURI =\n                typeof inviterOptions.params.fromUri === \"string\"\n                    ? _grammar_grammar_js__WEBPACK_IMPORTED_MODULE_2__.Grammar.URIParse(inviterOptions.params.fromUri)\n                    : inviterOptions.params.fromUri;\n        }\n        if (!fromURI) {\n            throw new TypeError(\"Invalid from URI: \" + inviterOptions.params.fromUri);\n        }\n        let toURI = targetURI;\n        if (inviterOptions.params.toUri) {\n            toURI =\n                typeof inviterOptions.params.toUri === \"string\"\n                    ? _grammar_grammar_js__WEBPACK_IMPORTED_MODULE_2__.Grammar.URIParse(inviterOptions.params.toUri)\n                    : inviterOptions.params.toUri;\n        }\n        if (!toURI) {\n            throw new TypeError(\"Invalid to URI: \" + inviterOptions.params.toUri);\n        }\n        // Params\n        const messageOptions = Object.assign({}, inviterOptions.params);\n        messageOptions.fromTag = this.fromTag;\n        // Extra headers\n        const extraHeaders = (inviterOptions.extraHeaders || []).slice();\n        if (anonymous && userAgent.configuration.uri) {\n            extraHeaders.push(\"P-Preferred-Identity: \" + userAgent.configuration.uri.toString());\n            extraHeaders.push(\"Privacy: id\");\n        }\n        extraHeaders.push(\"Contact: \" + contact);\n        extraHeaders.push(\"Allow: \" + [\"ACK\", \"CANCEL\", \"INVITE\", \"MESSAGE\", \"BYE\", \"OPTIONS\", \"INFO\", \"NOTIFY\", \"REFER\"].toString());\n        if (userAgent.configuration.sipExtension100rel === _user_agent_options_js__WEBPACK_IMPORTED_MODULE_3__.SIPExtension.Required) {\n            extraHeaders.push(\"Require: 100rel\");\n        }\n        if (userAgent.configuration.sipExtensionReplaces === _user_agent_options_js__WEBPACK_IMPORTED_MODULE_3__.SIPExtension.Required) {\n            extraHeaders.push(\"Require: replaces\");\n        }\n        inviterOptions.extraHeaders = extraHeaders;\n        // Body\n        const body = undefined;\n        // Make initial outgoing request message\n        this.outgoingRequestMessage = userAgent.userAgentCore.makeOutgoingRequestMessage(_core_messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_4__.C.INVITE, targetURI, fromURI, toURI, messageOptions, extraHeaders, body);\n        // Session parent properties\n        this._contact = contact;\n        this._referralInviterOptions = inviterOptions;\n        this._renderbody = options.renderbody;\n        this._rendertype = options.rendertype;\n        // Modifiers and options for initial INVITE transaction\n        if (options.sessionDescriptionHandlerModifiers) {\n            this.sessionDescriptionHandlerModifiers = options.sessionDescriptionHandlerModifiers;\n        }\n        if (options.sessionDescriptionHandlerOptions) {\n            this.sessionDescriptionHandlerOptions = options.sessionDescriptionHandlerOptions;\n        }\n        // Modifiers and options for re-INVITE transactions\n        if (options.sessionDescriptionHandlerModifiersReInvite) {\n            this.sessionDescriptionHandlerModifiersReInvite = options.sessionDescriptionHandlerModifiersReInvite;\n        }\n        if (options.sessionDescriptionHandlerOptionsReInvite) {\n            this.sessionDescriptionHandlerOptionsReInvite = options.sessionDescriptionHandlerOptionsReInvite;\n        }\n        // Identifier\n        this._id = this.outgoingRequestMessage.callId + this.fromTag;\n        // Add to the user agent's session collection.\n        this.userAgent._sessions[this._id] = this;\n    }\n    /**\n     * Destructor.\n     */\n    dispose() {\n        // Only run through this once. It can and does get called multiple times\n        // depending on the what the sessions state is when first called.\n        // For example, if called when \"establishing\" it will be called again\n        // at least once when the session transitions to \"terminated\".\n        // Regardless, running through this more than once is pointless.\n        if (this.disposed) {\n            return Promise.resolve();\n        }\n        this.disposed = true;\n        // Dispose of early dialog media\n        this.disposeEarlyMedia();\n        // If the final response for the initial INVITE not yet been received, cancel it\n        switch (this.state) {\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Initial:\n                return this.cancel().then(() => super.dispose());\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Establishing:\n                return this.cancel().then(() => super.dispose());\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Established:\n                return super.dispose();\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminating:\n                return super.dispose();\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated:\n                return super.dispose();\n            default:\n                throw new Error(\"Unknown state.\");\n        }\n    }\n    /**\n     * Initial outgoing INVITE request message body.\n     */\n    get body() {\n        return this.outgoingRequestMessage.body;\n    }\n    /**\n     * The identity of the local user.\n     */\n    get localIdentity() {\n        return this.outgoingRequestMessage.from;\n    }\n    /**\n     * The identity of the remote user.\n     */\n    get remoteIdentity() {\n        return this.outgoingRequestMessage.to;\n    }\n    /**\n     * Initial outgoing INVITE request message.\n     */\n    get request() {\n        return this.outgoingRequestMessage;\n    }\n    /**\n     * Cancels the INVITE request.\n     *\n     * @remarks\n     * Sends a CANCEL request.\n     * Resolves once the response sent, otherwise rejects.\n     *\n     * After sending a CANCEL request the expectation is that a 487 final response\n     * will be received for the INVITE. However a 200 final response to the INVITE\n     * may nonetheless arrive (it's a race between the CANCEL reaching the UAS before\n     * the UAS sends a 200) in which case an ACK & BYE will be sent. The net effect\n     * is that this method will terminate the session regardless of the race.\n     * @param options - Options bucket.\n     */\n    cancel(options = {}) {\n        this.logger.log(\"Inviter.cancel\");\n        // validate state\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Initial && this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Establishing) {\n            const error = new Error(`Invalid session state ${this.state}`);\n            this.logger.error(error.message);\n            return Promise.reject(error);\n        }\n        // flag canceled\n        this.isCanceled = true;\n        // transition state\n        this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminating);\n        // helper function\n        function getCancelReason(code, reason) {\n            if ((code && code < 200) || code > 699) {\n                throw new TypeError(\"Invalid statusCode: \" + code);\n            }\n            else if (code) {\n                const cause = code;\n                const text = (0,_core_messages_utils_js__WEBPACK_IMPORTED_MODULE_1__.getReasonPhrase)(code) || reason;\n                return \"SIP;cause=\" + cause + ';text=\"' + text + '\"';\n            }\n        }\n        if (this.outgoingInviteRequest) {\n            // the CANCEL may not be respected by peer(s), so don't transition to terminated\n            let cancelReason;\n            if (options.statusCode && options.reasonPhrase) {\n                cancelReason = getCancelReason(options.statusCode, options.reasonPhrase);\n            }\n            this.outgoingInviteRequest.cancel(cancelReason, options);\n        }\n        else {\n            this.logger.warn(\"Canceled session before INVITE was sent\");\n            this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated);\n        }\n        return Promise.resolve();\n    }\n    /**\n     * Sends the INVITE request.\n     *\n     * @remarks\n     * TLDR...\n     *  1) Only one offer/answer exchange permitted during initial INVITE.\n     *  2) No \"early media\" if the initial offer is in an INVITE (default behavior).\n     *  3) If \"early media\" and the initial offer is in an INVITE, no INVITE forking.\n     *\n     * 1) Only one offer/answer exchange permitted during initial INVITE.\n     *\n     * Our implementation replaces the following bullet point...\n     *\n     * o  After having sent or received an answer to the first offer, the\n     *    UAC MAY generate subsequent offers in requests based on rules\n     *    specified for that method, but only if it has received answers\n     *    to any previous offers, and has not sent any offers to which it\n     *    hasn't gotten an answer.\n     * https://tools.ietf.org/html/rfc3261#section-13.2.1\n     *\n     * ...with...\n     *\n     * o  After having sent or received an answer to the first offer, the\n     *    UAC MUST NOT generate subsequent offers in requests based on rules\n     *    specified for that method.\n     *\n     * ...which in combination with this bullet point...\n     *\n     * o  Once the UAS has sent or received an answer to the initial\n     *    offer, it MUST NOT generate subsequent offers in any responses\n     *    to the initial INVITE.  This means that a UAS based on this\n     *    specification alone can never generate subsequent offers until\n     *    completion of the initial transaction.\n     * https://tools.ietf.org/html/rfc3261#section-13.2.1\n     *\n     * ...ensures that EXACTLY ONE offer/answer exchange will occur\n     * during an initial out of dialog INVITE request made by our UAC.\n     *\n     *\n     * 2) No \"early media\" if the initial offer is in an INVITE (default behavior).\n     *\n     * While our implementation adheres to the following bullet point...\n     *\n     * o  If the initial offer is in an INVITE, the answer MUST be in a\n     *    reliable non-failure message from UAS back to UAC which is\n     *    correlated to that INVITE.  For this specification, that is\n     *    only the final 2xx response to that INVITE.  That same exact\n     *    answer MAY also be placed in any provisional responses sent\n     *    prior to the answer.  The UAC MUST treat the first session\n     *    description it receives as the answer, and MUST ignore any\n     *    session descriptions in subsequent responses to the initial\n     *    INVITE.\n     * https://tools.ietf.org/html/rfc3261#section-13.2.1\n     *\n     * We have made the following implementation decision with regard to early media...\n     *\n     * o  If the initial offer is in the INVITE, the answer from the\n     *    UAS back to the UAC will establish a media session only\n     *    only after the final 2xx response to that INVITE is received.\n     *\n     * The reason for this decision is rooted in a restriction currently\n     * inherent in WebRTC. Specifically, while a SIP INVITE request with an\n     * initial offer may fork resulting in more than one provisional answer,\n     * there is currently no easy/good way to to \"fork\" an offer generated\n     * by a peer connection. In particular, a WebRTC offer currently may only\n     * be matched with one answer and we have no good way to know which\n     * \"provisional answer\" is going to be the \"final answer\". So we have\n     * decided to punt and not create any \"early media\" sessions in this case.\n     *\n     * The upshot is that if you want \"early media\", you must not put the\n     * initial offer in the INVITE. Instead, force the UAS to provide the\n     * initial offer by sending an INVITE without an offer. In the WebRTC\n     * case this allows us to create a unique peer connection with a unique\n     * answer for every provisional offer with \"early media\" on all of them.\n     *\n     *\n     * 3) If \"early media\" and the initial offer is in an INVITE, no INVITE forking.\n     *\n     * The default behavior may be altered and \"early media\" utilized if the\n     * initial offer is in the an INVITE by setting the `earlyMedia` options.\n     * However in that case the INVITE request MUST NOT fork. This allows for\n     * \"early media\" in environments where the forking behavior of the SIP\n     * servers being utilized is configured to disallow forking.\n     */\n    invite(options = {}) {\n        this.logger.log(\"Inviter.invite\");\n        // validate state\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Initial) {\n            // re-invite\n            return super.invite(options);\n        }\n        // Modifiers and options for initial INVITE transaction\n        if (options.sessionDescriptionHandlerModifiers) {\n            this.sessionDescriptionHandlerModifiers = options.sessionDescriptionHandlerModifiers;\n        }\n        if (options.sessionDescriptionHandlerOptions) {\n            this.sessionDescriptionHandlerOptions = options.sessionDescriptionHandlerOptions;\n        }\n        // just send an INVITE with no sdp...\n        if (options.withoutSdp || this.inviteWithoutSdp) {\n            if (this._renderbody && this._rendertype) {\n                this.outgoingRequestMessage.body = { contentType: this._rendertype, body: this._renderbody };\n            }\n            // transition state\n            this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Establishing);\n            return Promise.resolve(this.sendInvite(options));\n        }\n        // get an offer and send it in an INVITE\n        const offerOptions = {\n            sessionDescriptionHandlerModifiers: this.sessionDescriptionHandlerModifiers,\n            sessionDescriptionHandlerOptions: this.sessionDescriptionHandlerOptions\n        };\n        return this.getOffer(offerOptions)\n            .then((body) => {\n            this.outgoingRequestMessage.body = { body: body.content, contentType: body.contentType };\n            // transition state\n            this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Establishing);\n            return this.sendInvite(options);\n        })\n            .catch((error) => {\n            this.logger.log(error.message);\n            // It's possible we are already terminated,\n            // so don't throw trying to transition again.\n            if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated) {\n                this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated);\n            }\n            throw error;\n        });\n    }\n    /**\n     * 13.2.1 Creating the Initial INVITE\n     *\n     * Since the initial INVITE represents a request outside of a dialog,\n     * its construction follows the procedures of Section 8.1.1.  Additional\n     * processing is required for the specific case of INVITE.\n     *\n     * An Allow header field (Section 20.5) SHOULD be present in the INVITE.\n     * It indicates what methods can be invoked within a dialog, on the UA\n     * sending the INVITE, for the duration of the dialog.  For example, a\n     * UA capable of receiving INFO requests within a dialog [34] SHOULD\n     * include an Allow header field listing the INFO method.\n     *\n     * A Supported header field (Section 20.37) SHOULD be present in the\n     * INVITE.  It enumerates all the extensions understood by the UAC.\n     *\n     * An Accept (Section 20.1) header field MAY be present in the INVITE.\n     * It indicates which Content-Types are acceptable to the UA, in both\n     * the response received by it, and in any subsequent requests sent to\n     * it within dialogs established by the INVITE.  The Accept header field\n     * is especially useful for indicating support of various session\n     * description formats.\n     *\n     * The UAC MAY add an Expires header field (Section 20.19) to limit the\n     * validity of the invitation.  If the time indicated in the Expires\n     * header field is reached and no final answer for the INVITE has been\n     * received, the UAC core SHOULD generate a CANCEL request for the\n     * INVITE, as per Section 9.\n     *\n     * A UAC MAY also find it useful to add, among others, Subject (Section\n     * 20.36), Organization (Section 20.25) and User-Agent (Section 20.41)\n     * header fields.  They all contain information related to the INVITE.\n     *\n     * The UAC MAY choose to add a message body to the INVITE.  Section\n     * 8.1.1.10 deals with how to construct the header fields -- Content-\n     * Type among others -- needed to describe the message body.\n     *\n     * https://tools.ietf.org/html/rfc3261#section-13.2.1\n     */\n    sendInvite(options = {}) {\n        //    There are special rules for message bodies that contain a session\n        //    description - their corresponding Content-Disposition is \"session\".\n        //    SIP uses an offer/answer model where one UA sends a session\n        //    description, called the offer, which contains a proposed description\n        //    of the session.  The offer indicates the desired communications means\n        //    (audio, video, games), parameters of those means (such as codec\n        //    types) and addresses for receiving media from the answerer.  The\n        //    other UA responds with another session description, called the\n        //    answer, which indicates which communications means are accepted, the\n        //    parameters that apply to those means, and addresses for receiving\n        //    media from the offerer. An offer/answer exchange is within the\n        //    context of a dialog, so that if a SIP INVITE results in multiple\n        //    dialogs, each is a separate offer/answer exchange.  The offer/answer\n        //    model defines restrictions on when offers and answers can be made\n        //    (for example, you cannot make a new offer while one is in progress).\n        //    This results in restrictions on where the offers and answers can\n        //    appear in SIP messages.  In this specification, offers and answers\n        //    can only appear in INVITE requests and responses, and ACK.  The usage\n        //    of offers and answers is further restricted.  For the initial INVITE\n        //    transaction, the rules are:\n        //\n        //       o  The initial offer MUST be in either an INVITE or, if not there,\n        //          in the first reliable non-failure message from the UAS back to\n        //          the UAC.  In this specification, that is the final 2xx\n        //          response.\n        //\n        //       o  If the initial offer is in an INVITE, the answer MUST be in a\n        //          reliable non-failure message from UAS back to UAC which is\n        //          correlated to that INVITE.  For this specification, that is\n        //          only the final 2xx response to that INVITE.  That same exact\n        //          answer MAY also be placed in any provisional responses sent\n        //          prior to the answer.  The UAC MUST treat the first session\n        //          description it receives as the answer, and MUST ignore any\n        //          session descriptions in subsequent responses to the initial\n        //          INVITE.\n        //\n        //       o  If the initial offer is in the first reliable non-failure\n        //          message from the UAS back to UAC, the answer MUST be in the\n        //          acknowledgement for that message (in this specification, ACK\n        //          for a 2xx response).\n        //\n        //       o  After having sent or received an answer to the first offer, the\n        //          UAC MAY generate subsequent offers in requests based on rules\n        //          specified for that method, but only if it has received answers\n        //          to any previous offers, and has not sent any offers to which it\n        //          hasn't gotten an answer.\n        //\n        //       o  Once the UAS has sent or received an answer to the initial\n        //          offer, it MUST NOT generate subsequent offers in any responses\n        //          to the initial INVITE.  This means that a UAS based on this\n        //          specification alone can never generate subsequent offers until\n        //          completion of the initial transaction.\n        //\n        // https://tools.ietf.org/html/rfc3261#section-13.2.1\n        // 5 The Offer/Answer Model and PRACK\n        //\n        //    RFC 3261 describes guidelines for the sets of messages in which\n        //    offers and answers [3] can appear.  Based on those guidelines, this\n        //    extension provides additional opportunities for offer/answer\n        //    exchanges.\n        //    If the INVITE contained an offer, the UAS MAY generate an answer in a\n        //    reliable provisional response (assuming these are supported by the\n        //    UAC).  That results in the establishment of the session before\n        //    completion of the call.  Similarly, if a reliable provisional\n        //    response is the first reliable message sent back to the UAC, and the\n        //    INVITE did not contain an offer, one MUST appear in that reliable\n        //    provisional response.\n        //    If the UAC receives a reliable provisional response with an offer\n        //    (this would occur if the UAC sent an INVITE without an offer, in\n        //    which case the first reliable provisional response will contain the\n        //    offer), it MUST generate an answer in the PRACK.  If the UAC receives\n        //    a reliable provisional response with an answer, it MAY generate an\n        //    additional offer in the PRACK.  If the UAS receives a PRACK with an\n        //    offer, it MUST place the answer in the 2xx to the PRACK.\n        //    Once an answer has been sent or received, the UA SHOULD establish the\n        //    session based on the parameters of the offer and answer, even if the\n        //    original INVITE itself has not been responded to.\n        //    If the UAS had placed a session description in any reliable\n        //    provisional response that is unacknowledged when the INVITE is\n        //    accepted, the UAS MUST delay sending the 2xx until the provisional\n        //    response is acknowledged.  Otherwise, the reliability of the 1xx\n        //    cannot be guaranteed, and reliability is needed for proper operation\n        //    of the offer/answer exchange.\n        //    All user agents that support this extension MUST support all\n        //    offer/answer exchanges that are possible based on the rules in\n        //    Section 13.2 of RFC 3261, based on the existence of INVITE and PRACK\n        //    as requests, and 2xx and reliable 1xx as non-failure reliable\n        //    responses.\n        //\n        // https://tools.ietf.org/html/rfc3262#section-5\n        ////\n        // The Offer/Answer Model Implementation\n        //\n        // The offer/answer model is straight forward, but one MUST READ the specifications...\n        //\n        // 13.2.1 Creating the Initial INVITE (paragraph 8 in particular)\n        // https://tools.ietf.org/html/rfc3261#section-13.2.1\n        //\n        // 5 The Offer/Answer Model and PRACK\n        // https://tools.ietf.org/html/rfc3262#section-5\n        //\n        // Session Initiation Protocol (SIP) Usage of the Offer/Answer Model\n        // https://tools.ietf.org/html/rfc6337\n        ////\n        ////\n        // TODO: The Offer/Answer Model Implementation\n        //\n        // Currently if `earlyMedia` is enabled and the INVITE request forks,\n        // the session is terminated if the early dialog does not match the\n        // confirmed dialog. This restriction make sense in a WebRTC environment,\n        // but there are other environments where this restriction does not hold.\n        //\n        // So while we currently cannot make the offer in INVITE+forking+webrtc\n        // case work, we propose doing the following...\n        //\n        // OPTION 1\n        // - add a `earlyMediaForking` option and\n        // - require SDH.setDescription() to be callable multiple times.\n        //\n        // OPTION 2\n        // 1) modify SDH Factory to provide an initial offer without giving us the SDH, and then...\n        // 2) stick that offer in the initial INVITE, and when 183 with initial answer is received...\n        // 3) ask SDH Factory if it supports \"earlyRemoteAnswer\"\n        //   a) if true, ask SDH Factory to createSDH(localOffer).then((sdh) => sdh.setDescription(remoteAnswer)\n        //   b) if false, defer getting a SDH until 2xx response is received\n        //\n        // Our supplied WebRTC SDH will default to behavior 3b which works in forking environment (without)\n        // early media if initial offer is in the INVITE). We will, however, provide an \"inviteWillNotFork\"\n        // option which if set to \"true\" will have our supplied WebRTC SDH behave in the 3a manner.\n        // That will result in\n        //  - early media working with initial offer in the INVITE, and...\n        //  - if the INVITE forks, the session terminating with an ERROR that reads like\n        //    \"You set 'inviteWillNotFork' to true but the INVITE forked. You can't eat your cake, and have it too.\"\n        //  - furthermore, we accept that users will report that error to us as \"bug\" regardless\n        //\n        // So, SDH Factory is going to end up with a new interface along the lines of...\n        //\n        // interface SessionDescriptionHandlerFactory {\n        //   makeLocalOffer(): Promise<ContentTypeAndBody>;\n        //   makeSessionDescriptionHandler(\n        //     initialOffer: ContentTypeAndBody, offerType: \"local\" | \"remote\"\n        //   ): Promise<SessionDescriptionHandler>;\n        //   supportsEarlyRemoteAnswer: boolean;\n        //   supportsContentType(contentType: string): boolean;\n        //   getDescription(description: ContentTypeAndBody): Promise<ContentTypeAndBody>\n        //   setDescription(description: ContentTypeAndBody): Promise<void>\n        // }\n        ////\n        // Send the INVITE request.\n        this.outgoingInviteRequest = this.userAgent.userAgentCore.invite(this.outgoingRequestMessage, {\n            onAccept: (inviteResponse) => {\n                // Our transaction layer is \"non-standard\" in that it will only\n                // pass us a 2xx response once per branch, so there is no need to\n                // worry about dealing with 2xx retransmissions. However, we can\n                // and do still get 2xx responses for multiple branches (when an\n                // INVITE is forked) which may create multiple confirmed dialogs.\n                // Herein we are acking and sending a bye to any confirmed dialogs\n                // which arrive beyond the first one. This is the desired behavior\n                // for most applications (but certainly not all).\n                // If we already received a confirmed dialog, ack & bye this additional confirmed session.\n                if (this.dialog) {\n                    this.logger.log(\"Additional confirmed dialog, sending ACK and BYE\");\n                    this.ackAndBye(inviteResponse);\n                    // We do NOT transition state in this case (this is an \"extra\" dialog)\n                    return;\n                }\n                // If the user requested cancellation, ack & bye this session.\n                if (this.isCanceled) {\n                    this.logger.log(\"Canceled session accepted, sending ACK and BYE\");\n                    this.ackAndBye(inviteResponse);\n                    this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated);\n                    return;\n                }\n                this.notifyReferer(inviteResponse);\n                this.onAccept(inviteResponse)\n                    .then(() => {\n                    this.disposeEarlyMedia();\n                })\n                    .catch(() => {\n                    this.disposeEarlyMedia();\n                })\n                    .then(() => {\n                    if (options.requestDelegate && options.requestDelegate.onAccept) {\n                        options.requestDelegate.onAccept(inviteResponse);\n                    }\n                });\n            },\n            onProgress: (inviteResponse) => {\n                // If the user requested cancellation, ignore response.\n                if (this.isCanceled) {\n                    return;\n                }\n                this.notifyReferer(inviteResponse);\n                this.onProgress(inviteResponse)\n                    .catch(() => {\n                    this.disposeEarlyMedia();\n                })\n                    .then(() => {\n                    if (options.requestDelegate && options.requestDelegate.onProgress) {\n                        options.requestDelegate.onProgress(inviteResponse);\n                    }\n                });\n            },\n            onRedirect: (inviteResponse) => {\n                this.notifyReferer(inviteResponse);\n                this.onRedirect(inviteResponse);\n                if (options.requestDelegate && options.requestDelegate.onRedirect) {\n                    options.requestDelegate.onRedirect(inviteResponse);\n                }\n            },\n            onReject: (inviteResponse) => {\n                this.notifyReferer(inviteResponse);\n                this.onReject(inviteResponse);\n                if (options.requestDelegate && options.requestDelegate.onReject) {\n                    options.requestDelegate.onReject(inviteResponse);\n                }\n            },\n            onTrying: (inviteResponse) => {\n                this.notifyReferer(inviteResponse);\n                this.onTrying(inviteResponse);\n                if (options.requestDelegate && options.requestDelegate.onTrying) {\n                    options.requestDelegate.onTrying(inviteResponse);\n                }\n            }\n        });\n        return this.outgoingInviteRequest;\n    }\n    disposeEarlyMedia() {\n        this.earlyMediaSessionDescriptionHandlers.forEach((sessionDescriptionHandler) => {\n            sessionDescriptionHandler.close();\n        });\n        this.earlyMediaSessionDescriptionHandlers.clear();\n    }\n    notifyReferer(response) {\n        if (!this._referred) {\n            return;\n        }\n        if (!(this._referred instanceof _session_js__WEBPACK_IMPORTED_MODULE_0__.Session)) {\n            throw new Error(\"Referred session not instance of session\");\n        }\n        if (!this._referred.dialog) {\n            return;\n        }\n        if (!response.message.statusCode) {\n            throw new Error(\"Status code undefined.\");\n        }\n        if (!response.message.reasonPhrase) {\n            throw new Error(\"Reason phrase undefined.\");\n        }\n        const statusCode = response.message.statusCode;\n        const reasonPhrase = response.message.reasonPhrase;\n        const body = `SIP/2.0 ${statusCode} ${reasonPhrase}`.trim();\n        const outgoingNotifyRequest = this._referred.dialog.notify(undefined, {\n            extraHeaders: [\"Event: refer\", \"Subscription-State: terminated\"],\n            body: {\n                contentDisposition: \"render\",\n                contentType: \"message/sipfrag\",\n                content: body\n            }\n        });\n        // The implicit subscription created by a REFER is the same as a\n        // subscription created with a SUBSCRIBE request.  The agent issuing the\n        // REFER can terminate this subscription prematurely by unsubscribing\n        // using the mechanisms described in [2].  Terminating a subscription,\n        // either by explicitly unsubscribing or rejecting NOTIFY, is not an\n        // indication that the referenced request should be withdrawn or\n        // abandoned.\n        // https://tools.ietf.org/html/rfc3515#section-2.4.4\n        // FIXME: TODO: This should be done in a subscribe dialog to satisfy the above.\n        // If the notify is rejected, stop sending NOTIFY requests.\n        outgoingNotifyRequest.delegate = {\n            onReject: () => {\n                this._referred = undefined;\n            }\n        };\n    }\n    /**\n     * Handle final response to initial INVITE.\n     * @param inviteResponse - 2xx response.\n     */\n    onAccept(inviteResponse) {\n        this.logger.log(\"Inviter.onAccept\");\n        // validate state\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Establishing) {\n            this.logger.error(`Accept received while in state ${this.state}, dropping response`);\n            return Promise.reject(new Error(`Invalid session state ${this.state}`));\n        }\n        const response = inviteResponse.message;\n        const session = inviteResponse.session;\n        // Ported behavior.\n        if (response.hasHeader(\"P-Asserted-Identity\")) {\n            this._assertedIdentity = _grammar_grammar_js__WEBPACK_IMPORTED_MODULE_2__.Grammar.nameAddrHeaderParse(response.getHeader(\"P-Asserted-Identity\"));\n        }\n        // We have a confirmed dialog.\n        session.delegate = {\n            onAck: (ackRequest) => this.onAckRequest(ackRequest),\n            onBye: (byeRequest) => this.onByeRequest(byeRequest),\n            onInfo: (infoRequest) => this.onInfoRequest(infoRequest),\n            onInvite: (inviteRequest) => this.onInviteRequest(inviteRequest),\n            onMessage: (messageRequest) => this.onMessageRequest(messageRequest),\n            onNotify: (notifyRequest) => this.onNotifyRequest(notifyRequest),\n            onPrack: (prackRequest) => this.onPrackRequest(prackRequest),\n            onRefer: (referRequest) => this.onReferRequest(referRequest)\n        };\n        this._dialog = session;\n        switch (session.signalingState) {\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_6__.SignalingState.Initial:\n                // INVITE without offer, so MUST have offer at this point, so invalid state.\n                this.logger.error(\"Received 2xx response to INVITE without a session description\");\n                this.ackAndBye(inviteResponse, 400, \"Missing session description\");\n                this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated);\n                return Promise.reject(new Error(\"Bad Media Description\"));\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_6__.SignalingState.HaveLocalOffer:\n                // INVITE with offer, so MUST have answer at this point, so invalid state.\n                this.logger.error(\"Received 2xx response to INVITE without a session description\");\n                this.ackAndBye(inviteResponse, 400, \"Missing session description\");\n                this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated);\n                return Promise.reject(new Error(\"Bad Media Description\"));\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_6__.SignalingState.HaveRemoteOffer: {\n                // INVITE without offer, received offer in 2xx, so MUST send answer in ACK.\n                if (!this._dialog.offer) {\n                    throw new Error(`Session offer undefined in signaling state ${this._dialog.signalingState}.`);\n                }\n                const options = {\n                    sessionDescriptionHandlerModifiers: this.sessionDescriptionHandlerModifiers,\n                    sessionDescriptionHandlerOptions: this.sessionDescriptionHandlerOptions\n                };\n                return this.setOfferAndGetAnswer(this._dialog.offer, options)\n                    .then((body) => {\n                    inviteResponse.ack({ body });\n                    this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Established);\n                })\n                    .catch((error) => {\n                    this.ackAndBye(inviteResponse, 488, \"Invalid session description\");\n                    this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated);\n                    throw error;\n                });\n            }\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_6__.SignalingState.Stable: {\n                // If INVITE without offer and we have already completed the initial exchange.\n                if (this.earlyMediaSessionDescriptionHandlers.size > 0) {\n                    const sdh = this.earlyMediaSessionDescriptionHandlers.get(session.id);\n                    if (!sdh) {\n                        throw new Error(\"Session description handler undefined.\");\n                    }\n                    this.setSessionDescriptionHandler(sdh);\n                    this.earlyMediaSessionDescriptionHandlers.delete(session.id);\n                    inviteResponse.ack();\n                    this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Established);\n                    return Promise.resolve();\n                }\n                // If INVITE with offer and we used an \"early\" answer in a provisional response for media\n                if (this.earlyMediaDialog) {\n                    // If early media dialog doesn't match confirmed dialog, we must unfortunately fail.\n                    // This limitation stems from how WebRTC currently implements its offer/answer model.\n                    // There are details elsewhere, but in short a WebRTC offer cannot be forked.\n                    if (this.earlyMediaDialog !== session) {\n                        if (this.earlyMedia) {\n                            const message = \"You have set the 'earlyMedia' option to 'true' which requires that your INVITE requests \" +\n                                \"do not fork and yet this INVITE request did in fact fork. Consequentially and not surprisingly \" +\n                                \"the end point which accepted the INVITE (confirmed dialog) does not match the end point with \" +\n                                \"which early media has been setup (early dialog) and thus this session is unable to proceed. \" +\n                                \"In accordance with the SIP specifications, the SIP servers your end point is connected to \" +\n                                \"determine if an INVITE forks and the forking behavior of those servers cannot be controlled \" +\n                                \"by this library. If you wish to use early media with this library you must configure those \" +\n                                \"servers accordingly. Alternatively you may set the 'earlyMedia' to 'false' which will allow \" +\n                                \"this library to function with any INVITE requests which do fork.\";\n                            this.logger.error(message);\n                        }\n                        const error = new Error(\"Early media dialog does not equal confirmed dialog, terminating session\");\n                        this.logger.error(error.message);\n                        this.ackAndBye(inviteResponse, 488, \"Not Acceptable Here\");\n                        this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated);\n                        return Promise.reject(error);\n                    }\n                    // Otherwise we are good to go.\n                    inviteResponse.ack();\n                    this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Established);\n                    return Promise.resolve();\n                }\n                // If INVITE with offer and we have been waiting till now to apply the answer.\n                const answer = session.answer;\n                if (!answer) {\n                    throw new Error(\"Answer is undefined.\");\n                }\n                const options = {\n                    sessionDescriptionHandlerModifiers: this.sessionDescriptionHandlerModifiers,\n                    sessionDescriptionHandlerOptions: this.sessionDescriptionHandlerOptions\n                };\n                return this.setAnswer(answer, options)\n                    .then(() => {\n                    // This session has completed an initial offer/answer exchange...\n                    let ackOptions;\n                    if (this._renderbody && this._rendertype) {\n                        ackOptions = {\n                            body: { contentDisposition: \"render\", contentType: this._rendertype, content: this._renderbody }\n                        };\n                    }\n                    inviteResponse.ack(ackOptions);\n                    this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Established);\n                })\n                    .catch((error) => {\n                    this.logger.error(error.message);\n                    this.ackAndBye(inviteResponse, 488, \"Not Acceptable Here\");\n                    this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated);\n                    throw error;\n                });\n            }\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_6__.SignalingState.Closed:\n                // Dialog has terminated.\n                return Promise.reject(new Error(\"Terminated.\"));\n            default:\n                throw new Error(\"Unknown session signaling state.\");\n        }\n    }\n    /**\n     * Handle provisional response to initial INVITE.\n     * @param inviteResponse - 1xx response.\n     */\n    onProgress(inviteResponse) {\n        var _a;\n        this.logger.log(\"Inviter.onProgress\");\n        // validate state\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Establishing) {\n            this.logger.error(`Progress received while in state ${this.state}, dropping response`);\n            return Promise.reject(new Error(`Invalid session state ${this.state}`));\n        }\n        if (!this.outgoingInviteRequest) {\n            throw new Error(\"Outgoing INVITE request undefined.\");\n        }\n        const response = inviteResponse.message;\n        const session = inviteResponse.session;\n        // Ported - Set assertedIdentity.\n        if (response.hasHeader(\"P-Asserted-Identity\")) {\n            this._assertedIdentity = _grammar_grammar_js__WEBPACK_IMPORTED_MODULE_2__.Grammar.nameAddrHeaderParse(response.getHeader(\"P-Asserted-Identity\"));\n        }\n        // If a provisional response is received for an initial request, and\n        // that response contains a Require header field containing the option\n        // tag 100rel, the response is to be sent reliably.  If the response is\n        // a 100 (Trying) (as opposed to 101 to 199), this option tag MUST be\n        // ignored, and the procedures below MUST NOT be used.\n        // https://tools.ietf.org/html/rfc3262#section-4\n        const requireHeader = response.getHeader(\"require\");\n        const rseqHeader = response.getHeader(\"rseq\");\n        const rseq = requireHeader && requireHeader.includes(\"100rel\") && rseqHeader ? Number(rseqHeader) : undefined;\n        const responseReliable = !!rseq;\n        const extraHeaders = [];\n        if (responseReliable) {\n            extraHeaders.push(\"RAck: \" + response.getHeader(\"rseq\") + \" \" + response.getHeader(\"cseq\"));\n        }\n        switch (session.signalingState) {\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_6__.SignalingState.Initial:\n                // INVITE without offer and session still has no offer (and no answer).\n                if (responseReliable) {\n                    // Similarly, if a reliable provisional\n                    // response is the first reliable message sent back to the UAC, and the\n                    // INVITE did not contain an offer, one MUST appear in that reliable\n                    // provisional response.\n                    // https://tools.ietf.org/html/rfc3262#section-5\n                    this.logger.warn(\"First reliable provisional response received MUST contain an offer when INVITE does not contain an offer.\");\n                    // FIXME: Known popular UA's currently end up here...\n                    inviteResponse.prack({ extraHeaders });\n                }\n                return Promise.resolve();\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_6__.SignalingState.HaveLocalOffer:\n                // INVITE with offer and session only has that initial local offer.\n                if (responseReliable) {\n                    inviteResponse.prack({ extraHeaders });\n                }\n                return Promise.resolve();\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_6__.SignalingState.HaveRemoteOffer:\n                if (!responseReliable) {\n                    // The initial offer MUST be in either an INVITE or, if not there,\n                    // in the first reliable non-failure message from the UAS back to\n                    // the UAC.\n                    // https://tools.ietf.org/html/rfc3261#section-13.2.1\n                    // According to Section 13.2.1 of [RFC3261], 'The first reliable\n                    // non-failure message' must have an offer if there is no offer in the\n                    // INVITE request.  This means that the User Agent (UA) that receives\n                    // the INVITE request without an offer must include an offer in the\n                    // first reliable response with 100rel extension.  If no reliable\n                    // provisional response has been sent, the User Agent Server (UAS) must\n                    // include an offer when sending 2xx response.\n                    // https://tools.ietf.org/html/rfc6337#section-2.2\n                    this.logger.warn(\"Non-reliable provisional response MUST NOT contain an initial offer, discarding response.\");\n                    return Promise.resolve();\n                }\n                {\n                    // If the initial offer is in the first reliable non-failure\n                    // message from the UAS back to UAC, the answer MUST be in the\n                    // acknowledgement for that message\n                    const sdh = this.sessionDescriptionHandlerFactory(this, this.userAgent.configuration.sessionDescriptionHandlerFactoryOptions || {});\n                    if ((_a = this.delegate) === null || _a === void 0 ? void 0 : _a.onSessionDescriptionHandler) {\n                        this.delegate.onSessionDescriptionHandler(sdh, true);\n                    }\n                    this.earlyMediaSessionDescriptionHandlers.set(session.id, sdh);\n                    return sdh\n                        .setDescription(response.body, this.sessionDescriptionHandlerOptions, this.sessionDescriptionHandlerModifiers)\n                        .then(() => sdh.getDescription(this.sessionDescriptionHandlerOptions, this.sessionDescriptionHandlerModifiers))\n                        .then((description) => {\n                        const body = {\n                            contentDisposition: \"session\",\n                            contentType: description.contentType,\n                            content: description.body\n                        };\n                        inviteResponse.prack({ extraHeaders, body });\n                    })\n                        .catch((error) => {\n                        this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated);\n                        throw error;\n                    });\n                }\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_6__.SignalingState.Stable:\n                // This session has completed an initial offer/answer exchange, so...\n                // - INVITE with SDP and this provisional response MAY be reliable\n                // - INVITE without SDP and this provisional response MAY be reliable\n                if (responseReliable) {\n                    inviteResponse.prack({ extraHeaders });\n                }\n                if (this.earlyMedia && !this.earlyMediaDialog) {\n                    this.earlyMediaDialog = session;\n                    const answer = session.answer;\n                    if (!answer) {\n                        throw new Error(\"Answer is undefined.\");\n                    }\n                    const options = {\n                        sessionDescriptionHandlerModifiers: this.sessionDescriptionHandlerModifiers,\n                        sessionDescriptionHandlerOptions: this.sessionDescriptionHandlerOptions\n                    };\n                    return this.setAnswer(answer, options).catch((error) => {\n                        this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated);\n                        throw error;\n                    });\n                }\n                return Promise.resolve();\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_6__.SignalingState.Closed:\n                // Dialog has terminated.\n                return Promise.reject(new Error(\"Terminated.\"));\n            default:\n                throw new Error(\"Unknown session signaling state.\");\n        }\n    }\n    /**\n     * Handle final response to initial INVITE.\n     * @param inviteResponse - 3xx response.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onRedirect(inviteResponse) {\n        this.logger.log(\"Inviter.onRedirect\");\n        // validate state\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Establishing && this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminating) {\n            this.logger.error(`Redirect received while in state ${this.state}, dropping response`);\n            return;\n        }\n        // transition state\n        this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated);\n    }\n    /**\n     * Handle final response to initial INVITE.\n     * @param inviteResponse - 4xx, 5xx, or 6xx response.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onReject(inviteResponse) {\n        this.logger.log(\"Inviter.onReject\");\n        // validate state\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Establishing && this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminating) {\n            this.logger.error(`Reject received while in state ${this.state}, dropping response`);\n            return;\n        }\n        // transition state\n        this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated);\n    }\n    /**\n     * Handle final response to initial INVITE.\n     * @param inviteResponse - 100 response.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onTrying(inviteResponse) {\n        this.logger.log(\"Inviter.onTrying\");\n        // validate state\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Establishing) {\n            this.logger.error(`Trying received while in state ${this.state}, dropping response`);\n            return;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/api/inviter.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/api/message.js":
/*!************************************************!*\
  !*** ./node_modules/sip.js/lib/api/message.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Message: () => (/* binding */ Message)\n/* harmony export */ });\n/**\n * A received message (incoming MESSAGE).\n * @public\n */\nclass Message {\n    /** @internal */\n    constructor(incomingMessageRequest) {\n        this.incomingMessageRequest = incomingMessageRequest;\n    }\n    /** Incoming MESSAGE request message. */\n    get request() {\n        return this.incomingMessageRequest.message;\n    }\n    /** Accept the request. */\n    accept(options) {\n        this.incomingMessageRequest.accept(options);\n        return Promise.resolve();\n    }\n    /** Reject the request. */\n    reject(options) {\n        this.incomingMessageRequest.reject(options);\n        return Promise.resolve();\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/api/message.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/api/notification.js":
/*!*****************************************************!*\
  !*** ./node_modules/sip.js/lib/api/notification.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Notification: () => (/* binding */ Notification)\n/* harmony export */ });\n/**\n * A notification of an event (incoming NOTIFY).\n * @public\n */\nclass Notification {\n    /** @internal */\n    constructor(incomingNotifyRequest) {\n        this.incomingNotifyRequest = incomingNotifyRequest;\n    }\n    /** Incoming NOTIFY request message. */\n    get request() {\n        return this.incomingNotifyRequest.message;\n    }\n    /** Accept the request. */\n    accept(options) {\n        this.incomingNotifyRequest.accept(options);\n        return Promise.resolve();\n    }\n    /** Reject the request. */\n    reject(options) {\n        this.incomingNotifyRequest.reject(options);\n        return Promise.resolve();\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/api/notification.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/api/referral.js":
/*!*************************************************!*\
  !*** ./node_modules/sip.js/lib/api/referral.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Referral: () => (/* binding */ Referral)\n/* harmony export */ });\n/* harmony import */ var _grammar_name_addr_header_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../grammar/name-addr-header.js */ \"./node_modules/sip.js/lib/grammar/name-addr-header.js\");\n\n/**\n * A request to establish a {@link Session} elsewhere (incoming REFER).\n * @public\n */\nclass Referral {\n    /** @internal */\n    constructor(incomingReferRequest, session) {\n        this.incomingReferRequest = incomingReferRequest;\n        this.session = session;\n    }\n    get referTo() {\n        const referTo = this.incomingReferRequest.message.parseHeader(\"refer-to\");\n        if (!(referTo instanceof _grammar_name_addr_header_js__WEBPACK_IMPORTED_MODULE_0__.NameAddrHeader)) {\n            throw new Error(\"Failed to parse Refer-To header.\");\n        }\n        return referTo;\n    }\n    get referredBy() {\n        return this.incomingReferRequest.message.getHeader(\"referred-by\");\n    }\n    get replaces() {\n        const value = this.referTo.uri.getHeader(\"replaces\");\n        if (value instanceof Array) {\n            return value[0];\n        }\n        return value;\n    }\n    /** Incoming REFER request message. */\n    get request() {\n        return this.incomingReferRequest.message;\n    }\n    /** Accept the request. */\n    accept(options = { statusCode: 202 }) {\n        this.incomingReferRequest.accept(options);\n        return Promise.resolve();\n    }\n    /** Reject the request. */\n    reject(options) {\n        this.incomingReferRequest.reject(options);\n        return Promise.resolve();\n    }\n    /**\n     * Creates an inviter which may be used to send an out of dialog INVITE request.\n     *\n     * @remarks\n     * This a helper method to create an Inviter which will execute the referral\n     * of the `Session` which was referred. The appropriate headers are set and\n     * the referred `Session` is linked to the new `Session`. Note that only a\n     * single instance of the `Inviter` will be created and returned (if called\n     * more than once a reference to the same `Inviter` will be returned every time).\n     *\n     * @param options - Options bucket.\n     * @param modifiers - Session description handler modifiers.\n     */\n    makeInviter(options) {\n        if (this.inviter) {\n            return this.inviter;\n        }\n        const targetURI = this.referTo.uri.clone();\n        targetURI.clearHeaders();\n        options = options || {};\n        const extraHeaders = (options.extraHeaders || []).slice();\n        const replaces = this.replaces;\n        if (replaces) {\n            // decodeURIComponent is a holdover from 2c086eb4. Not sure that it is actually necessary\n            extraHeaders.push(\"Replaces: \" + decodeURIComponent(replaces));\n        }\n        const referredBy = this.referredBy;\n        if (referredBy) {\n            extraHeaders.push(\"Referred-By: \" + referredBy);\n        }\n        options.extraHeaders = extraHeaders;\n        this.inviter = this.session.userAgent._makeInviter(targetURI, options);\n        this.inviter._referred = this.session;\n        this.session._referral = this.inviter;\n        return this.inviter;\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/api/referral.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/api/session-state.js":
/*!******************************************************!*\
  !*** ./node_modules/sip.js/lib/api/session-state.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SessionState: () => (/* binding */ SessionState)\n/* harmony export */ });\n/**\n * {@link Session} state.\n *\n * @remarks\n * The {@link Session} behaves in a deterministic manner according to the following\n * Finite State Machine (FSM).\n * ```txt\n *                   ___________________________________________________________\n *                  |  ____________________________________________             |\n *                  | |            ____________________________    |            |\n * Session          | |           |                            v   v            v\n * Constructed -> Initial -> Establishing -> Established -> Terminating -> Terminated\n *                                |               |___________________________^   ^\n *                                |_______________________________________________|\n * ```\n * @public\n */\nvar SessionState;\n(function (SessionState) {\n    /**\n     * If `Inviter`, INVITE not sent yet.\n     * If `Invitation`, received INVITE (but no final response sent yet).\n     */\n    SessionState[\"Initial\"] = \"Initial\";\n    /**\n     * If `Inviter`, sent INVITE and waiting for a final response.\n     * If `Invitation`, received INVITE and attempting to send 200 final response (but has not sent it yet).\n     */\n    SessionState[\"Establishing\"] = \"Establishing\";\n    /**\n     * If `Inviter`, sent INVITE and received 200 final response and sent ACK.\n     * If `Invitation`, received INVITE and sent 200 final response.\n     */\n    SessionState[\"Established\"] = \"Established\";\n    /**\n     * If `Inviter`, sent INVITE, sent CANCEL and now waiting for 487 final response to ACK (or 200 to ACK & BYE).\n     * If `Invitation`, received INVITE, sent 200 final response and now waiting on ACK and upon receipt will attempt BYE\n     * (as the protocol specification requires, before sending a BYE we must receive the ACK - so we are waiting).\n     */\n    SessionState[\"Terminating\"] = \"Terminating\";\n    /**\n     * If `Inviter`, sent INVITE and received non-200 final response (or sent/received BYE after receiving 200).\n     * If `Invitation`, received INVITE and sent non-200 final response (or sent/received BYE after sending 200).\n     */\n    SessionState[\"Terminated\"] = \"Terminated\";\n})(SessionState = SessionState || (SessionState = {}));\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/api/session-state.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/api/session.js":
/*!************************************************!*\
  !*** ./node_modules/sip.js/lib/api/session.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Session: () => (/* binding */ Session)\n/* harmony export */ });\n/* harmony import */ var _grammar_grammar_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../grammar/grammar.js */ \"./node_modules/sip.js/lib/grammar/grammar.js\");\n/* harmony import */ var _grammar_uri_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../grammar/uri.js */ \"./node_modules/sip.js/lib/grammar/uri.js\");\n/* harmony import */ var _core_messages_body_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/messages/body.js */ \"./node_modules/sip.js/lib/core/messages/body.js\");\n/* harmony import */ var _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/session/session.js */ \"./node_modules/sip.js/lib/core/session/session.js\");\n/* harmony import */ var _core_messages_utils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../core/messages/utils.js */ \"./node_modules/sip.js/lib/core/messages/utils.js\");\n/* harmony import */ var _core_user_agent_core_allowed_methods_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/user-agent-core/allowed-methods.js */ \"./node_modules/sip.js/lib/core/user-agent-core/allowed-methods.js\");\n/* harmony import */ var _ack_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ack.js */ \"./node_modules/sip.js/lib/api/ack.js\");\n/* harmony import */ var _bye_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./bye.js */ \"./node_modules/sip.js/lib/api/bye.js\");\n/* harmony import */ var _emitter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./emitter.js */ \"./node_modules/sip.js/lib/api/emitter.js\");\n/* harmony import */ var _exceptions_content_type_unsupported_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./exceptions/content-type-unsupported.js */ \"./node_modules/sip.js/lib/api/exceptions/content-type-unsupported.js\");\n/* harmony import */ var _exceptions_request_pending_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./exceptions/request-pending.js */ \"./node_modules/sip.js/lib/api/exceptions/request-pending.js\");\n/* harmony import */ var _info_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./info.js */ \"./node_modules/sip.js/lib/api/info.js\");\n/* harmony import */ var _message_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./message.js */ \"./node_modules/sip.js/lib/api/message.js\");\n/* harmony import */ var _notification_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./notification.js */ \"./node_modules/sip.js/lib/api/notification.js\");\n/* harmony import */ var _referral_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./referral.js */ \"./node_modules/sip.js/lib/api/referral.js\");\n/* harmony import */ var _session_state_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./session-state.js */ \"./node_modules/sip.js/lib/api/session-state.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A session provides real time communication between one or more participants.\n *\n * @remarks\n * The transport behaves in a deterministic manner according to the\n * the state defined in {@link SessionState}.\n * @public\n */\nclass Session {\n    /**\n     * Constructor.\n     * @param userAgent - User agent. See {@link UserAgent} for details.\n     * @internal\n     */\n    constructor(userAgent, options = {}) {\n        /** True if there is an outgoing re-INVITE request outstanding. */\n        this.pendingReinvite = false;\n        /** True if there is an incoming re-INVITE ACK request outstanding. */\n        this.pendingReinviteAck = false;\n        /** Session state. */\n        this._state = _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Initial;\n        this.delegate = options.delegate;\n        this._stateEventEmitter = new _emitter_js__WEBPACK_IMPORTED_MODULE_1__.EmitterImpl();\n        this._userAgent = userAgent;\n    }\n    /**\n     * Destructor.\n     */\n    dispose() {\n        this.logger.log(`Session ${this.id} in state ${this._state} is being disposed`);\n        // Remove from the user agent's session collection\n        delete this.userAgent._sessions[this.id];\n        // Dispose of dialog media\n        if (this._sessionDescriptionHandler) {\n            this._sessionDescriptionHandler.close();\n            // TODO: The SDH needs to remain defined as it will be called after it is closed in cases\n            // where an answer/offer arrives while the session is being torn down. There are a variety\n            // of circumstances where this can happen - sending a BYE during a re-INVITE for example.\n            // The code is currently written such that it lazily makes a new SDH when it needs one\n            // and one is not yet defined. Thus if we undefined it here, it will currently make a\n            // new one which is out of sync and then never gets cleaned up.\n            //\n            // The downside of leaving it defined are that calls this closed SDH will continue to be\n            // made (think setDescription) and those should/will fail. These failures are handled, but\n            // it would be nice to have it all coded up in a way where having an undefined SDH where\n            // one is expected throws an error.\n            //\n            // this._sessionDescriptionHandler = undefined;\n        }\n        switch (this.state) {\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Initial:\n                break; // the Inviter/Invitation sub class dispose method handles this case\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Establishing:\n                break; // the Inviter/Invitation sub class dispose method handles this case\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established:\n                return new Promise((resolve) => {\n                    this._bye({\n                        // wait for the response to the BYE before resolving\n                        onAccept: () => resolve(),\n                        onRedirect: () => resolve(),\n                        onReject: () => resolve()\n                    });\n                });\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminating:\n                break; // nothing to be done\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated:\n                break; // nothing to be done\n            default:\n                throw new Error(\"Unknown state.\");\n        }\n        return Promise.resolve();\n    }\n    /**\n     * The asserted identity of the remote user.\n     */\n    get assertedIdentity() {\n        return this._assertedIdentity;\n    }\n    /**\n     * The confirmed session dialog.\n     */\n    get dialog() {\n        return this._dialog;\n    }\n    /**\n     * A unique identifier for this session.\n     */\n    get id() {\n        return this._id;\n    }\n    /**\n     * The session being replace by this one.\n     */\n    get replacee() {\n        return this._replacee;\n    }\n    /**\n     * Session description handler.\n     * @remarks\n     * If `this` is an instance of `Invitation`,\n     * `sessionDescriptionHandler` will be defined when the session state changes to \"established\".\n     * If `this` is an instance of `Inviter` and an offer was sent in the INVITE,\n     * `sessionDescriptionHandler` will be defined when the session state changes to \"establishing\".\n     * If `this` is an instance of `Inviter` and an offer was not sent in the INVITE,\n     * `sessionDescriptionHandler` will be defined when the session state changes to \"established\".\n     * Otherwise `undefined`.\n     */\n    get sessionDescriptionHandler() {\n        return this._sessionDescriptionHandler;\n    }\n    /**\n     * Session description handler factory.\n     */\n    get sessionDescriptionHandlerFactory() {\n        return this.userAgent.configuration.sessionDescriptionHandlerFactory;\n    }\n    /**\n     * SDH modifiers for the initial INVITE transaction.\n     * @remarks\n     * Used in all cases when handling the initial INVITE transaction as either UAC or UAS.\n     * May be set directly at anytime.\n     * May optionally be set via constructor option.\n     * May optionally be set via options passed to Inviter.invite() or Invitation.accept().\n     */\n    get sessionDescriptionHandlerModifiers() {\n        return this._sessionDescriptionHandlerModifiers || [];\n    }\n    set sessionDescriptionHandlerModifiers(modifiers) {\n        this._sessionDescriptionHandlerModifiers = modifiers.slice();\n    }\n    /**\n     * SDH options for the initial INVITE transaction.\n     * @remarks\n     * Used in all cases when handling the initial INVITE transaction as either UAC or UAS.\n     * May be set directly at anytime.\n     * May optionally be set via constructor option.\n     * May optionally be set via options passed to Inviter.invite() or Invitation.accept().\n     */\n    get sessionDescriptionHandlerOptions() {\n        return this._sessionDescriptionHandlerOptions || {};\n    }\n    set sessionDescriptionHandlerOptions(options) {\n        this._sessionDescriptionHandlerOptions = Object.assign({}, options);\n    }\n    /**\n     * SDH modifiers for re-INVITE transactions.\n     * @remarks\n     * Used in all cases when handling a re-INVITE transaction as either UAC or UAS.\n     * May be set directly at anytime.\n     * May optionally be set via constructor option.\n     * May optionally be set via options passed to Session.invite().\n     */\n    get sessionDescriptionHandlerModifiersReInvite() {\n        return this._sessionDescriptionHandlerModifiersReInvite || [];\n    }\n    set sessionDescriptionHandlerModifiersReInvite(modifiers) {\n        this._sessionDescriptionHandlerModifiersReInvite = modifiers.slice();\n    }\n    /**\n     * SDH options for re-INVITE transactions.\n     * @remarks\n     * Used in all cases when handling a re-INVITE transaction as either UAC or UAS.\n     * May be set directly at anytime.\n     * May optionally be set via constructor option.\n     * May optionally be set via options passed to Session.invite().\n     */\n    get sessionDescriptionHandlerOptionsReInvite() {\n        return this._sessionDescriptionHandlerOptionsReInvite || {};\n    }\n    set sessionDescriptionHandlerOptionsReInvite(options) {\n        this._sessionDescriptionHandlerOptionsReInvite = Object.assign({}, options);\n    }\n    /**\n     * Session state.\n     */\n    get state() {\n        return this._state;\n    }\n    /**\n     * Session state change emitter.\n     */\n    get stateChange() {\n        return this._stateEventEmitter;\n    }\n    /**\n     * The user agent.\n     */\n    get userAgent() {\n        return this._userAgent;\n    }\n    /**\n     * End the {@link Session}. Sends a BYE.\n     * @param options - Options bucket. See {@link SessionByeOptions} for details.\n     */\n    bye(options = {}) {\n        let message = \"Session.bye() may only be called if established session.\";\n        switch (this.state) {\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Initial:\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                if (typeof this.cancel === \"function\") {\n                    message += \" However Inviter.invite() has not yet been called.\";\n                    message += \" Perhaps you should have called Inviter.cancel()?\";\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                }\n                else if (typeof this.reject === \"function\") {\n                    message += \" However Invitation.accept() has not yet been called.\";\n                    message += \" Perhaps you should have called Invitation.reject()?\";\n                }\n                break;\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Establishing:\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                if (typeof this.cancel === \"function\") {\n                    message += \" However a dialog does not yet exist.\";\n                    message += \" Perhaps you should have called Inviter.cancel()?\";\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                }\n                else if (typeof this.reject === \"function\") {\n                    message += \" However Invitation.accept() has not yet been called (or not yet resolved).\";\n                    message += \" Perhaps you should have called Invitation.reject()?\";\n                }\n                break;\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established: {\n                const requestDelegate = options.requestDelegate;\n                const requestOptions = this.copyRequestOptions(options.requestOptions);\n                return this._bye(requestDelegate, requestOptions);\n            }\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminating:\n                message += \" However this session is already terminating.\";\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                if (typeof this.cancel === \"function\") {\n                    message += \" Perhaps you have already called Inviter.cancel()?\";\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                }\n                else if (typeof this.reject === \"function\") {\n                    message += \" Perhaps you have already called Session.bye()?\";\n                }\n                break;\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated:\n                message += \" However this session is already terminated.\";\n                break;\n            default:\n                throw new Error(\"Unknown state\");\n        }\n        this.logger.error(message);\n        return Promise.reject(new Error(`Invalid session state ${this.state}`));\n    }\n    /**\n     * Share {@link Info} with peer. Sends an INFO.\n     * @param options - Options bucket. See {@link SessionInfoOptions} for details.\n     */\n    info(options = {}) {\n        // guard session state\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established) {\n            const message = \"Session.info() may only be called if established session.\";\n            this.logger.error(message);\n            return Promise.reject(new Error(`Invalid session state ${this.state}`));\n        }\n        const requestDelegate = options.requestDelegate;\n        const requestOptions = this.copyRequestOptions(options.requestOptions);\n        return this._info(requestDelegate, requestOptions);\n    }\n    /**\n     * Renegotiate the session. Sends a re-INVITE.\n     * @param options - Options bucket. See {@link SessionInviteOptions} for details.\n     */\n    invite(options = {}) {\n        this.logger.log(\"Session.invite\");\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established) {\n            return Promise.reject(new Error(`Invalid session state ${this.state}`));\n        }\n        if (this.pendingReinvite) {\n            return Promise.reject(new _exceptions_request_pending_js__WEBPACK_IMPORTED_MODULE_2__.RequestPendingError(\"Reinvite in progress. Please wait until complete, then try again.\"));\n        }\n        this.pendingReinvite = true;\n        // Modifiers and options for initial INVITE transaction\n        if (options.sessionDescriptionHandlerModifiers) {\n            this.sessionDescriptionHandlerModifiersReInvite = options.sessionDescriptionHandlerModifiers;\n        }\n        if (options.sessionDescriptionHandlerOptions) {\n            this.sessionDescriptionHandlerOptionsReInvite = options.sessionDescriptionHandlerOptions;\n        }\n        const delegate = {\n            onAccept: (response) => {\n                // A re-INVITE transaction has an offer/answer [RFC3264] exchange\n                // associated with it.  The UAC (User Agent Client) generating a given\n                // re-INVITE can act as the offerer or as the answerer.  A UAC willing\n                // to act as the offerer includes an offer in the re-INVITE.  The UAS\n                // (User Agent Server) then provides an answer in a response to the\n                // re-INVITE.  A UAC willing to act as answerer does not include an\n                // offer in the re-INVITE.  The UAS then provides an offer in a response\n                // to the re-INVITE becoming, thus, the offerer.\n                // https://tools.ietf.org/html/rfc6141#section-1\n                const body = (0,_core_messages_body_js__WEBPACK_IMPORTED_MODULE_3__.getBody)(response.message);\n                if (!body) {\n                    // No way to recover, so terminate session and mark as failed.\n                    this.logger.error(\"Received 2xx response to re-INVITE without a session description\");\n                    this.ackAndBye(response, 400, \"Missing session description\");\n                    this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated);\n                    this.pendingReinvite = false;\n                    return;\n                }\n                if (options.withoutSdp) {\n                    // INVITE without SDP - set remote offer and send an answer in the ACK\n                    const answerOptions = {\n                        sessionDescriptionHandlerOptions: this.sessionDescriptionHandlerOptionsReInvite,\n                        sessionDescriptionHandlerModifiers: this.sessionDescriptionHandlerModifiersReInvite\n                    };\n                    this.setOfferAndGetAnswer(body, answerOptions)\n                        .then((answerBody) => {\n                        response.ack({ body: answerBody });\n                    })\n                        .catch((error) => {\n                        // No way to recover, so terminate session and mark as failed.\n                        this.logger.error(\"Failed to handle offer in 2xx response to re-INVITE\");\n                        this.logger.error(error.message);\n                        if (this.state === _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated) {\n                            // A BYE should not be sent if already terminated.\n                            // For example, a BYE may be sent/received while re-INVITE is outstanding.\n                            response.ack();\n                        }\n                        else {\n                            this.ackAndBye(response, 488, \"Bad Media Description\");\n                            this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated);\n                        }\n                    })\n                        .then(() => {\n                        this.pendingReinvite = false;\n                        if (options.requestDelegate && options.requestDelegate.onAccept) {\n                            options.requestDelegate.onAccept(response);\n                        }\n                    });\n                }\n                else {\n                    // INVITE with SDP - set remote answer and send an ACK\n                    const answerOptions = {\n                        sessionDescriptionHandlerOptions: this.sessionDescriptionHandlerOptionsReInvite,\n                        sessionDescriptionHandlerModifiers: this.sessionDescriptionHandlerModifiersReInvite\n                    };\n                    this.setAnswer(body, answerOptions)\n                        .then(() => {\n                        response.ack();\n                    })\n                        .catch((error) => {\n                        // No way to recover, so terminate session and mark as failed.\n                        this.logger.error(\"Failed to handle answer in 2xx response to re-INVITE\");\n                        this.logger.error(error.message);\n                        // A BYE should only be sent if session is not already terminated.\n                        // For example, a BYE may be sent/received while re-INVITE is outstanding.\n                        // The ACK needs to be sent regardless as it was not handled by the transaction.\n                        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated) {\n                            this.ackAndBye(response, 488, \"Bad Media Description\");\n                            this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated);\n                        }\n                        else {\n                            response.ack();\n                        }\n                    })\n                        .then(() => {\n                        this.pendingReinvite = false;\n                        if (options.requestDelegate && options.requestDelegate.onAccept) {\n                            options.requestDelegate.onAccept(response);\n                        }\n                    });\n                }\n            },\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            onProgress: (response) => {\n                return;\n            },\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            onRedirect: (response) => {\n                return;\n            },\n            onReject: (response) => {\n                this.logger.warn(\"Received a non-2xx response to re-INVITE\");\n                this.pendingReinvite = false;\n                if (options.withoutSdp) {\n                    if (options.requestDelegate && options.requestDelegate.onReject) {\n                        options.requestDelegate.onReject(response);\n                    }\n                }\n                else {\n                    this.rollbackOffer()\n                        .catch((error) => {\n                        // No way to recover, so terminate session and mark as failed.\n                        this.logger.error(\"Failed to rollback offer on non-2xx response to re-INVITE\");\n                        this.logger.error(error.message);\n                        // A BYE should only be sent if session is not already terminated.\n                        // For example, a BYE may be sent/received while re-INVITE is outstanding.\n                        // Note that the ACK was already sent by the transaction, so just need to send BYE.\n                        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated) {\n                            if (!this.dialog) {\n                                throw new Error(\"Dialog undefined.\");\n                            }\n                            const extraHeaders = [];\n                            extraHeaders.push(\"Reason: \" + this.getReasonHeaderValue(500, \"Internal Server Error\"));\n                            this.dialog.bye(undefined, { extraHeaders });\n                            this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated);\n                        }\n                    })\n                        .then(() => {\n                        if (options.requestDelegate && options.requestDelegate.onReject) {\n                            options.requestDelegate.onReject(response);\n                        }\n                    });\n                }\n            },\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            onTrying: (response) => {\n                return;\n            }\n        };\n        const requestOptions = options.requestOptions || {};\n        requestOptions.extraHeaders = (requestOptions.extraHeaders || []).slice();\n        requestOptions.extraHeaders.push(\"Allow: \" + _core_user_agent_core_allowed_methods_js__WEBPACK_IMPORTED_MODULE_4__.AllowedMethods.toString());\n        requestOptions.extraHeaders.push(\"Contact: \" + this._contact);\n        // Just send an INVITE with no sdp...\n        if (options.withoutSdp) {\n            if (!this.dialog) {\n                this.pendingReinvite = false;\n                throw new Error(\"Dialog undefined.\");\n            }\n            return Promise.resolve(this.dialog.invite(delegate, requestOptions));\n        }\n        // Get an offer and send it in an INVITE\n        const offerOptions = {\n            sessionDescriptionHandlerOptions: this.sessionDescriptionHandlerOptionsReInvite,\n            sessionDescriptionHandlerModifiers: this.sessionDescriptionHandlerModifiersReInvite\n        };\n        return this.getOffer(offerOptions)\n            .then((offerBody) => {\n            if (!this.dialog) {\n                this.pendingReinvite = false;\n                throw new Error(\"Dialog undefined.\");\n            }\n            requestOptions.body = offerBody;\n            return this.dialog.invite(delegate, requestOptions);\n        })\n            .catch((error) => {\n            this.logger.error(error.message);\n            this.logger.error(\"Failed to send re-INVITE\");\n            this.pendingReinvite = false;\n            throw error;\n        });\n    }\n    /**\n     * Deliver a {@link Message}. Sends a MESSAGE.\n     * @param options - Options bucket. See {@link SessionMessageOptions} for details.\n     */\n    message(options = {}) {\n        // guard session state\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established) {\n            const message = \"Session.message() may only be called if established session.\";\n            this.logger.error(message);\n            return Promise.reject(new Error(`Invalid session state ${this.state}`));\n        }\n        const requestDelegate = options.requestDelegate;\n        const requestOptions = this.copyRequestOptions(options.requestOptions);\n        return this._message(requestDelegate, requestOptions);\n    }\n    /**\n     * Proffer a {@link Referral}. Send a REFER.\n     * @param referTo - The referral target. If a `Session`, a REFER w/Replaces is sent.\n     * @param options - Options bucket. See {@link SessionReferOptions} for details.\n     */\n    refer(referTo, options = {}) {\n        // guard session state\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established) {\n            const message = \"Session.refer() may only be called if established session.\";\n            this.logger.error(message);\n            return Promise.reject(new Error(`Invalid session state ${this.state}`));\n        }\n        // REFER with Replaces (Attended Transfer) only supported with established sessions.\n        if (referTo instanceof Session && !referTo.dialog) {\n            const message = \"Session.refer() may only be called with session which is established. \" +\n                \"You are perhaps attempting to attended transfer to a target for which \" +\n                \"there is not dialog yet established. Perhaps you are attempting a \" +\n                \"'semi-attended' tansfer? Regardless, this is not supported. The recommended \" +\n                \"approached is to check to see if the target Session is in the Established \" +\n                \"state before calling refer(); if the state is not Established you may \" +\n                \"proceed by falling back using a URI as the target (blind transfer).\";\n            this.logger.error(message);\n            return Promise.reject(new Error(`Invalid session state ${this.state}`));\n        }\n        const requestDelegate = options.requestDelegate;\n        const requestOptions = this.copyRequestOptions(options.requestOptions);\n        requestOptions.extraHeaders = requestOptions.extraHeaders\n            ? requestOptions.extraHeaders.concat(this.referExtraHeaders(this.referToString(referTo)))\n            : this.referExtraHeaders(this.referToString(referTo));\n        return this._refer(options.onNotify, requestDelegate, requestOptions);\n    }\n    /**\n     * Send BYE.\n     * @param delegate - Request delegate.\n     * @param options - Request options bucket.\n     * @internal\n     */\n    _bye(delegate, options) {\n        // Using core session dialog\n        if (!this.dialog) {\n            return Promise.reject(new Error(\"Session dialog undefined.\"));\n        }\n        const dialog = this.dialog;\n        // The caller's UA MAY send a BYE for either confirmed or early dialogs,\n        // and the callee's UA MAY send a BYE on confirmed dialogs, but MUST NOT\n        // send a BYE on early dialogs. However, the callee's UA MUST NOT send a\n        // BYE on a confirmed dialog until it has received an ACK for its 2xx\n        // response or until the server transaction times out.\n        // https://tools.ietf.org/html/rfc3261#section-15\n        switch (dialog.sessionState) {\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Initial:\n                throw new Error(`Invalid dialog state ${dialog.sessionState}`);\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Early: // Implementation choice - not sending BYE for early dialogs.\n                throw new Error(`Invalid dialog state ${dialog.sessionState}`);\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.AckWait: {\n                // This state only occurs if we are the callee.\n                this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminating); // We're terminating\n                return new Promise((resolve) => {\n                    dialog.delegate = {\n                        // When ACK shows up, say BYE.\n                        onAck: () => {\n                            const request = dialog.bye(delegate, options);\n                            this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated);\n                            resolve(request);\n                            return Promise.resolve();\n                        },\n                        // Or the server transaction times out before the ACK arrives.\n                        onAckTimeout: () => {\n                            const request = dialog.bye(delegate, options);\n                            this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated);\n                            resolve(request);\n                        }\n                    };\n                });\n            }\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Confirmed: {\n                const request = dialog.bye(delegate, options);\n                this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated);\n                return Promise.resolve(request);\n            }\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SessionState.Terminated:\n                throw new Error(`Invalid dialog state ${dialog.sessionState}`);\n            default:\n                throw new Error(\"Unrecognized state.\");\n        }\n    }\n    /**\n     * Send INFO.\n     * @param delegate - Request delegate.\n     * @param options - Request options bucket.\n     * @internal\n     */\n    _info(delegate, options) {\n        // Using core session dialog\n        if (!this.dialog) {\n            return Promise.reject(new Error(\"Session dialog undefined.\"));\n        }\n        return Promise.resolve(this.dialog.info(delegate, options));\n    }\n    /**\n     * Send MESSAGE.\n     * @param delegate - Request delegate.\n     * @param options - Request options bucket.\n     * @internal\n     */\n    _message(delegate, options) {\n        // Using core session dialog\n        if (!this.dialog) {\n            return Promise.reject(new Error(\"Session dialog undefined.\"));\n        }\n        return Promise.resolve(this.dialog.message(delegate, options));\n    }\n    /**\n     * Send REFER.\n     * @param onNotify - Notification callback.\n     * @param delegate - Request delegate.\n     * @param options - Request options bucket.\n     * @internal\n     */\n    _refer(onNotify, delegate, options) {\n        // Using core session dialog\n        if (!this.dialog) {\n            return Promise.reject(new Error(\"Session dialog undefined.\"));\n        }\n        // If set, deliver any in-dialog NOTIFY requests here...\n        this.onNotify = onNotify;\n        return Promise.resolve(this.dialog.refer(delegate, options));\n    }\n    /**\n     * Send ACK and then BYE. There are unrecoverable errors which can occur\n     * while handling dialog forming and in-dialog INVITE responses and when\n     * they occur we ACK the response and send a BYE.\n     * Note that the BYE is sent in the dialog associated with the response\n     * which is not necessarily `this.dialog`. And, accordingly, the\n     * session state is not transitioned to terminated and session is not closed.\n     * @param inviteResponse - The response causing the error.\n     * @param statusCode - Status code for he reason phrase.\n     * @param reasonPhrase - Reason phrase for the BYE.\n     * @internal\n     */\n    ackAndBye(response, statusCode, reasonPhrase) {\n        response.ack();\n        const extraHeaders = [];\n        if (statusCode) {\n            extraHeaders.push(\"Reason: \" + this.getReasonHeaderValue(statusCode, reasonPhrase));\n        }\n        // Using the dialog session associate with the response (which might not be this.dialog)\n        response.session.bye(undefined, { extraHeaders });\n    }\n    /**\n     * Handle in dialog ACK request.\n     * @internal\n     */\n    onAckRequest(request) {\n        this.logger.log(\"Session.onAckRequest\");\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established && this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminating) {\n            this.logger.error(`ACK received while in state ${this.state}, dropping request`);\n            return Promise.resolve();\n        }\n        const dialog = this.dialog;\n        if (!dialog) {\n            throw new Error(\"Dialog undefined.\");\n        }\n        // if received answer in ACK.\n        const answerOptions = {\n            sessionDescriptionHandlerOptions: this.pendingReinviteAck\n                ? this.sessionDescriptionHandlerOptionsReInvite\n                : this.sessionDescriptionHandlerOptions,\n            sessionDescriptionHandlerModifiers: this.pendingReinviteAck\n                ? this._sessionDescriptionHandlerModifiersReInvite\n                : this._sessionDescriptionHandlerModifiers\n        };\n        if (this.delegate && this.delegate.onAck) {\n            const ack = new _ack_js__WEBPACK_IMPORTED_MODULE_6__.Ack(request);\n            this.delegate.onAck(ack);\n        }\n        // reset pending ACK flag\n        this.pendingReinviteAck = false;\n        switch (dialog.signalingState) {\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SignalingState.Initial: {\n                // State should never be reached as first reliable response must have answer/offer.\n                // So we must have never has sent an offer.\n                this.logger.error(`Invalid signaling state ${dialog.signalingState}.`);\n                const extraHeaders = [\"Reason: \" + this.getReasonHeaderValue(488, \"Bad Media Description\")];\n                dialog.bye(undefined, { extraHeaders });\n                this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated);\n                return Promise.resolve();\n            }\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SignalingState.Stable: {\n                // State we should be in.\n                // Either the ACK has the answer that got us here, or we were in this state prior to the ACK.\n                const body = (0,_core_messages_body_js__WEBPACK_IMPORTED_MODULE_3__.getBody)(request.message);\n                // If the ACK doesn't have an answer, nothing to be done.\n                if (!body) {\n                    return Promise.resolve();\n                }\n                if (body.contentDisposition === \"render\") {\n                    this._renderbody = body.content;\n                    this._rendertype = body.contentType;\n                    return Promise.resolve();\n                }\n                if (body.contentDisposition !== \"session\") {\n                    return Promise.resolve();\n                }\n                return this.setAnswer(body, answerOptions).catch((error) => {\n                    this.logger.error(error.message);\n                    const extraHeaders = [\"Reason: \" + this.getReasonHeaderValue(488, \"Bad Media Description\")];\n                    dialog.bye(undefined, { extraHeaders });\n                    this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated);\n                });\n            }\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SignalingState.HaveLocalOffer: {\n                // State should never be reached as local offer would be answered by this ACK.\n                // So we must have received an ACK without an answer.\n                this.logger.error(`Invalid signaling state ${dialog.signalingState}.`);\n                const extraHeaders = [\"Reason: \" + this.getReasonHeaderValue(488, \"Bad Media Description\")];\n                dialog.bye(undefined, { extraHeaders });\n                this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated);\n                return Promise.resolve();\n            }\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SignalingState.HaveRemoteOffer: {\n                // State should never be reached as remote offer would be answered in first reliable response.\n                // So we must have never has sent an answer.\n                this.logger.error(`Invalid signaling state ${dialog.signalingState}.`);\n                const extraHeaders = [\"Reason: \" + this.getReasonHeaderValue(488, \"Bad Media Description\")];\n                dialog.bye(undefined, { extraHeaders });\n                this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated);\n                return Promise.resolve();\n            }\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SignalingState.Closed:\n                throw new Error(`Invalid signaling state ${dialog.signalingState}.`);\n            default:\n                throw new Error(`Invalid signaling state ${dialog.signalingState}.`);\n        }\n    }\n    /**\n     * Handle in dialog BYE request.\n     * @internal\n     */\n    onByeRequest(request) {\n        this.logger.log(\"Session.onByeRequest\");\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established) {\n            this.logger.error(`BYE received while in state ${this.state}, dropping request`);\n            return;\n        }\n        if (this.delegate && this.delegate.onBye) {\n            const bye = new _bye_js__WEBPACK_IMPORTED_MODULE_7__.Bye(request);\n            this.delegate.onBye(bye);\n        }\n        else {\n            request.accept();\n        }\n        this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated);\n    }\n    /**\n     * Handle in dialog INFO request.\n     * @internal\n     */\n    onInfoRequest(request) {\n        this.logger.log(\"Session.onInfoRequest\");\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established) {\n            this.logger.error(`INFO received while in state ${this.state}, dropping request`);\n            return;\n        }\n        if (this.delegate && this.delegate.onInfo) {\n            const info = new _info_js__WEBPACK_IMPORTED_MODULE_8__.Info(request);\n            this.delegate.onInfo(info);\n        }\n        else {\n            // FIXME: TODO: We should reject request...\n            //\n            // If a UA receives an INFO request associated with an Info Package that\n            // the UA has not indicated willingness to receive, the UA MUST send a\n            // 469 (Bad Info Package) response (see Section 11.6), which contains a\n            // Recv-Info header field with Info Packages for which the UA is willing\n            // to receive INFO requests.\n            // https://tools.ietf.org/html/rfc6086#section-4.2.2\n            request.accept();\n        }\n    }\n    /**\n     * Handle in dialog INVITE request.\n     * @internal\n     */\n    onInviteRequest(request) {\n        this.logger.log(\"Session.onInviteRequest\");\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established) {\n            this.logger.error(`INVITE received while in state ${this.state}, dropping request`);\n            return;\n        }\n        // set pending ACK flag\n        this.pendingReinviteAck = true;\n        // TODO: would be nice to have core track and set the Contact header,\n        // but currently the session which is setting it is holding onto it.\n        const extraHeaders = [\"Contact: \" + this._contact];\n        // Handle P-Asserted-Identity\n        if (request.message.hasHeader(\"P-Asserted-Identity\")) {\n            const header = request.message.getHeader(\"P-Asserted-Identity\");\n            if (!header) {\n                throw new Error(\"Header undefined.\");\n            }\n            this._assertedIdentity = _grammar_grammar_js__WEBPACK_IMPORTED_MODULE_9__.Grammar.nameAddrHeaderParse(header);\n        }\n        const options = {\n            sessionDescriptionHandlerOptions: this.sessionDescriptionHandlerOptionsReInvite,\n            sessionDescriptionHandlerModifiers: this.sessionDescriptionHandlerModifiersReInvite\n        };\n        this.generateResponseOfferAnswerInDialog(options)\n            .then((body) => {\n            const outgoingResponse = request.accept({ statusCode: 200, extraHeaders, body });\n            if (this.delegate && this.delegate.onInvite) {\n                this.delegate.onInvite(request.message, outgoingResponse.message, 200);\n            }\n        })\n            .catch((error) => {\n            this.logger.error(error.message);\n            this.logger.error(\"Failed to handle to re-INVITE request\");\n            if (!this.dialog) {\n                throw new Error(\"Dialog undefined.\");\n            }\n            this.logger.error(this.dialog.signalingState);\n            // If we don't have a local/remote offer...\n            if (this.dialog.signalingState === _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SignalingState.Stable) {\n                const outgoingResponse = request.reject({ statusCode: 488 }); // Not Acceptable Here\n                if (this.delegate && this.delegate.onInvite) {\n                    this.delegate.onInvite(request.message, outgoingResponse.message, 488);\n                }\n                return;\n            }\n            // Otherwise rollback\n            this.rollbackOffer()\n                .then(() => {\n                const outgoingResponse = request.reject({ statusCode: 488 }); // Not Acceptable Here\n                if (this.delegate && this.delegate.onInvite) {\n                    this.delegate.onInvite(request.message, outgoingResponse.message, 488);\n                }\n            })\n                .catch((errorRollback) => {\n                // No way to recover, so terminate session and mark as failed.\n                this.logger.error(errorRollback.message);\n                this.logger.error(\"Failed to rollback offer on re-INVITE request\");\n                const outgoingResponse = request.reject({ statusCode: 488 }); // Not Acceptable Here\n                // A BYE should only be sent if session is not already terminated.\n                // For example, a BYE may be sent/received while re-INVITE is outstanding.\n                // Note that the ACK was already sent by the transaction, so just need to send BYE.\n                if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated) {\n                    if (!this.dialog) {\n                        throw new Error(\"Dialog undefined.\");\n                    }\n                    const extraHeadersBye = [];\n                    extraHeadersBye.push(\"Reason: \" + this.getReasonHeaderValue(500, \"Internal Server Error\"));\n                    this.dialog.bye(undefined, { extraHeaders: extraHeadersBye });\n                    this.stateTransition(_session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated);\n                }\n                if (this.delegate && this.delegate.onInvite) {\n                    this.delegate.onInvite(request.message, outgoingResponse.message, 488);\n                }\n            });\n        });\n    }\n    /**\n     * Handle in dialog MESSAGE request.\n     * @internal\n     */\n    onMessageRequest(request) {\n        this.logger.log(\"Session.onMessageRequest\");\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established) {\n            this.logger.error(`MESSAGE received while in state ${this.state}, dropping request`);\n            return;\n        }\n        if (this.delegate && this.delegate.onMessage) {\n            const message = new _message_js__WEBPACK_IMPORTED_MODULE_10__.Message(request);\n            this.delegate.onMessage(message);\n        }\n        else {\n            request.accept();\n        }\n    }\n    /**\n     * Handle in dialog NOTIFY request.\n     * @internal\n     */\n    onNotifyRequest(request) {\n        this.logger.log(\"Session.onNotifyRequest\");\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established) {\n            this.logger.error(`NOTIFY received while in state ${this.state}, dropping request`);\n            return;\n        }\n        // If this a NOTIFY associated with the progress of a REFER,\n        // look to delegate handling to the associated callback.\n        if (this.onNotify) {\n            const notification = new _notification_js__WEBPACK_IMPORTED_MODULE_11__.Notification(request);\n            this.onNotify(notification);\n            return;\n        }\n        // Otherwise accept the NOTIFY.\n        if (this.delegate && this.delegate.onNotify) {\n            const notification = new _notification_js__WEBPACK_IMPORTED_MODULE_11__.Notification(request);\n            this.delegate.onNotify(notification);\n        }\n        else {\n            request.accept();\n        }\n    }\n    /**\n     * Handle in dialog PRACK request.\n     * @internal\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onPrackRequest(request) {\n        this.logger.log(\"Session.onPrackRequest\");\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established) {\n            this.logger.error(`PRACK received while in state ${this.state}, dropping request`);\n            return;\n        }\n        throw new Error(\"Unimplemented.\");\n    }\n    /**\n     * Handle in dialog REFER request.\n     * @internal\n     */\n    onReferRequest(request) {\n        this.logger.log(\"Session.onReferRequest\");\n        if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established) {\n            this.logger.error(`REFER received while in state ${this.state}, dropping request`);\n            return;\n        }\n        // REFER is a SIP request and is constructed as defined in [1].  A REFER\n        // request MUST contain exactly one Refer-To header field value.\n        // https://tools.ietf.org/html/rfc3515#section-2.4.1\n        if (!request.message.hasHeader(\"refer-to\")) {\n            this.logger.warn(\"Invalid REFER packet. A refer-to header is required. Rejecting.\");\n            request.reject();\n            return;\n        }\n        const referral = new _referral_js__WEBPACK_IMPORTED_MODULE_12__.Referral(request, this);\n        if (this.delegate && this.delegate.onRefer) {\n            this.delegate.onRefer(referral);\n        }\n        else {\n            this.logger.log(\"No delegate available to handle REFER, automatically accepting and following.\");\n            referral\n                .accept()\n                .then(() => referral.makeInviter(this._referralInviterOptions).invite())\n                .catch((error) => {\n                // FIXME: logging and eating error...\n                this.logger.error(error.message);\n            });\n        }\n    }\n    /**\n     * Generate an offer or answer for a response to an INVITE request.\n     * If a remote offer was provided in the request, set the remote\n     * description and get a local answer. If a remote offer was not\n     * provided, generates a local offer.\n     * @internal\n     */\n    generateResponseOfferAnswer(request, options) {\n        if (this.dialog) {\n            return this.generateResponseOfferAnswerInDialog(options);\n        }\n        const body = (0,_core_messages_body_js__WEBPACK_IMPORTED_MODULE_3__.getBody)(request.message);\n        if (!body || body.contentDisposition !== \"session\") {\n            return this.getOffer(options);\n        }\n        else {\n            return this.setOfferAndGetAnswer(body, options);\n        }\n    }\n    /**\n     * Generate an offer or answer for a response to an INVITE request\n     * when a dialog (early or otherwise) has already been established.\n     * This method may NOT be called if a dialog has yet to be established.\n     * @internal\n     */\n    generateResponseOfferAnswerInDialog(options) {\n        if (!this.dialog) {\n            throw new Error(\"Dialog undefined.\");\n        }\n        switch (this.dialog.signalingState) {\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SignalingState.Initial:\n                return this.getOffer(options);\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SignalingState.HaveLocalOffer:\n                // o  Once the UAS has sent or received an answer to the initial\n                // offer, it MUST NOT generate subsequent offers in any responses\n                // to the initial INVITE.  This means that a UAS based on this\n                // specification alone can never generate subsequent offers until\n                // completion of the initial transaction.\n                // https://tools.ietf.org/html/rfc3261#section-13.2.1\n                return Promise.resolve(undefined);\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SignalingState.HaveRemoteOffer:\n                if (!this.dialog.offer) {\n                    throw new Error(`Session offer undefined in signaling state ${this.dialog.signalingState}.`);\n                }\n                return this.setOfferAndGetAnswer(this.dialog.offer, options);\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SignalingState.Stable:\n                // o  Once the UAS has sent or received an answer to the initial\n                // offer, it MUST NOT generate subsequent offers in any responses\n                // to the initial INVITE.  This means that a UAS based on this\n                // specification alone can never generate subsequent offers until\n                // completion of the initial transaction.\n                // https://tools.ietf.org/html/rfc3261#section-13.2.1\n                if (this.state !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established) {\n                    return Promise.resolve(undefined);\n                }\n                // In dialog INVITE without offer, get an offer for the response.\n                return this.getOffer(options);\n            case _core_session_session_js__WEBPACK_IMPORTED_MODULE_5__.SignalingState.Closed:\n                throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);\n            default:\n                throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);\n        }\n    }\n    /**\n     * Get local offer.\n     * @internal\n     */\n    getOffer(options) {\n        const sdh = this.setupSessionDescriptionHandler();\n        const sdhOptions = options.sessionDescriptionHandlerOptions;\n        const sdhModifiers = options.sessionDescriptionHandlerModifiers;\n        // This is intentionally written very defensively. Don't trust SDH to behave.\n        try {\n            return sdh\n                .getDescription(sdhOptions, sdhModifiers)\n                .then((bodyAndContentType) => (0,_core_messages_body_js__WEBPACK_IMPORTED_MODULE_3__.fromBodyLegacy)(bodyAndContentType))\n                .catch((error) => {\n                // don't trust SDH to reject with Error\n                this.logger.error(\"Session.getOffer: SDH getDescription rejected...\");\n                const e = error instanceof Error ? error : new Error(\"Session.getOffer unknown error.\");\n                this.logger.error(e.message);\n                throw e;\n            });\n        }\n        catch (error) {\n            // don't trust SDH to throw an Error\n            this.logger.error(\"Session.getOffer: SDH getDescription threw...\");\n            const e = error instanceof Error ? error : new Error(error);\n            this.logger.error(e.message);\n            return Promise.reject(e);\n        }\n    }\n    /**\n     * Rollback local/remote offer.\n     * @internal\n     */\n    rollbackOffer() {\n        const sdh = this.setupSessionDescriptionHandler();\n        if (sdh.rollbackDescription === undefined) {\n            return Promise.resolve();\n        }\n        // This is intentionally written very defensively. Don't trust SDH to behave.\n        try {\n            return sdh.rollbackDescription().catch((error) => {\n                // don't trust SDH to reject with Error\n                this.logger.error(\"Session.rollbackOffer: SDH rollbackDescription rejected...\");\n                const e = error instanceof Error ? error : new Error(\"Session.rollbackOffer unknown error.\");\n                this.logger.error(e.message);\n                throw e;\n            });\n        }\n        catch (error) {\n            // don't trust SDH to throw an Error\n            this.logger.error(\"Session.rollbackOffer: SDH rollbackDescription threw...\");\n            const e = error instanceof Error ? error : new Error(error);\n            this.logger.error(e.message);\n            return Promise.reject(e);\n        }\n    }\n    /**\n     * Set remote answer.\n     * @internal\n     */\n    setAnswer(answer, options) {\n        const sdh = this.setupSessionDescriptionHandler();\n        const sdhOptions = options.sessionDescriptionHandlerOptions;\n        const sdhModifiers = options.sessionDescriptionHandlerModifiers;\n        // This is intentionally written very defensively. Don't trust SDH to behave.\n        try {\n            if (!sdh.hasDescription(answer.contentType)) {\n                return Promise.reject(new _exceptions_content_type_unsupported_js__WEBPACK_IMPORTED_MODULE_13__.ContentTypeUnsupportedError());\n            }\n        }\n        catch (error) {\n            this.logger.error(\"Session.setAnswer: SDH hasDescription threw...\");\n            const e = error instanceof Error ? error : new Error(error);\n            this.logger.error(e.message);\n            return Promise.reject(e);\n        }\n        try {\n            return sdh.setDescription(answer.content, sdhOptions, sdhModifiers).catch((error) => {\n                // don't trust SDH to reject with Error\n                this.logger.error(\"Session.setAnswer: SDH setDescription rejected...\");\n                const e = error instanceof Error ? error : new Error(\"Session.setAnswer unknown error.\");\n                this.logger.error(e.message);\n                throw e;\n            });\n        }\n        catch (error) {\n            // don't trust SDH to throw an Error\n            this.logger.error(\"Session.setAnswer: SDH setDescription threw...\");\n            const e = error instanceof Error ? error : new Error(error);\n            this.logger.error(e.message);\n            return Promise.reject(e);\n        }\n    }\n    /**\n     * Set remote offer and get local answer.\n     * @internal\n     */\n    setOfferAndGetAnswer(offer, options) {\n        const sdh = this.setupSessionDescriptionHandler();\n        const sdhOptions = options.sessionDescriptionHandlerOptions;\n        const sdhModifiers = options.sessionDescriptionHandlerModifiers;\n        // This is intentionally written very defensively. Don't trust SDH to behave.\n        try {\n            if (!sdh.hasDescription(offer.contentType)) {\n                return Promise.reject(new _exceptions_content_type_unsupported_js__WEBPACK_IMPORTED_MODULE_13__.ContentTypeUnsupportedError());\n            }\n        }\n        catch (error) {\n            this.logger.error(\"Session.setOfferAndGetAnswer: SDH hasDescription threw...\");\n            const e = error instanceof Error ? error : new Error(error);\n            this.logger.error(e.message);\n            return Promise.reject(e);\n        }\n        try {\n            return sdh\n                .setDescription(offer.content, sdhOptions, sdhModifiers)\n                .then(() => sdh.getDescription(sdhOptions, sdhModifiers))\n                .then((bodyAndContentType) => (0,_core_messages_body_js__WEBPACK_IMPORTED_MODULE_3__.fromBodyLegacy)(bodyAndContentType))\n                .catch((error) => {\n                // don't trust SDH to reject with Error\n                this.logger.error(\"Session.setOfferAndGetAnswer: SDH setDescription or getDescription rejected...\");\n                const e = error instanceof Error ? error : new Error(\"Session.setOfferAndGetAnswer unknown error.\");\n                this.logger.error(e.message);\n                throw e;\n            });\n        }\n        catch (error) {\n            // don't trust SDH to throw an Error\n            this.logger.error(\"Session.setOfferAndGetAnswer: SDH setDescription or getDescription threw...\");\n            const e = error instanceof Error ? error : new Error(error);\n            this.logger.error(e.message);\n            return Promise.reject(e);\n        }\n    }\n    /**\n     * SDH for confirmed dialog.\n     * @internal\n     */\n    setSessionDescriptionHandler(sdh) {\n        if (this._sessionDescriptionHandler) {\n            throw new Error(\"Session description handler defined.\");\n        }\n        this._sessionDescriptionHandler = sdh;\n    }\n    /**\n     * SDH for confirmed dialog.\n     * @internal\n     */\n    setupSessionDescriptionHandler() {\n        var _a;\n        if (this._sessionDescriptionHandler) {\n            return this._sessionDescriptionHandler;\n        }\n        this._sessionDescriptionHandler = this.sessionDescriptionHandlerFactory(this, this.userAgent.configuration.sessionDescriptionHandlerFactoryOptions);\n        if ((_a = this.delegate) === null || _a === void 0 ? void 0 : _a.onSessionDescriptionHandler) {\n            this.delegate.onSessionDescriptionHandler(this._sessionDescriptionHandler, false);\n        }\n        return this._sessionDescriptionHandler;\n    }\n    /**\n     * Transition session state.\n     * @internal\n     */\n    stateTransition(newState) {\n        const invalidTransition = () => {\n            throw new Error(`Invalid state transition from ${this._state} to ${newState}`);\n        };\n        // Validate transition\n        switch (this._state) {\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Initial:\n                if (newState !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Establishing &&\n                    newState !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established &&\n                    newState !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminating &&\n                    newState !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated) {\n                    invalidTransition();\n                }\n                break;\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Establishing:\n                if (newState !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established &&\n                    newState !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminating &&\n                    newState !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated) {\n                    invalidTransition();\n                }\n                break;\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Established:\n                if (newState !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminating && newState !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated) {\n                    invalidTransition();\n                }\n                break;\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminating:\n                if (newState !== _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated) {\n                    invalidTransition();\n                }\n                break;\n            case _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated:\n                invalidTransition();\n                break;\n            default:\n                throw new Error(\"Unrecognized state.\");\n        }\n        // Transition\n        this._state = newState;\n        this.logger.log(`Session ${this.id} transitioned to state ${this._state}`);\n        this._stateEventEmitter.emit(this._state);\n        // Dispose\n        if (newState === _session_state_js__WEBPACK_IMPORTED_MODULE_0__.SessionState.Terminated) {\n            this.dispose();\n        }\n    }\n    copyRequestOptions(requestOptions = {}) {\n        const extraHeaders = requestOptions.extraHeaders ? requestOptions.extraHeaders.slice() : undefined;\n        const body = requestOptions.body\n            ? {\n                contentDisposition: requestOptions.body.contentDisposition || \"render\",\n                contentType: requestOptions.body.contentType || \"text/plain\",\n                content: requestOptions.body.content || \"\"\n            }\n            : undefined;\n        return {\n            extraHeaders,\n            body\n        };\n    }\n    getReasonHeaderValue(code, reason) {\n        const cause = code;\n        let text = (0,_core_messages_utils_js__WEBPACK_IMPORTED_MODULE_14__.getReasonPhrase)(code);\n        if (!text && reason) {\n            text = reason;\n        }\n        return \"SIP;cause=\" + cause + ';text=\"' + text + '\"';\n    }\n    referExtraHeaders(referTo) {\n        const extraHeaders = [];\n        extraHeaders.push(\"Referred-By: <\" + this.userAgent.configuration.uri + \">\");\n        extraHeaders.push(\"Contact: \" + this._contact);\n        extraHeaders.push(\"Allow: \" + [\"ACK\", \"CANCEL\", \"INVITE\", \"MESSAGE\", \"BYE\", \"OPTIONS\", \"INFO\", \"NOTIFY\", \"REFER\"].toString());\n        extraHeaders.push(\"Refer-To: \" + referTo);\n        return extraHeaders;\n    }\n    referToString(target) {\n        let referTo;\n        if (target instanceof _grammar_uri_js__WEBPACK_IMPORTED_MODULE_15__.URI) {\n            // REFER without Replaces (Blind Transfer)\n            referTo = target.toString();\n        }\n        else {\n            // REFER with Replaces (Attended Transfer)\n            if (!target.dialog) {\n                throw new Error(\"Dialog undefined.\");\n            }\n            const displayName = target.remoteIdentity.friendlyName;\n            const remoteTarget = target.dialog.remoteTarget.toString();\n            const callId = target.dialog.callId;\n            const remoteTag = target.dialog.remoteTag;\n            const localTag = target.dialog.localTag;\n            const replaces = encodeURIComponent(`${callId};to-tag=${remoteTag};from-tag=${localTag}`);\n            referTo = `\"${displayName}\" <${remoteTarget}?Replaces=${replaces}>`;\n        }\n        return referTo;\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/api/session.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/api/user-agent-options.js":
/*!***********************************************************!*\
  !*** ./node_modules/sip.js/lib/api/user-agent-options.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SIPExtension: () => (/* binding */ SIPExtension),\n/* harmony export */   UserAgentRegisteredOptionTags: () => (/* binding */ UserAgentRegisteredOptionTags)\n/* harmony export */ });\n/**\n * SIP extension support level.\n * @public\n */\nvar SIPExtension;\n(function (SIPExtension) {\n    SIPExtension[\"Required\"] = \"Required\";\n    SIPExtension[\"Supported\"] = \"Supported\";\n    SIPExtension[\"Unsupported\"] = \"Unsupported\";\n})(SIPExtension = SIPExtension || (SIPExtension = {}));\n/**\n * SIP Option Tags\n * @remarks\n * http://www.iana.org/assignments/sip-parameters/sip-parameters.xhtml#sip-parameters-4\n * @public\n */\nconst UserAgentRegisteredOptionTags = {\n    \"100rel\": true,\n    \"199\": true,\n    answermode: true,\n    \"early-session\": true,\n    eventlist: true,\n    explicitsub: true,\n    \"from-change\": true,\n    \"geolocation-http\": true,\n    \"geolocation-sip\": true,\n    gin: true,\n    gruu: true,\n    histinfo: true,\n    ice: true,\n    join: true,\n    \"multiple-refer\": true,\n    norefersub: true,\n    nosub: true,\n    outbound: true,\n    path: true,\n    policy: true,\n    precondition: true,\n    pref: true,\n    privacy: true,\n    \"recipient-list-invite\": true,\n    \"recipient-list-message\": true,\n    \"recipient-list-subscribe\": true,\n    replaces: true,\n    \"resource-priority\": true,\n    \"sdp-anat\": true,\n    \"sec-agree\": true,\n    tdialog: true,\n    timer: true,\n    uui: true // RFC 7433\n};\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/api/user-agent-options.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/core/exceptions/exception.js":
/*!**************************************************************!*\
  !*** ./node_modules/sip.js/lib/core/exceptions/exception.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Exception: () => (/* binding */ Exception)\n/* harmony export */ });\n/**\n * An Exception is considered a condition that a reasonable application may wish to catch.\n * An Error indicates serious problems that a reasonable application should not try to catch.\n * @public\n */\nclass Exception extends Error {\n    constructor(message) {\n        super(message); // 'Error' breaks prototype chain here\n        Object.setPrototypeOf(this, new.target.prototype); // restore prototype chain\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/core/exceptions/exception.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/core/messages/body.js":
/*!*******************************************************!*\
  !*** ./node_modules/sip.js/lib/core/messages/body.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fromBodyLegacy: () => (/* binding */ fromBodyLegacy),\n/* harmony export */   getBody: () => (/* binding */ getBody),\n/* harmony export */   isBody: () => (/* binding */ isBody)\n/* harmony export */ });\n/* harmony import */ var _incoming_request_message_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./incoming-request-message.js */ \"./node_modules/sip.js/lib/core/messages/incoming-request-message.js\");\n/* harmony import */ var _incoming_response_message_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./incoming-response-message.js */ \"./node_modules/sip.js/lib/core/messages/incoming-response-message.js\");\n/* harmony import */ var _outgoing_request_message_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./outgoing-request-message.js */ \"./node_modules/sip.js/lib/core/messages/outgoing-request-message.js\");\n\n\n\n// If the Content-Disposition header field is missing, bodies of\n// Content-Type application/sdp imply the disposition \"session\", while\n// other content types imply \"render\".\n// https://tools.ietf.org/html/rfc3261#section-13.2.1\nfunction contentTypeToContentDisposition(contentType) {\n    if (contentType === \"application/sdp\") {\n        return \"session\";\n    }\n    else {\n        return \"render\";\n    }\n}\n/**\n * Create a Body given a legacy body type.\n * @param bodyLegacy - Body Object\n * @internal\n */\nfunction fromBodyLegacy(bodyLegacy) {\n    const content = typeof bodyLegacy === \"string\" ? bodyLegacy : bodyLegacy.body;\n    const contentType = typeof bodyLegacy === \"string\" ? \"application/sdp\" : bodyLegacy.contentType;\n    const contentDisposition = contentTypeToContentDisposition(contentType);\n    const body = { contentDisposition, contentType, content };\n    return body;\n}\n/**\n * User-Defined Type Guard for Body.\n * @param body - Body to check.\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isBody(body) {\n    return body &&\n        typeof body.content === \"string\" &&\n        typeof body.contentType === \"string\" &&\n        body.contentDisposition === undefined\n        ? true\n        : typeof body.contentDisposition === \"string\";\n}\n/**\n * Given a message, get a normalized body.\n * The content disposition is inferred if not set.\n * @param message - The message.\n * @internal\n */\nfunction getBody(message) {\n    let contentDisposition;\n    let contentType;\n    let content;\n    // We're in UAS role, receiving incoming request\n    if (message instanceof _incoming_request_message_js__WEBPACK_IMPORTED_MODULE_0__.IncomingRequestMessage) {\n        if (message.body) {\n            // FIXME: Parsing needs typing\n            const parse = message.parseHeader(\"Content-Disposition\");\n            contentDisposition = parse ? parse.type : undefined;\n            contentType = message.parseHeader(\"Content-Type\");\n            content = message.body;\n        }\n    }\n    // We're in UAC role, receiving incoming response\n    if (message instanceof _incoming_response_message_js__WEBPACK_IMPORTED_MODULE_1__.IncomingResponseMessage) {\n        if (message.body) {\n            // FIXME: Parsing needs typing\n            const parse = message.parseHeader(\"Content-Disposition\");\n            contentDisposition = parse ? parse.type : undefined;\n            contentType = message.parseHeader(\"Content-Type\");\n            content = message.body;\n        }\n    }\n    // We're in UAC role, sending outgoing request\n    if (message instanceof _outgoing_request_message_js__WEBPACK_IMPORTED_MODULE_2__.OutgoingRequestMessage) {\n        if (message.body) {\n            contentDisposition = message.getHeader(\"Content-Disposition\");\n            contentType = message.getHeader(\"Content-Type\");\n            if (typeof message.body === \"string\") {\n                // FIXME: OutgoingRequest should not allow a \"string\" body without a \"Content-Type\" header.\n                if (!contentType) {\n                    throw new Error(\"Header content type header does not equal body content type.\");\n                }\n                content = message.body;\n            }\n            else {\n                // FIXME: OutgoingRequest should not allow the \"Content-Type\" header not to match th body content type\n                if (contentType && contentType !== message.body.contentType) {\n                    throw new Error(\"Header content type header does not equal body content type.\");\n                }\n                contentType = message.body.contentType;\n                content = message.body.body;\n            }\n        }\n    }\n    // We're in UAS role, sending outgoing response\n    if (isBody(message)) {\n        contentDisposition = message.contentDisposition;\n        contentType = message.contentType;\n        content = message.content;\n    }\n    // No content, no body.\n    if (!content) {\n        return undefined;\n    }\n    if (contentType && !contentDisposition) {\n        contentDisposition = contentTypeToContentDisposition(contentType);\n    }\n    if (!contentDisposition) {\n        throw new Error(\"Content disposition undefined.\");\n    }\n    if (!contentType) {\n        throw new Error(\"Content type undefined.\");\n    }\n    return {\n        contentDisposition,\n        contentType,\n        content\n    };\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/core/messages/body.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/core/messages/incoming-message.js":
/*!*******************************************************************!*\
  !*** ./node_modules/sip.js/lib/core/messages/incoming-message.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IncomingMessage: () => (/* binding */ IncomingMessage)\n/* harmony export */ });\n/* harmony import */ var _grammar_grammar_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../grammar/grammar.js */ \"./node_modules/sip.js/lib/grammar/grammar.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"./node_modules/sip.js/lib/core/messages/utils.js\");\n\n\n/**\n * Incoming message.\n * @public\n */\nclass IncomingMessage {\n    constructor() {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.headers = {};\n    }\n    /**\n     * Insert a header of the given name and value into the last position of the\n     * header array.\n     * @param name - header name\n     * @param value - header value\n     */\n    addHeader(name, value) {\n        const header = { raw: value };\n        name = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.headerize)(name);\n        if (this.headers[name]) {\n            this.headers[name].push(header);\n        }\n        else {\n            this.headers[name] = [header];\n        }\n    }\n    /**\n     * Get the value of the given header name at the given position.\n     * @param name - header name\n     * @returns Returns the specified header, undefined if header doesn't exist.\n     */\n    getHeader(name) {\n        const header = this.headers[(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.headerize)(name)];\n        if (header) {\n            if (header[0]) {\n                return header[0].raw;\n            }\n        }\n        else {\n            return;\n        }\n    }\n    /**\n     * Get the header/s of the given name.\n     * @param name - header name\n     * @returns Array - with all the headers of the specified name.\n     */\n    getHeaders(name) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const header = this.headers[(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.headerize)(name)];\n        const result = [];\n        if (!header) {\n            return [];\n        }\n        for (const headerPart of header) {\n            result.push(headerPart.raw);\n        }\n        return result;\n    }\n    /**\n     * Verify the existence of the given header.\n     * @param name - header name\n     * @returns true if header with given name exists, false otherwise\n     */\n    hasHeader(name) {\n        return !!this.headers[(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.headerize)(name)];\n    }\n    /**\n     * Parse the given header on the given index.\n     * @param name - header name\n     * @param idx - header index\n     * @returns Parsed header object, undefined if the\n     *   header is not present or in case of a parsing error.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parseHeader(name, idx = 0) {\n        name = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.headerize)(name);\n        if (!this.headers[name]) {\n            // this.logger.log(\"header '\" + name + \"' not present\");\n            return;\n        }\n        else if (idx >= this.headers[name].length) {\n            // this.logger.log(\"not so many '\" + name + \"' headers present\");\n            return;\n        }\n        const header = this.headers[name][idx];\n        const value = header.raw;\n        if (header.parsed) {\n            return header.parsed;\n        }\n        // substitute '-' by '_' for grammar rule matching.\n        const parsed = _grammar_grammar_js__WEBPACK_IMPORTED_MODULE_1__.Grammar.parse(value, name.replace(/-/g, \"_\"));\n        if (parsed === -1) {\n            this.headers[name].splice(idx, 1); // delete from headers\n            // this.logger.warn('error parsing \"' + name + '\" header field with value \"' + value + '\"');\n            return;\n        }\n        else {\n            header.parsed = parsed;\n            return parsed;\n        }\n    }\n    /**\n     * Message Header attribute selector. Alias of parseHeader.\n     * @param name - header name\n     * @param idx - header index\n     * @returns Parsed header object, undefined if the\n     *   header is not present or in case of a parsing error.\n     *\n     * @example\n     * message.s('via',3).port\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    s(name, idx = 0) {\n        return this.parseHeader(name, idx);\n    }\n    /**\n     * Replace the value of the given header by the value.\n     * @param name - header name\n     * @param value - header value\n     */\n    setHeader(name, value) {\n        this.headers[(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.headerize)(name)] = [{ raw: value }];\n    }\n    toString() {\n        return this.data;\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/core/messages/incoming-message.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/core/messages/incoming-request-message.js":
/*!***************************************************************************!*\
  !*** ./node_modules/sip.js/lib/core/messages/incoming-request-message.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IncomingRequestMessage: () => (/* binding */ IncomingRequestMessage)\n/* harmony export */ });\n/* harmony import */ var _incoming_message_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./incoming-message.js */ \"./node_modules/sip.js/lib/core/messages/incoming-message.js\");\n\n/**\n * Incoming request message.\n * @public\n */\nclass IncomingRequestMessage extends _incoming_message_js__WEBPACK_IMPORTED_MODULE_0__.IncomingMessage {\n    constructor() {\n        super();\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/core/messages/incoming-request-message.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/core/messages/incoming-response-message.js":
/*!****************************************************************************!*\
  !*** ./node_modules/sip.js/lib/core/messages/incoming-response-message.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IncomingResponseMessage: () => (/* binding */ IncomingResponseMessage)\n/* harmony export */ });\n/* harmony import */ var _incoming_message_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./incoming-message.js */ \"./node_modules/sip.js/lib/core/messages/incoming-message.js\");\n\n/**\n * Incoming response message.\n * @public\n */\nclass IncomingResponseMessage extends _incoming_message_js__WEBPACK_IMPORTED_MODULE_0__.IncomingMessage {\n    constructor() {\n        super();\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/core/messages/incoming-response-message.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/core/messages/methods/constants.js":
/*!********************************************************************!*\
  !*** ./node_modules/sip.js/lib/core/messages/methods/constants.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   C: () => (/* binding */ C)\n/* harmony export */ });\n/* eslint-disable @typescript-eslint/no-namespace */\n/**\n * SIP Methods\n * @internal\n */\nvar C;\n(function (C) {\n    C.ACK = \"ACK\";\n    C.BYE = \"BYE\";\n    C.CANCEL = \"CANCEL\";\n    C.INFO = \"INFO\";\n    C.INVITE = \"INVITE\";\n    C.MESSAGE = \"MESSAGE\";\n    C.NOTIFY = \"NOTIFY\";\n    C.OPTIONS = \"OPTIONS\";\n    C.REGISTER = \"REGISTER\";\n    C.UPDATE = \"UPDATE\";\n    C.SUBSCRIBE = \"SUBSCRIBE\";\n    C.PUBLISH = \"PUBLISH\";\n    C.REFER = \"REFER\";\n    C.PRACK = \"PRACK\";\n})(C = C || (C = {}));\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/core/messages/methods/constants.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/core/messages/outgoing-request-message.js":
/*!***************************************************************************!*\
  !*** ./node_modules/sip.js/lib/core/messages/outgoing-request-message.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OutgoingRequestMessage: () => (/* binding */ OutgoingRequestMessage)\n/* harmony export */ });\n/* harmony import */ var _grammar_name_addr_header_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../grammar/name-addr-header.js */ \"./node_modules/sip.js/lib/grammar/name-addr-header.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"./node_modules/sip.js/lib/core/messages/utils.js\");\n\n\n/**\n * Outgoing SIP request message.\n * @public\n */\nclass OutgoingRequestMessage {\n    constructor(method, ruri, fromURI, toURI, options, extraHeaders, body) {\n        this.headers = {};\n        this.extraHeaders = [];\n        // Initialize default options\n        this.options = OutgoingRequestMessage.getDefaultOptions();\n        // Options - merge a deep copy\n        if (options) {\n            this.options = Object.assign(Object.assign({}, this.options), options);\n            if (this.options.optionTags && this.options.optionTags.length) {\n                this.options.optionTags = this.options.optionTags.slice();\n            }\n            if (this.options.routeSet && this.options.routeSet.length) {\n                this.options.routeSet = this.options.routeSet.slice();\n            }\n        }\n        // Extra headers - deep copy\n        if (extraHeaders && extraHeaders.length) {\n            this.extraHeaders = extraHeaders.slice();\n        }\n        // Body - deep copy\n        if (body) {\n            // TODO: internal representation should be Body\n            // this.body = { ...body };\n            this.body = {\n                body: body.content,\n                contentType: body.contentType\n            };\n        }\n        // Method\n        this.method = method;\n        // RURI\n        this.ruri = ruri.clone();\n        // From\n        this.fromURI = fromURI.clone();\n        this.fromTag = this.options.fromTag ? this.options.fromTag : (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.newTag)();\n        this.from = OutgoingRequestMessage.makeNameAddrHeader(this.fromURI, this.options.fromDisplayName, this.fromTag);\n        // To\n        this.toURI = toURI.clone();\n        this.toTag = this.options.toTag;\n        this.to = OutgoingRequestMessage.makeNameAddrHeader(this.toURI, this.options.toDisplayName, this.toTag);\n        // Call-ID\n        this.callId = this.options.callId ? this.options.callId : this.options.callIdPrefix + (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.createRandomToken)(15);\n        // CSeq\n        this.cseq = this.options.cseq;\n        // The relative order of header fields with different field names is not\n        // significant.  However, it is RECOMMENDED that header fields which are\n        // needed for proxy processing (Via, Route, Record-Route, Proxy-Require,\n        // Max-Forwards, and Proxy-Authorization, for example) appear towards\n        // the top of the message to facilitate rapid parsing.\n        // https://tools.ietf.org/html/rfc3261#section-7.3.1\n        this.setHeader(\"route\", this.options.routeSet);\n        this.setHeader(\"via\", \"\");\n        this.setHeader(\"to\", this.to.toString());\n        this.setHeader(\"from\", this.from.toString());\n        this.setHeader(\"cseq\", this.cseq + \" \" + this.method);\n        this.setHeader(\"call-id\", this.callId);\n        this.setHeader(\"max-forwards\", \"70\");\n    }\n    /** Get a copy of the default options. */\n    static getDefaultOptions() {\n        return {\n            callId: \"\",\n            callIdPrefix: \"\",\n            cseq: 1,\n            toDisplayName: \"\",\n            toTag: \"\",\n            fromDisplayName: \"\",\n            fromTag: \"\",\n            forceRport: false,\n            hackViaTcp: false,\n            optionTags: [\"outbound\"],\n            routeSet: [],\n            userAgentString: \"sip.js\",\n            viaHost: \"\"\n        };\n    }\n    static makeNameAddrHeader(uri, displayName, tag) {\n        const parameters = {};\n        if (tag) {\n            parameters.tag = tag;\n        }\n        return new _grammar_name_addr_header_js__WEBPACK_IMPORTED_MODULE_1__.NameAddrHeader(uri, displayName, parameters);\n    }\n    /**\n     * Get the value of the given header name at the given position.\n     * @param name - header name\n     * @returns Returns the specified header, undefined if header doesn't exist.\n     */\n    getHeader(name) {\n        const header = this.headers[(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.headerize)(name)];\n        if (header) {\n            if (header[0]) {\n                return header[0];\n            }\n        }\n        else {\n            const regexp = new RegExp(\"^\\\\s*\" + name + \"\\\\s*:\", \"i\");\n            for (const exHeader of this.extraHeaders) {\n                if (regexp.test(exHeader)) {\n                    return exHeader.substring(exHeader.indexOf(\":\") + 1).trim();\n                }\n            }\n        }\n        return;\n    }\n    /**\n     * Get the header/s of the given name.\n     * @param name - header name\n     * @returns Array with all the headers of the specified name.\n     */\n    getHeaders(name) {\n        const result = [];\n        const headerArray = this.headers[(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.headerize)(name)];\n        if (headerArray) {\n            for (const headerPart of headerArray) {\n                result.push(headerPart);\n            }\n        }\n        else {\n            const regexp = new RegExp(\"^\\\\s*\" + name + \"\\\\s*:\", \"i\");\n            for (const exHeader of this.extraHeaders) {\n                if (regexp.test(exHeader)) {\n                    result.push(exHeader.substring(exHeader.indexOf(\":\") + 1).trim());\n                }\n            }\n        }\n        return result;\n    }\n    /**\n     * Verify the existence of the given header.\n     * @param name - header name\n     * @returns true if header with given name exists, false otherwise\n     */\n    hasHeader(name) {\n        if (this.headers[(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.headerize)(name)]) {\n            return true;\n        }\n        else {\n            const regexp = new RegExp(\"^\\\\s*\" + name + \"\\\\s*:\", \"i\");\n            for (const extraHeader of this.extraHeaders) {\n                if (regexp.test(extraHeader)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    /**\n     * Replace the the given header by the given value.\n     * @param name - header name\n     * @param value - header value\n     */\n    setHeader(name, value) {\n        this.headers[(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.headerize)(name)] = value instanceof Array ? value : [value];\n    }\n    /**\n     * The Via header field indicates the transport used for the transaction\n     * and identifies the location where the response is to be sent.  A Via\n     * header field value is added only after the transport that will be\n     * used to reach the next hop has been selected (which may involve the\n     * usage of the procedures in [4]).\n     *\n     * When the UAC creates a request, it MUST insert a Via into that\n     * request.  The protocol name and protocol version in the header field\n     * MUST be SIP and 2.0, respectively.  The Via header field value MUST\n     * contain a branch parameter.  This parameter is used to identify the\n     * transaction created by that request.  This parameter is used by both\n     * the client and the server.\n     * https://tools.ietf.org/html/rfc3261#section-8.1.1.7\n     * @param branchParameter - The branch parameter.\n     * @param transport - The sent protocol transport.\n     */\n    setViaHeader(branch, transport) {\n        // FIXME: Hack\n        if (this.options.hackViaTcp) {\n            transport = \"TCP\";\n        }\n        let via = \"SIP/2.0/\" + transport;\n        via += \" \" + this.options.viaHost + \";branch=\" + branch;\n        if (this.options.forceRport) {\n            via += \";rport\";\n        }\n        this.setHeader(\"via\", via);\n        this.branch = branch;\n    }\n    toString() {\n        let msg = \"\";\n        msg += this.method + \" \" + this.ruri.toRaw() + \" SIP/2.0\\r\\n\";\n        for (const header in this.headers) {\n            if (this.headers[header]) {\n                for (const headerPart of this.headers[header]) {\n                    msg += header + \": \" + headerPart + \"\\r\\n\";\n                }\n            }\n        }\n        for (const header of this.extraHeaders) {\n            msg += header.trim() + \"\\r\\n\";\n        }\n        msg += \"Supported: \" + this.options.optionTags.join(\", \") + \"\\r\\n\";\n        msg += \"User-Agent: \" + this.options.userAgentString + \"\\r\\n\";\n        if (this.body) {\n            if (typeof this.body === \"string\") {\n                msg += \"Content-Length: \" + (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.utf8Length)(this.body) + \"\\r\\n\\r\\n\";\n                msg += this.body;\n            }\n            else {\n                if (this.body.body && this.body.contentType) {\n                    msg += \"Content-Type: \" + this.body.contentType + \"\\r\\n\";\n                    msg += \"Content-Length: \" + (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.utf8Length)(this.body.body) + \"\\r\\n\\r\\n\";\n                    msg += this.body.body;\n                }\n                else {\n                    msg += \"Content-Length: \" + 0 + \"\\r\\n\\r\\n\";\n                }\n            }\n        }\n        else {\n            msg += \"Content-Length: \" + 0 + \"\\r\\n\\r\\n\";\n        }\n        return msg;\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/core/messages/outgoing-request-message.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/core/messages/utils.js":
/*!********************************************************!*\
  !*** ./node_modules/sip.js/lib/core/messages/utils.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createRandomToken: () => (/* binding */ createRandomToken),\n/* harmony export */   getReasonPhrase: () => (/* binding */ getReasonPhrase),\n/* harmony export */   headerize: () => (/* binding */ headerize),\n/* harmony export */   newTag: () => (/* binding */ newTag),\n/* harmony export */   utf8Length: () => (/* binding */ utf8Length)\n/* harmony export */ });\n/**\n * SIP Response Reasons\n * DOC: http://www.iana.org/assignments/sip-parameters\n * @internal\n */\nconst REASON_PHRASE = {\n    100: \"Trying\",\n    180: \"Ringing\",\n    181: \"Call Is Being Forwarded\",\n    182: \"Queued\",\n    183: \"Session Progress\",\n    199: \"Early Dialog Terminated\",\n    200: \"OK\",\n    202: \"Accepted\",\n    204: \"No Notification\",\n    300: \"Multiple Choices\",\n    301: \"Moved Permanently\",\n    302: \"Moved Temporarily\",\n    305: \"Use Proxy\",\n    380: \"Alternative Service\",\n    400: \"Bad Request\",\n    401: \"Unauthorized\",\n    402: \"Payment Required\",\n    403: \"Forbidden\",\n    404: \"Not Found\",\n    405: \"Method Not Allowed\",\n    406: \"Not Acceptable\",\n    407: \"Proxy Authentication Required\",\n    408: \"Request Timeout\",\n    410: \"Gone\",\n    412: \"Conditional Request Failed\",\n    413: \"Request Entity Too Large\",\n    414: \"Request-URI Too Long\",\n    415: \"Unsupported Media Type\",\n    416: \"Unsupported URI Scheme\",\n    417: \"Unknown Resource-Priority\",\n    420: \"Bad Extension\",\n    421: \"Extension Required\",\n    422: \"Session Interval Too Small\",\n    423: \"Interval Too Brief\",\n    428: \"Use Identity Header\",\n    429: \"Provide Referrer Identity\",\n    430: \"Flow Failed\",\n    433: \"Anonymity Disallowed\",\n    436: \"Bad Identity-Info\",\n    437: \"Unsupported Certificate\",\n    438: \"Invalid Identity Header\",\n    439: \"First Hop Lacks Outbound Support\",\n    440: \"Max-Breadth Exceeded\",\n    469: \"Bad Info Package\",\n    470: \"Consent Needed\",\n    478: \"Unresolvable Destination\",\n    480: \"Temporarily Unavailable\",\n    481: \"Call/Transaction Does Not Exist\",\n    482: \"Loop Detected\",\n    483: \"Too Many Hops\",\n    484: \"Address Incomplete\",\n    485: \"Ambiguous\",\n    486: \"Busy Here\",\n    487: \"Request Terminated\",\n    488: \"Not Acceptable Here\",\n    489: \"Bad Event\",\n    491: \"Request Pending\",\n    493: \"Undecipherable\",\n    494: \"Security Agreement Required\",\n    500: \"Internal Server Error\",\n    501: \"Not Implemented\",\n    502: \"Bad Gateway\",\n    503: \"Service Unavailable\",\n    504: \"Server Time-out\",\n    505: \"Version Not Supported\",\n    513: \"Message Too Large\",\n    580: \"Precondition Failure\",\n    600: \"Busy Everywhere\",\n    603: \"Decline\",\n    604: \"Does Not Exist Anywhere\",\n    606: \"Not Acceptable\"\n};\n/**\n * @param size -\n * @param base -\n * @internal\n */\nfunction createRandomToken(size, base = 32) {\n    let token = \"\";\n    for (let i = 0; i < size; i++) {\n        const r = Math.floor(Math.random() * base);\n        token += r.toString(base);\n    }\n    return token;\n}\n/**\n * @internal\n */\nfunction getReasonPhrase(code) {\n    return REASON_PHRASE[code] || \"\";\n}\n/**\n * @internal\n */\nfunction newTag() {\n    return createRandomToken(10);\n}\n/**\n * @param str -\n * @internal\n */\nfunction headerize(str) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const exceptions = {\n        \"Call-Id\": \"Call-ID\",\n        Cseq: \"CSeq\",\n        \"Min-Se\": \"Min-SE\",\n        Rack: \"RAck\",\n        Rseq: \"RSeq\",\n        \"Www-Authenticate\": \"WWW-Authenticate\"\n    };\n    const name = str.toLowerCase().replace(/_/g, \"-\").split(\"-\");\n    const parts = name.length;\n    let hname = \"\";\n    for (let part = 0; part < parts; part++) {\n        if (part !== 0) {\n            hname += \"-\";\n        }\n        hname += name[part].charAt(0).toUpperCase() + name[part].substring(1);\n    }\n    if (exceptions[hname]) {\n        hname = exceptions[hname];\n    }\n    return hname;\n}\n/**\n * @param str -\n * @internal\n */\nfunction utf8Length(str) {\n    return encodeURIComponent(str).replace(/%[A-F\\d]{2}/g, \"U\").length;\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/core/messages/utils.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/core/session/session.js":
/*!*********************************************************!*\
  !*** ./node_modules/sip.js/lib/core/session/session.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SessionState: () => (/* binding */ SessionState),\n/* harmony export */   SignalingState: () => (/* binding */ SignalingState)\n/* harmony export */ });\n/**\n * Session state.\n * @remarks\n * https://tools.ietf.org/html/rfc3261#section-13\n * @public\n */\nvar SessionState;\n(function (SessionState) {\n    SessionState[\"Initial\"] = \"Initial\";\n    SessionState[\"Early\"] = \"Early\";\n    SessionState[\"AckWait\"] = \"AckWait\";\n    SessionState[\"Confirmed\"] = \"Confirmed\";\n    SessionState[\"Terminated\"] = \"Terminated\";\n})(SessionState = SessionState || (SessionState = {}));\n/**\n * Offer/Answer state.\n * @remarks\n * ```txt\n *         Offer                Answer             RFC    Ini Est Early\n *  -------------------------------------------------------------------\n *  1. INVITE Req.          2xx INVITE Resp.     RFC 3261  Y   Y    N\n *  2. 2xx INVITE Resp.     ACK Req.             RFC 3261  Y   Y    N\n *  3. INVITE Req.          1xx-rel INVITE Resp. RFC 3262  Y   Y    N\n *  4. 1xx-rel INVITE Resp. PRACK Req.           RFC 3262  Y   Y    N\n *  5. PRACK Req.           200 PRACK Resp.      RFC 3262  N   Y    Y\n *  6. UPDATE Req.          2xx UPDATE Resp.     RFC 3311  N   Y    Y\n *\n *       Table 1: Summary of SIP Usage of the Offer/Answer Model\n * ```\n * https://tools.ietf.org/html/rfc6337#section-2.2\n * @public\n */\nvar SignalingState;\n(function (SignalingState) {\n    SignalingState[\"Initial\"] = \"Initial\";\n    SignalingState[\"HaveLocalOffer\"] = \"HaveLocalOffer\";\n    SignalingState[\"HaveRemoteOffer\"] = \"HaveRemoteOffer\";\n    SignalingState[\"Stable\"] = \"Stable\";\n    SignalingState[\"Closed\"] = \"Closed\";\n})(SignalingState = SignalingState || (SignalingState = {}));\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/core/session/session.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/core/user-agent-core/allowed-methods.js":
/*!*************************************************************************!*\
  !*** ./node_modules/sip.js/lib/core/user-agent-core/allowed-methods.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AllowedMethods: () => (/* binding */ AllowedMethods)\n/* harmony export */ });\n/* harmony import */ var _messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/methods/constants.js */ \"./node_modules/sip.js/lib/core/messages/methods/constants.js\");\n\n/**\n * FIXME: TODO: Should be configurable/variable.\n */\nconst AllowedMethods = [\n    _messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_0__.C.ACK,\n    _messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_0__.C.BYE,\n    _messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_0__.C.CANCEL,\n    _messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_0__.C.INFO,\n    _messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_0__.C.INVITE,\n    _messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_0__.C.MESSAGE,\n    _messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_0__.C.NOTIFY,\n    _messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_0__.C.OPTIONS,\n    _messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_0__.C.PRACK,\n    _messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_0__.C.REFER,\n    _messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_0__.C.REGISTER,\n    _messages_methods_constants_js__WEBPACK_IMPORTED_MODULE_0__.C.SUBSCRIBE\n];\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/core/user-agent-core/allowed-methods.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/grammar/grammar.js":
/*!****************************************************!*\
  !*** ./node_modules/sip.js/lib/grammar/grammar.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Grammar: () => (/* binding */ Grammar)\n/* harmony export */ });\n/* harmony import */ var _pegjs_dist_grammar_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pegjs/dist/grammar.js */ \"./node_modules/sip.js/lib/grammar/pegjs/dist/grammar.js\");\n/* eslint-disable @typescript-eslint/no-namespace */\n/* eslint-disable no-inner-declarations */\n\n/**\n * Grammar.\n * @internal\n */\nvar Grammar;\n(function (Grammar) {\n    /**\n     * Parse.\n     * @param input -\n     * @param startRule -\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    function parse(input, startRule) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const options = { startRule };\n        try {\n            _pegjs_dist_grammar_js__WEBPACK_IMPORTED_MODULE_0__.parse(input, options);\n        }\n        catch (e) {\n            options.data = -1;\n        }\n        return options.data;\n    }\n    Grammar.parse = parse;\n    /**\n     * Parse the given string and returns a SIP.NameAddrHeader instance or undefined if\n     * it is an invalid NameAddrHeader.\n     * @param name_addr_header -\n     */\n    function nameAddrHeaderParse(nameAddrHeader) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const parsedNameAddrHeader = Grammar.parse(nameAddrHeader, \"Name_Addr_Header\");\n        return parsedNameAddrHeader !== -1 ? parsedNameAddrHeader : undefined;\n    }\n    Grammar.nameAddrHeaderParse = nameAddrHeaderParse;\n    /**\n     * Parse the given string and returns a SIP.URI instance or undefined if\n     * it is an invalid URI.\n     * @param uri -\n     */\n    function URIParse(uri) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const parsedUri = Grammar.parse(uri, \"SIP_URI\");\n        return parsedUri !== -1 ? parsedUri : undefined;\n    }\n    Grammar.URIParse = URIParse;\n})(Grammar = Grammar || (Grammar = {}));\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/grammar/grammar.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/grammar/name-addr-header.js":
/*!*************************************************************!*\
  !*** ./node_modules/sip.js/lib/grammar/name-addr-header.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NameAddrHeader: () => (/* binding */ NameAddrHeader)\n/* harmony export */ });\n/* harmony import */ var _parameters_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parameters.js */ \"./node_modules/sip.js/lib/grammar/parameters.js\");\n\n/**\n * Name Address SIP header.\n * @public\n */\nclass NameAddrHeader extends _parameters_js__WEBPACK_IMPORTED_MODULE_0__.Parameters {\n    /**\n     * Constructor\n     * @param uri -\n     * @param displayName -\n     * @param parameters -\n     */\n    constructor(uri, displayName, parameters) {\n        super(parameters);\n        this.uri = uri;\n        this._displayName = displayName;\n    }\n    get friendlyName() {\n        return this.displayName || this.uri.aor;\n    }\n    get displayName() { return this._displayName; }\n    set displayName(value) {\n        this._displayName = value;\n    }\n    clone() {\n        return new NameAddrHeader(this.uri.clone(), this._displayName, JSON.parse(JSON.stringify(this.parameters)));\n    }\n    toString() {\n        let body = (this.displayName || this.displayName === \"0\") ? '\"' + this.displayName + '\" ' : \"\";\n        body += \"<\" + this.uri.toString() + \">\";\n        for (const parameter in this.parameters) {\n            // eslint-disable-next-line no-prototype-builtins\n            if (this.parameters.hasOwnProperty(parameter)) {\n                body += \";\" + parameter;\n                if (this.parameters[parameter] !== null) {\n                    body += \"=\" + this.parameters[parameter];\n                }\n            }\n        }\n        return body;\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/grammar/name-addr-header.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/grammar/parameters.js":
/*!*******************************************************!*\
  !*** ./node_modules/sip.js/lib/grammar/parameters.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Parameters: () => (/* binding */ Parameters)\n/* harmony export */ });\n/**\n * @internal\n */\nclass Parameters {\n    constructor(parameters) {\n        this.parameters = {};\n        // for in is required here as the Grammar parser is adding to the prototype chain\n        for (const param in parameters) {\n            // eslint-disable-next-line no-prototype-builtins\n            if (parameters.hasOwnProperty(param)) {\n                this.setParam(param, parameters[param]);\n            }\n        }\n    }\n    setParam(key, value) {\n        if (key) {\n            this.parameters[key.toLowerCase()] = (typeof value === \"undefined\" || value === null) ? null : value.toString();\n        }\n    }\n    getParam(key) {\n        if (key) {\n            return this.parameters[key.toLowerCase()];\n        }\n    }\n    hasParam(key) {\n        return !!(key && this.parameters[key.toLowerCase()] !== undefined);\n    }\n    deleteParam(key) {\n        key = key.toLowerCase();\n        if (this.hasParam(key)) {\n            const value = this.parameters[key];\n            delete this.parameters[key];\n            return value;\n        }\n    }\n    clearParams() {\n        this.parameters = {};\n    }\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/grammar/parameters.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/grammar/pegjs/dist/grammar.js":
/*!***************************************************************!*\
  !*** ./node_modules/sip.js/lib/grammar/pegjs/dist/grammar.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SyntaxError: () => (/* binding */ SyntaxError),\n/* harmony export */   parse: () => (/* binding */ parse)\n/* harmony export */ });\n/* harmony import */ var _name_addr_header_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../name-addr-header.js */ \"./node_modules/sip.js/lib/grammar/name-addr-header.js\");\n/* harmony import */ var _uri_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../uri.js */ \"./node_modules/sip.js/lib/grammar/uri.js\");\n\n\nfunction peg$padEnd(str, targetLength, padString) {\n    padString = padString || ' ';\n    if (str.length > targetLength) {\n        return str;\n    }\n    targetLength -= str.length;\n    padString += padString.repeat(targetLength);\n    return str + padString.slice(0, targetLength);\n}\nclass SyntaxError extends Error {\n    constructor(message, expected, found, location) {\n        super();\n        this.message = message;\n        this.expected = expected;\n        this.found = found;\n        this.location = location;\n        this.name = \"SyntaxError\";\n        if (typeof Object.setPrototypeOf === \"function\") {\n            Object.setPrototypeOf(this, SyntaxError.prototype);\n        }\n        else {\n            this.__proto__ = SyntaxError.prototype;\n        }\n        if (typeof Error.captureStackTrace === \"function\") {\n            Error.captureStackTrace(this, SyntaxError);\n        }\n    }\n    static buildMessage(expected, found) {\n        function hex(ch) {\n            return ch.charCodeAt(0).toString(16).toUpperCase();\n        }\n        function literalEscape(s) {\n            return s\n                .replace(/\\\\/g, \"\\\\\\\\\")\n                .replace(/\"/g, \"\\\\\\\"\")\n                .replace(/\\0/g, \"\\\\0\")\n                .replace(/\\t/g, \"\\\\t\")\n                .replace(/\\n/g, \"\\\\n\")\n                .replace(/\\r/g, \"\\\\r\")\n                .replace(/[\\x00-\\x0F]/g, (ch) => \"\\\\x0\" + hex(ch))\n                .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, (ch) => \"\\\\x\" + hex(ch));\n        }\n        function classEscape(s) {\n            return s\n                .replace(/\\\\/g, \"\\\\\\\\\")\n                .replace(/\\]/g, \"\\\\]\")\n                .replace(/\\^/g, \"\\\\^\")\n                .replace(/-/g, \"\\\\-\")\n                .replace(/\\0/g, \"\\\\0\")\n                .replace(/\\t/g, \"\\\\t\")\n                .replace(/\\n/g, \"\\\\n\")\n                .replace(/\\r/g, \"\\\\r\")\n                .replace(/[\\x00-\\x0F]/g, (ch) => \"\\\\x0\" + hex(ch))\n                .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, (ch) => \"\\\\x\" + hex(ch));\n        }\n        function describeExpectation(expectation) {\n            switch (expectation.type) {\n                case \"literal\":\n                    return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n                case \"class\":\n                    const escapedParts = expectation.parts.map((part) => {\n                        return Array.isArray(part)\n                            ? classEscape(part[0]) + \"-\" + classEscape(part[1])\n                            : classEscape(part);\n                    });\n                    return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n                case \"any\":\n                    return \"any character\";\n                case \"end\":\n                    return \"end of input\";\n                case \"other\":\n                    return expectation.description;\n            }\n        }\n        function describeExpected(expected1) {\n            const descriptions = expected1.map(describeExpectation);\n            let i;\n            let j;\n            descriptions.sort();\n            if (descriptions.length > 0) {\n                for (i = 1, j = 1; i < descriptions.length; i++) {\n                    if (descriptions[i - 1] !== descriptions[i]) {\n                        descriptions[j] = descriptions[i];\n                        j++;\n                    }\n                }\n                descriptions.length = j;\n            }\n            switch (descriptions.length) {\n                case 1:\n                    return descriptions[0];\n                case 2:\n                    return descriptions[0] + \" or \" + descriptions[1];\n                default:\n                    return descriptions.slice(0, -1).join(\", \")\n                        + \", or \"\n                        + descriptions[descriptions.length - 1];\n            }\n        }\n        function describeFound(found1) {\n            return found1 ? \"\\\"\" + literalEscape(found1) + \"\\\"\" : \"end of input\";\n        }\n        return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n    }\n    format(sources) {\n        let str = 'Error: ' + this.message;\n        if (this.location) {\n            let src = null;\n            let k;\n            for (k = 0; k < sources.length; k++) {\n                if (sources[k].source === this.location.source) {\n                    src = sources[k].text.split(/\\r\\n|\\n|\\r/g);\n                    break;\n                }\n            }\n            let s = this.location.start;\n            let loc = this.location.source + ':' + s.line + ':' + s.column;\n            if (src) {\n                let e = this.location.end;\n                let filler = peg$padEnd('', s.line.toString().length, ' ');\n                let line = src[s.line - 1];\n                let last = s.line === e.line ? e.column : line.length + 1;\n                str += '\\n --> ' + loc + '\\n' + filler + ' |\\n' + s.line + ' | ' + line + '\\n' + filler + ' | ' +\n                    peg$padEnd('', s.column - 1, ' ') +\n                    peg$padEnd('', last - s.column, '^');\n            }\n            else {\n                str += '\\n at ' + loc;\n            }\n        }\n        return str;\n    }\n}\nfunction peg$parse(input, options) {\n    options = options !== undefined ? options : {};\n    const peg$FAILED = {};\n    const peg$source = options.grammarSource;\n    const peg$startRuleIndices = { Contact: 119, Name_Addr_Header: 156, Record_Route: 176, Request_Response: 81, SIP_URI: 45, Subscription_State: 186, Supported: 191, Require: 182, Via: 194, absoluteURI: 84, Call_ID: 118, Content_Disposition: 130, Content_Length: 135, Content_Type: 136, CSeq: 146, displayName: 122, Event: 149, From: 151, host: 52, Max_Forwards: 154, Min_SE: 213, Proxy_Authenticate: 157, quoted_string: 40, Refer_To: 178, Replaces: 179, Session_Expires: 210, stun_URI: 217, To: 192, turn_URI: 223, uuid: 226, WWW_Authenticate: 209, challenge: 158, sipfrag: 230, Referred_By: 231 };\n    let peg$startRuleIndex = 119;\n    const peg$consts = [\n        \"\\r\\n\",\n        peg$literalExpectation(\"\\r\\n\", false),\n        /^[0-9]/,\n        peg$classExpectation([[\"0\", \"9\"]], false, false),\n        /^[a-zA-Z]/,\n        peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"]], false, false),\n        /^[0-9a-fA-F]/,\n        peg$classExpectation([[\"0\", \"9\"], [\"a\", \"f\"], [\"A\", \"F\"]], false, false),\n        /^[\\0-\\xFF]/,\n        peg$classExpectation([[\"\\0\", \"\\xFF\"]], false, false),\n        /^[\"]/,\n        peg$classExpectation([\"\\\"\"], false, false),\n        \" \",\n        peg$literalExpectation(\" \", false),\n        \"\\t\",\n        peg$literalExpectation(\"\\t\", false),\n        /^[a-zA-Z0-9]/,\n        peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"]], false, false),\n        \";\",\n        peg$literalExpectation(\";\", false),\n        \"/\",\n        peg$literalExpectation(\"/\", false),\n        \"?\",\n        peg$literalExpectation(\"?\", false),\n        \":\",\n        peg$literalExpectation(\":\", false),\n        \"@\",\n        peg$literalExpectation(\"@\", false),\n        \"&\",\n        peg$literalExpectation(\"&\", false),\n        \"=\",\n        peg$literalExpectation(\"=\", false),\n        \"+\",\n        peg$literalExpectation(\"+\", false),\n        \"$\",\n        peg$literalExpectation(\"$\", false),\n        \",\",\n        peg$literalExpectation(\",\", false),\n        \"-\",\n        peg$literalExpectation(\"-\", false),\n        \"_\",\n        peg$literalExpectation(\"_\", false),\n        \".\",\n        peg$literalExpectation(\".\", false),\n        \"!\",\n        peg$literalExpectation(\"!\", false),\n        \"~\",\n        peg$literalExpectation(\"~\", false),\n        \"*\",\n        peg$literalExpectation(\"*\", false),\n        \"'\",\n        peg$literalExpectation(\"'\", false),\n        \"(\",\n        peg$literalExpectation(\"(\", false),\n        \")\",\n        peg$literalExpectation(\")\", false),\n        \"%\",\n        peg$literalExpectation(\"%\", false),\n        function () { return \" \"; },\n        function () { return ':'; },\n        /^[!-~]/,\n        peg$classExpectation([[\"!\", \"~\"]], false, false),\n        /^[\\x80-\\uFFFF]/,\n        peg$classExpectation([[\"\\x80\", \"\\uFFFF\"]], false, false),\n        /^[\\x80-\\xBF]/,\n        peg$classExpectation([[\"\\x80\", \"\\xBF\"]], false, false),\n        /^[a-f]/,\n        peg$classExpectation([[\"a\", \"f\"]], false, false),\n        \"`\",\n        peg$literalExpectation(\"`\", false),\n        \"<\",\n        peg$literalExpectation(\"<\", false),\n        \">\",\n        peg$literalExpectation(\">\", false),\n        \"\\\\\",\n        peg$literalExpectation(\"\\\\\", false),\n        \"[\",\n        peg$literalExpectation(\"[\", false),\n        \"]\",\n        peg$literalExpectation(\"]\", false),\n        \"{\",\n        peg$literalExpectation(\"{\", false),\n        \"}\",\n        peg$literalExpectation(\"}\", false),\n        function () { return \"*\"; },\n        function () { return \"/\"; },\n        function () { return \"=\"; },\n        function () { return \"(\"; },\n        function () { return \")\"; },\n        function () { return \">\"; },\n        function () { return \"<\"; },\n        function () { return \",\"; },\n        function () { return \";\"; },\n        function () { return \":\"; },\n        function () { return \"\\\"\"; },\n        /^[!-']/,\n        peg$classExpectation([[\"!\", \"'\"]], false, false),\n        /^[*-[]/,\n        peg$classExpectation([[\"*\", \"[\"]], false, false),\n        /^[\\]-~]/,\n        peg$classExpectation([[\"]\", \"~\"]], false, false),\n        function (contents) {\n            return contents;\n        },\n        /^[#-[]/,\n        peg$classExpectation([[\"#\", \"[\"]], false, false),\n        /^[\\0-\\t]/,\n        peg$classExpectation([[\"\\0\", \"\\t\"]], false, false),\n        /^[\\v-\\f]/,\n        peg$classExpectation([[\"\\v\", \"\\f\"]], false, false),\n        /^[\\x0E-\\x7F]/,\n        peg$classExpectation([[\"\\x0E\", \"\\x7F\"]], false, false),\n        function () {\n            options = options || { data: {} };\n            options.data.uri = new _uri_js__WEBPACK_IMPORTED_MODULE_0__.URI(options.data.scheme, options.data.user, options.data.host, options.data.port);\n            delete options.data.scheme;\n            delete options.data.user;\n            delete options.data.host;\n            delete options.data.host_type;\n            delete options.data.port;\n        },\n        function () {\n            options = options || { data: {} };\n            options.data.uri = new _uri_js__WEBPACK_IMPORTED_MODULE_0__.URI(options.data.scheme, options.data.user, options.data.host, options.data.port, options.data.uri_params, options.data.uri_headers);\n            delete options.data.scheme;\n            delete options.data.user;\n            delete options.data.host;\n            delete options.data.host_type;\n            delete options.data.port;\n            delete options.data.uri_params;\n            if (options.startRule === 'SIP_URI') {\n                options.data = options.data.uri;\n            }\n        },\n        \"sips\",\n        peg$literalExpectation(\"sips\", true),\n        \"sip\",\n        peg$literalExpectation(\"sip\", true),\n        function (uri_scheme) {\n            options = options || { data: {} };\n            options.data.scheme = uri_scheme;\n        },\n        function () {\n            options = options || { data: {} };\n            options.data.user = decodeURIComponent(text().slice(0, -1));\n        },\n        function () {\n            options = options || { data: {} };\n            options.data.password = text();\n        },\n        function () {\n            options = options || { data: {} };\n            options.data.host = text();\n            return options.data.host;\n        },\n        function () {\n            options = options || { data: {} };\n            options.data.host_type = 'domain';\n            return text();\n        },\n        /^[a-zA-Z0-9_\\-]/,\n        peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \"_\", \"-\"], false, false),\n        /^[a-zA-Z0-9\\-]/,\n        peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \"-\"], false, false),\n        function () {\n            options = options || { data: {} };\n            options.data.host_type = 'IPv6';\n            return text();\n        },\n        \"::\",\n        peg$literalExpectation(\"::\", false),\n        function () {\n            options = options || { data: {} };\n            options.data.host_type = 'IPv6';\n            return text();\n        },\n        function () {\n            options = options || { data: {} };\n            options.data.host_type = 'IPv4';\n            return text();\n        },\n        \"25\",\n        peg$literalExpectation(\"25\", false),\n        /^[0-5]/,\n        peg$classExpectation([[\"0\", \"5\"]], false, false),\n        \"2\",\n        peg$literalExpectation(\"2\", false),\n        /^[0-4]/,\n        peg$classExpectation([[\"0\", \"4\"]], false, false),\n        \"1\",\n        peg$literalExpectation(\"1\", false),\n        /^[1-9]/,\n        peg$classExpectation([[\"1\", \"9\"]], false, false),\n        function (port) {\n            options = options || { data: {} };\n            port = parseInt(port.join(''));\n            options.data.port = port;\n            return port;\n        },\n        \"transport=\",\n        peg$literalExpectation(\"transport=\", true),\n        \"udp\",\n        peg$literalExpectation(\"udp\", true),\n        \"tcp\",\n        peg$literalExpectation(\"tcp\", true),\n        \"sctp\",\n        peg$literalExpectation(\"sctp\", true),\n        \"tls\",\n        peg$literalExpectation(\"tls\", true),\n        function (transport) {\n            options = options || { data: {} };\n            if (!options.data.uri_params)\n                options.data.uri_params = {};\n            options.data.uri_params['transport'] = transport.toLowerCase();\n        },\n        \"user=\",\n        peg$literalExpectation(\"user=\", true),\n        \"phone\",\n        peg$literalExpectation(\"phone\", true),\n        \"ip\",\n        peg$literalExpectation(\"ip\", true),\n        function (user) {\n            options = options || { data: {} };\n            if (!options.data.uri_params)\n                options.data.uri_params = {};\n            options.data.uri_params['user'] = user.toLowerCase();\n        },\n        \"method=\",\n        peg$literalExpectation(\"method=\", true),\n        function (method) {\n            options = options || { data: {} };\n            if (!options.data.uri_params)\n                options.data.uri_params = {};\n            options.data.uri_params['method'] = method;\n        },\n        \"ttl=\",\n        peg$literalExpectation(\"ttl=\", true),\n        function (ttl) {\n            options = options || { data: {} };\n            if (!options.data.params)\n                options.data.params = {};\n            options.data.params['ttl'] = ttl;\n        },\n        \"maddr=\",\n        peg$literalExpectation(\"maddr=\", true),\n        function (maddr) {\n            options = options || { data: {} };\n            if (!options.data.uri_params)\n                options.data.uri_params = {};\n            options.data.uri_params['maddr'] = maddr;\n        },\n        \"lr\",\n        peg$literalExpectation(\"lr\", true),\n        function () {\n            options = options || { data: {} };\n            if (!options.data.uri_params)\n                options.data.uri_params = {};\n            options.data.uri_params['lr'] = undefined;\n        },\n        function (param, value) {\n            options = options || { data: {} };\n            if (!options.data.uri_params)\n                options.data.uri_params = {};\n            if (value === null) {\n                value = undefined;\n            }\n            else {\n                value = value[1];\n            }\n            options.data.uri_params[param.toLowerCase()] = value;\n        },\n        function (hname, hvalue) {\n            hname = hname.join('').toLowerCase();\n            hvalue = hvalue.join('');\n            options = options || { data: {} };\n            if (!options.data.uri_headers)\n                options.data.uri_headers = {};\n            if (!options.data.uri_headers[hname]) {\n                options.data.uri_headers[hname] = [hvalue];\n            }\n            else {\n                options.data.uri_headers[hname].push(hvalue);\n            }\n        },\n        function () {\n            options = options || { data: {} };\n            // lots of tests fail if this isn't guarded...\n            if (options.startRule === 'Refer_To') {\n                options.data.uri = new _uri_js__WEBPACK_IMPORTED_MODULE_0__.URI(options.data.scheme, options.data.user, options.data.host, options.data.port, options.data.uri_params, options.data.uri_headers);\n                delete options.data.scheme;\n                delete options.data.user;\n                delete options.data.host;\n                delete options.data.host_type;\n                delete options.data.port;\n                delete options.data.uri_params;\n            }\n        },\n        \"//\",\n        peg$literalExpectation(\"//\", false),\n        function () {\n            options = options || { data: {} };\n            options.data.scheme = text();\n        },\n        peg$literalExpectation(\"SIP\", true),\n        function () {\n            options = options || { data: {} };\n            options.data.sip_version = text();\n        },\n        \"INVITE\",\n        peg$literalExpectation(\"INVITE\", false),\n        \"ACK\",\n        peg$literalExpectation(\"ACK\", false),\n        \"VXACH\",\n        peg$literalExpectation(\"VXACH\", false),\n        \"OPTIONS\",\n        peg$literalExpectation(\"OPTIONS\", false),\n        \"BYE\",\n        peg$literalExpectation(\"BYE\", false),\n        \"CANCEL\",\n        peg$literalExpectation(\"CANCEL\", false),\n        \"REGISTER\",\n        peg$literalExpectation(\"REGISTER\", false),\n        \"SUBSCRIBE\",\n        peg$literalExpectation(\"SUBSCRIBE\", false),\n        \"NOTIFY\",\n        peg$literalExpectation(\"NOTIFY\", false),\n        \"REFER\",\n        peg$literalExpectation(\"REFER\", false),\n        \"PUBLISH\",\n        peg$literalExpectation(\"PUBLISH\", false),\n        function () {\n            options = options || { data: {} };\n            options.data.method = text();\n            return options.data.method;\n        },\n        function (status_code) {\n            options = options || { data: {} };\n            options.data.status_code = parseInt(status_code.join(''));\n        },\n        function () {\n            options = options || { data: {} };\n            options.data.reason_phrase = text();\n        },\n        function () {\n            options = options || { data: {} };\n            options.data = text();\n        },\n        function () {\n            var idx, length;\n            options = options || { data: {} };\n            length = options.data.multi_header.length;\n            for (idx = 0; idx < length; idx++) {\n                if (options.data.multi_header[idx].parsed === null) {\n                    options.data = null;\n                    break;\n                }\n            }\n            if (options.data !== null) {\n                options.data = options.data.multi_header;\n            }\n            else {\n                options.data = -1;\n            }\n        },\n        function () {\n            var header;\n            options = options || { data: {} };\n            if (!options.data.multi_header)\n                options.data.multi_header = [];\n            try {\n                header = new _name_addr_header_js__WEBPACK_IMPORTED_MODULE_1__.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                delete options.data.uri;\n                delete options.data.displayName;\n                delete options.data.params;\n            }\n            catch (e) {\n                header = null;\n            }\n            options.data.multi_header.push({ 'position': peg$currPos,\n                'offset': location().start.offset,\n                'parsed': header\n            });\n        },\n        function (displayName) {\n            displayName = text().trim();\n            if (displayName[0] === '\\\"') {\n                displayName = displayName.substring(1, displayName.length - 1);\n            }\n            options = options || { data: {} };\n            options.data.displayName = displayName;\n        },\n        \"q\",\n        peg$literalExpectation(\"q\", true),\n        function (q) {\n            options = options || { data: {} };\n            if (!options.data.params)\n                options.data.params = {};\n            options.data.params['q'] = q;\n        },\n        \"expires\",\n        peg$literalExpectation(\"expires\", true),\n        function (expires) {\n            options = options || { data: {} };\n            if (!options.data.params)\n                options.data.params = {};\n            options.data.params['expires'] = expires;\n        },\n        function (delta_seconds) {\n            return parseInt(delta_seconds.join(''));\n        },\n        \"0\",\n        peg$literalExpectation(\"0\", false),\n        function () {\n            return parseFloat(text());\n        },\n        function (param, value) {\n            options = options || { data: {} };\n            if (!options.data.params)\n                options.data.params = {};\n            if (value === null) {\n                value = undefined;\n            }\n            else {\n                value = value[1];\n            }\n            options.data.params[param.toLowerCase()] = value;\n        },\n        \"render\",\n        peg$literalExpectation(\"render\", true),\n        \"session\",\n        peg$literalExpectation(\"session\", true),\n        \"icon\",\n        peg$literalExpectation(\"icon\", true),\n        \"alert\",\n        peg$literalExpectation(\"alert\", true),\n        function () {\n            options = options || { data: {} };\n            if (options.startRule === 'Content_Disposition') {\n                options.data.type = text().toLowerCase();\n            }\n        },\n        \"handling\",\n        peg$literalExpectation(\"handling\", true),\n        \"optional\",\n        peg$literalExpectation(\"optional\", true),\n        \"required\",\n        peg$literalExpectation(\"required\", true),\n        function (length) {\n            options = options || { data: {} };\n            options.data = parseInt(length.join(''));\n        },\n        function () {\n            options = options || { data: {} };\n            options.data = text();\n        },\n        \"text\",\n        peg$literalExpectation(\"text\", true),\n        \"image\",\n        peg$literalExpectation(\"image\", true),\n        \"audio\",\n        peg$literalExpectation(\"audio\", true),\n        \"video\",\n        peg$literalExpectation(\"video\", true),\n        \"application\",\n        peg$literalExpectation(\"application\", true),\n        \"message\",\n        peg$literalExpectation(\"message\", true),\n        \"multipart\",\n        peg$literalExpectation(\"multipart\", true),\n        \"x-\",\n        peg$literalExpectation(\"x-\", true),\n        function (cseq_value) {\n            options = options || { data: {} };\n            options.data.value = parseInt(cseq_value.join(''));\n        },\n        function (expires) { options = options || { data: {} }; options.data = expires; },\n        function (event_type) {\n            options = options || { data: {} };\n            options.data.event = event_type.toLowerCase();\n        },\n        function () {\n            options = options || { data: {} };\n            var tag = options.data.tag;\n            options.data = new _name_addr_header_js__WEBPACK_IMPORTED_MODULE_1__.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n            if (tag) {\n                options.data.setParam('tag', tag);\n            }\n        },\n        \"tag\",\n        peg$literalExpectation(\"tag\", true),\n        function (tag) { options = options || { data: {} }; options.data.tag = tag; },\n        function (forwards) {\n            options = options || { data: {} };\n            options.data = parseInt(forwards.join(''));\n        },\n        function (min_expires) { options = options || { data: {} }; options.data = min_expires; },\n        function () {\n            options = options || { data: {} };\n            options.data = new _name_addr_header_js__WEBPACK_IMPORTED_MODULE_1__.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n        },\n        \"digest\",\n        peg$literalExpectation(\"Digest\", true),\n        \"realm\",\n        peg$literalExpectation(\"realm\", true),\n        function (realm) { options = options || { data: {} }; options.data.realm = realm; },\n        \"domain\",\n        peg$literalExpectation(\"domain\", true),\n        \"nonce\",\n        peg$literalExpectation(\"nonce\", true),\n        function (nonce) { options = options || { data: {} }; options.data.nonce = nonce; },\n        \"opaque\",\n        peg$literalExpectation(\"opaque\", true),\n        function (opaque) { options = options || { data: {} }; options.data.opaque = opaque; },\n        \"stale\",\n        peg$literalExpectation(\"stale\", true),\n        \"true\",\n        peg$literalExpectation(\"true\", true),\n        function () { options = options || { data: {} }; options.data.stale = true; },\n        \"false\",\n        peg$literalExpectation(\"false\", true),\n        function () { options = options || { data: {} }; options.data.stale = false; },\n        \"algorithm\",\n        peg$literalExpectation(\"algorithm\", true),\n        \"md5\",\n        peg$literalExpectation(\"MD5\", true),\n        \"md5-sess\",\n        peg$literalExpectation(\"MD5-sess\", true),\n        function (algorithm) {\n            options = options || { data: {} };\n            options.data.algorithm = algorithm.toUpperCase();\n        },\n        \"qop\",\n        peg$literalExpectation(\"qop\", true),\n        \"auth-int\",\n        peg$literalExpectation(\"auth-int\", true),\n        \"auth\",\n        peg$literalExpectation(\"auth\", true),\n        function (qop_value) {\n            options = options || { data: {} };\n            options.data.qop || (options.data.qop = []);\n            options.data.qop.push(qop_value.toLowerCase());\n        },\n        function (rack_value) {\n            options = options || { data: {} };\n            options.data.value = parseInt(rack_value.join(''));\n        },\n        function () {\n            var idx, length;\n            options = options || { data: {} };\n            length = options.data.multi_header.length;\n            for (idx = 0; idx < length; idx++) {\n                if (options.data.multi_header[idx].parsed === null) {\n                    options.data = null;\n                    break;\n                }\n            }\n            if (options.data !== null) {\n                options.data = options.data.multi_header;\n            }\n            else {\n                options.data = -1;\n            }\n        },\n        function () {\n            var header;\n            options = options || { data: {} };\n            if (!options.data.multi_header)\n                options.data.multi_header = [];\n            try {\n                header = new _name_addr_header_js__WEBPACK_IMPORTED_MODULE_1__.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                delete options.data.uri;\n                delete options.data.displayName;\n                delete options.data.params;\n            }\n            catch (e) {\n                header = null;\n            }\n            options.data.multi_header.push({ 'position': peg$currPos,\n                'offset': location().start.offset,\n                'parsed': header\n            });\n        },\n        function () {\n            options = options || { data: {} };\n            options.data = new _name_addr_header_js__WEBPACK_IMPORTED_MODULE_1__.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n        },\n        function () {\n            options = options || { data: {} };\n            if (!(options.data.replaces_from_tag && options.data.replaces_to_tag)) {\n                options.data = -1;\n            }\n        },\n        function () {\n            options = options || { data: {} };\n            options.data = {\n                call_id: options.data\n            };\n        },\n        \"from-tag\",\n        peg$literalExpectation(\"from-tag\", true),\n        function (from_tag) {\n            options = options || { data: {} };\n            options.data.replaces_from_tag = from_tag;\n        },\n        \"to-tag\",\n        peg$literalExpectation(\"to-tag\", true),\n        function (to_tag) {\n            options = options || { data: {} };\n            options.data.replaces_to_tag = to_tag;\n        },\n        \"early-only\",\n        peg$literalExpectation(\"early-only\", true),\n        function () {\n            options = options || { data: {} };\n            options.data.early_only = true;\n        },\n        function (head, r) { return r; },\n        function (head, tail) { return list(head, tail); },\n        function (value) {\n            options = options || { data: {} };\n            if (options.startRule === 'Require') {\n                options.data = value || [];\n            }\n        },\n        function (rseq_value) {\n            options = options || { data: {} };\n            options.data.value = parseInt(rseq_value.join(''));\n        },\n        \"active\",\n        peg$literalExpectation(\"active\", true),\n        \"pending\",\n        peg$literalExpectation(\"pending\", true),\n        \"terminated\",\n        peg$literalExpectation(\"terminated\", true),\n        function () {\n            options = options || { data: {} };\n            options.data.state = text();\n        },\n        \"reason\",\n        peg$literalExpectation(\"reason\", true),\n        function (reason) {\n            options = options || { data: {} };\n            if (typeof reason !== 'undefined')\n                options.data.reason = reason;\n        },\n        function (expires) {\n            options = options || { data: {} };\n            if (typeof expires !== 'undefined')\n                options.data.expires = expires;\n        },\n        \"retry_after\",\n        peg$literalExpectation(\"retry_after\", true),\n        function (retry_after) {\n            options = options || { data: {} };\n            if (typeof retry_after !== 'undefined')\n                options.data.retry_after = retry_after;\n        },\n        \"deactivated\",\n        peg$literalExpectation(\"deactivated\", true),\n        \"probation\",\n        peg$literalExpectation(\"probation\", true),\n        \"rejected\",\n        peg$literalExpectation(\"rejected\", true),\n        \"timeout\",\n        peg$literalExpectation(\"timeout\", true),\n        \"giveup\",\n        peg$literalExpectation(\"giveup\", true),\n        \"noresource\",\n        peg$literalExpectation(\"noresource\", true),\n        \"invariant\",\n        peg$literalExpectation(\"invariant\", true),\n        function (value) {\n            options = options || { data: {} };\n            if (options.startRule === 'Supported') {\n                options.data = value || [];\n            }\n        },\n        function () {\n            options = options || { data: {} };\n            var tag = options.data.tag;\n            options.data = new _name_addr_header_js__WEBPACK_IMPORTED_MODULE_1__.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n            if (tag) {\n                options.data.setParam('tag', tag);\n            }\n        },\n        \"ttl\",\n        peg$literalExpectation(\"ttl\", true),\n        function (via_ttl_value) {\n            options = options || { data: {} };\n            options.data.ttl = via_ttl_value;\n        },\n        \"maddr\",\n        peg$literalExpectation(\"maddr\", true),\n        function (via_maddr) {\n            options = options || { data: {} };\n            options.data.maddr = via_maddr;\n        },\n        \"received\",\n        peg$literalExpectation(\"received\", true),\n        function (via_received) {\n            options = options || { data: {} };\n            options.data.received = via_received;\n        },\n        \"branch\",\n        peg$literalExpectation(\"branch\", true),\n        function (via_branch) {\n            options = options || { data: {} };\n            options.data.branch = via_branch;\n        },\n        \"rport\",\n        peg$literalExpectation(\"rport\", true),\n        function (response_port) {\n            options = options || { data: {} };\n            if (typeof response_port !== 'undefined')\n                options.data.rport = response_port.join('');\n        },\n        function (via_protocol) {\n            options = options || { data: {} };\n            options.data.protocol = via_protocol;\n        },\n        peg$literalExpectation(\"UDP\", true),\n        peg$literalExpectation(\"TCP\", true),\n        peg$literalExpectation(\"TLS\", true),\n        peg$literalExpectation(\"SCTP\", true),\n        function (via_transport) {\n            options = options || { data: {} };\n            options.data.transport = via_transport;\n        },\n        function () {\n            options = options || { data: {} };\n            options.data.host = text();\n        },\n        function (via_sent_by_port) {\n            options = options || { data: {} };\n            options.data.port = parseInt(via_sent_by_port.join(''));\n        },\n        function (ttl) {\n            return parseInt(ttl.join(''));\n        },\n        function (deltaSeconds) {\n            options = options || { data: {} };\n            if (options.startRule === 'Session_Expires') {\n                options.data.deltaSeconds = deltaSeconds;\n            }\n        },\n        \"refresher\",\n        peg$literalExpectation(\"refresher\", false),\n        \"uas\",\n        peg$literalExpectation(\"uas\", false),\n        \"uac\",\n        peg$literalExpectation(\"uac\", false),\n        function (endpoint) {\n            options = options || { data: {} };\n            if (options.startRule === 'Session_Expires') {\n                options.data.refresher = endpoint;\n            }\n        },\n        function (deltaSeconds) {\n            options = options || { data: {} };\n            if (options.startRule === 'Min_SE') {\n                options.data = deltaSeconds;\n            }\n        },\n        \"stuns\",\n        peg$literalExpectation(\"stuns\", true),\n        \"stun\",\n        peg$literalExpectation(\"stun\", true),\n        function (scheme) {\n            options = options || { data: {} };\n            options.data.scheme = scheme;\n        },\n        function (host) {\n            options = options || { data: {} };\n            options.data.host = host;\n        },\n        \"?transport=\",\n        peg$literalExpectation(\"?transport=\", false),\n        \"turns\",\n        peg$literalExpectation(\"turns\", true),\n        \"turn\",\n        peg$literalExpectation(\"turn\", true),\n        function (transport) {\n            options = options || { data: {} };\n            options.data.transport = transport;\n        },\n        function () {\n            options = options || { data: {} };\n            options.data = text();\n        },\n        \"Referred-By\",\n        peg$literalExpectation(\"Referred-By\", false),\n        \"b\",\n        peg$literalExpectation(\"b\", false),\n        \"cid\",\n        peg$literalExpectation(\"cid\", false)\n    ];\n    const peg$bytecode = [\n        peg$decode(\"2 \\\"\\\"6 7!\"),\n        peg$decode(\"4\\\"\\\"\\\"5!7#\"),\n        peg$decode(\"4$\\\"\\\"5!7%\"),\n        peg$decode(\"4&\\\"\\\"5!7'\"),\n        peg$decode(\";'.# &;(\"),\n        peg$decode(\"4(\\\"\\\"5!7)\"),\n        peg$decode(\"4*\\\"\\\"5!7+\"),\n        peg$decode(\"2,\\\"\\\"6,7-\"),\n        peg$decode(\"2.\\\"\\\"6.7/\"),\n        peg$decode(\"40\\\"\\\"5!71\"),\n        peg$decode(\"22\\\"\\\"6273.\\x89 &24\\\"\\\"6475.} &26\\\"\\\"6677.q &28\\\"\\\"6879.e &2:\\\"\\\"6:7;.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E\"),\n        peg$decode(\";).# &;,\"),\n        peg$decode(\"2F\\\"\\\"6F7G.} &2H\\\"\\\"6H7I.q &2J\\\"\\\"6J7K.e &2L\\\"\\\"6L7M.Y &2N\\\"\\\"6N7O.M &2P\\\"\\\"6P7Q.A &2R\\\"\\\"6R7S.5 &2T\\\"\\\"6T7U.) &2V\\\"\\\"6V7W\"),\n        peg$decode(\"%%2X\\\"\\\"6X7Y/5#;#/,$;#/#$+#)(#'#(\\\"'#&'#/\\\"!&,)\"),\n        peg$decode(\"%%$;$0#*;$&/,#; /#$+\\\")(\\\"'#&'#.\\\" &\\\"/=#$;$/&#0#*;$&&&#/'$8\\\":Z\\\" )(\\\"'#&'#\"),\n        peg$decode(\";..\\\" &\\\"\"),\n        peg$decode(\"%$;'.# &;(0)*;'.# &;(&/?#28\\\"\\\"6879/0$;//'$8#:[# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%%$;2/&#0#*;2&&&#/g#$%$;.0#*;.&/,#;2/#$+\\\")(\\\"'#&'#0=*%$;.0#*;.&/,#;2/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#/\\\"!&,)\"),\n        peg$decode(\"4\\\\\\\"\\\"5!7].# &;3\"),\n        peg$decode(\"4^\\\"\\\"5!7_\"),\n        peg$decode(\"4`\\\"\\\"5!7a\"),\n        peg$decode(\";!.) &4b\\\"\\\"5!7c\"),\n        peg$decode(\"%$;).\\x95 &2F\\\"\\\"6F7G.\\x89 &2J\\\"\\\"6J7K.} &2L\\\"\\\"6L7M.q &2X\\\"\\\"6X7Y.e &2P\\\"\\\"6P7Q.Y &2H\\\"\\\"6H7I.M &2@\\\"\\\"6@7A.A &2d\\\"\\\"6d7e.5 &2R\\\"\\\"6R7S.) &2N\\\"\\\"6N7O/\\x9E#0\\x9B*;).\\x95 &2F\\\"\\\"6F7G.\\x89 &2J\\\"\\\"6J7K.} &2L\\\"\\\"6L7M.q &2X\\\"\\\"6X7Y.e &2P\\\"\\\"6P7Q.Y &2H\\\"\\\"6H7I.M &2@\\\"\\\"6@7A.A &2d\\\"\\\"6d7e.5 &2R\\\"\\\"6R7S.) &2N\\\"\\\"6N7O&&&#/\\\"!&,)\"),\n        peg$decode(\"%$;).\\x89 &2F\\\"\\\"6F7G.} &2L\\\"\\\"6L7M.q &2X\\\"\\\"6X7Y.e &2P\\\"\\\"6P7Q.Y &2H\\\"\\\"6H7I.M &2@\\\"\\\"6@7A.A &2d\\\"\\\"6d7e.5 &2R\\\"\\\"6R7S.) &2N\\\"\\\"6N7O/\\x92#0\\x8F*;).\\x89 &2F\\\"\\\"6F7G.} &2L\\\"\\\"6L7M.q &2X\\\"\\\"6X7Y.e &2P\\\"\\\"6P7Q.Y &2H\\\"\\\"6H7I.M &2@\\\"\\\"6@7A.A &2d\\\"\\\"6d7e.5 &2R\\\"\\\"6R7S.) &2N\\\"\\\"6N7O&&&#/\\\"!&,)\"),\n        peg$decode(\"2T\\\"\\\"6T7U.\\xE3 &2V\\\"\\\"6V7W.\\xD7 &2f\\\"\\\"6f7g.\\xCB &2h\\\"\\\"6h7i.\\xBF &2:\\\"\\\"6:7;.\\xB3 &2D\\\"\\\"6D7E.\\xA7 &22\\\"\\\"6273.\\x9B &28\\\"\\\"6879.\\x8F &2j\\\"\\\"6j7k.\\x83 &;&.} &24\\\"\\\"6475.q &2l\\\"\\\"6l7m.e &2n\\\"\\\"6n7o.Y &26\\\"\\\"6677.M &2>\\\"\\\"6>7?.A &2p\\\"\\\"6p7q.5 &2r\\\"\\\"6r7s.) &;'.# &;(\"),\n        peg$decode(\"%$;).\\u012B &2F\\\"\\\"6F7G.\\u011F &2J\\\"\\\"6J7K.\\u0113 &2L\\\"\\\"6L7M.\\u0107 &2X\\\"\\\"6X7Y.\\xFB &2P\\\"\\\"6P7Q.\\xEF &2H\\\"\\\"6H7I.\\xE3 &2@\\\"\\\"6@7A.\\xD7 &2d\\\"\\\"6d7e.\\xCB &2R\\\"\\\"6R7S.\\xBF &2N\\\"\\\"6N7O.\\xB3 &2T\\\"\\\"6T7U.\\xA7 &2V\\\"\\\"6V7W.\\x9B &2f\\\"\\\"6f7g.\\x8F &2h\\\"\\\"6h7i.\\x83 &28\\\"\\\"6879.w &2j\\\"\\\"6j7k.k &;&.e &24\\\"\\\"6475.Y &2l\\\"\\\"6l7m.M &2n\\\"\\\"6n7o.A &26\\\"\\\"6677.5 &2p\\\"\\\"6p7q.) &2r\\\"\\\"6r7s/\\u0134#0\\u0131*;).\\u012B &2F\\\"\\\"6F7G.\\u011F &2J\\\"\\\"6J7K.\\u0113 &2L\\\"\\\"6L7M.\\u0107 &2X\\\"\\\"6X7Y.\\xFB &2P\\\"\\\"6P7Q.\\xEF &2H\\\"\\\"6H7I.\\xE3 &2@\\\"\\\"6@7A.\\xD7 &2d\\\"\\\"6d7e.\\xCB &2R\\\"\\\"6R7S.\\xBF &2N\\\"\\\"6N7O.\\xB3 &2T\\\"\\\"6T7U.\\xA7 &2V\\\"\\\"6V7W.\\x9B &2f\\\"\\\"6f7g.\\x8F &2h\\\"\\\"6h7i.\\x83 &28\\\"\\\"6879.w &2j\\\"\\\"6j7k.k &;&.e &24\\\"\\\"6475.Y &2l\\\"\\\"6l7m.M &2n\\\"\\\"6n7o.A &26\\\"\\\"6677.5 &2p\\\"\\\"6p7q.) &2r\\\"\\\"6r7s&&&#/\\\"!&,)\"),\n        peg$decode(\"%;//?#2P\\\"\\\"6P7Q/0$;//'$8#:t# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#24\\\"\\\"6475/0$;//'$8#:u# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#2>\\\"\\\"6>7?/0$;//'$8#:v# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#2T\\\"\\\"6T7U/0$;//'$8#:w# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#2V\\\"\\\"6V7W/0$;//'$8#:x# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%2h\\\"\\\"6h7i/0#;//'$8\\\":y\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;//6#2f\\\"\\\"6f7g/'$8\\\":z\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;//?#2D\\\"\\\"6D7E/0$;//'$8#:{# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#22\\\"\\\"6273/0$;//'$8#:|# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//?#28\\\"\\\"6879/0$;//'$8#:}# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;//0#;&/'$8\\\":~\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;&/0#;//'$8\\\":~\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;=/T#$;G.) &;K.# &;F0/*;G.) &;K.# &;F&/,$;>/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"4\\x7F\\\"\\\"5!7\\x80.A &4\\x81\\\"\\\"5!7\\x82.5 &4\\x83\\\"\\\"5!7\\x84.) &;3.# &;.\"),\n        peg$decode(\"%%;//Q#;&/H$$;J.# &;K0)*;J.# &;K&/,$;&/#$+$)($'#(#'#(\\\"'#&'#/\\\"!&,)\"),\n        peg$decode(\"%;//]#;&/T$%$;J.# &;K0)*;J.# &;K&/\\\"!&,)/1$;&/($8$:\\x85$!!)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";..G &2L\\\"\\\"6L7M.; &4\\x86\\\"\\\"5!7\\x87./ &4\\x83\\\"\\\"5!7\\x84.# &;3\"),\n        peg$decode(\"%2j\\\"\\\"6j7k/J#4\\x88\\\"\\\"5!7\\x89.5 &4\\x8A\\\"\\\"5!7\\x8B.) &4\\x8C\\\"\\\"5!7\\x8D/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;N/M#28\\\"\\\"6879/>$;O.\\\" &\\\"/0$;S/'$8$:\\x8E$ )($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;N/d#28\\\"\\\"6879/U$;O.\\\" &\\\"/G$;S/>$;_/5$;l.\\\" &\\\"/'$8&:\\x8F& )(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\x90\\\"\\\"5$7\\x91.) &3\\x92\\\"\\\"5#7\\x93/' 8!:\\x94!! )\"),\n        peg$decode(\"%;P/]#%28\\\"\\\"6879/,#;R/#$+\\\")(\\\"'#&'#.\\\" &\\\"/6$2:\\\"\\\"6:7;/'$8#:\\x95# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"$;+.) &;-.# &;Q/2#0/*;+.) &;-.# &;Q&&&#\"),\n        peg$decode(\"2<\\\"\\\"6<7=.q &2>\\\"\\\"6>7?.e &2@\\\"\\\"6@7A.Y &2B\\\"\\\"6B7C.M &2D\\\"\\\"6D7E.A &22\\\"\\\"6273.5 &26\\\"\\\"6677.) &24\\\"\\\"6475\"),\n        peg$decode(\"%$;+._ &;-.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E0e*;+._ &;-.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E&/& 8!:\\x96! )\"),\n        peg$decode(\"%;T/J#%28\\\"\\\"6879/,#;^/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;U.) &;\\\\.# &;X/& 8!:\\x97! )\"),\n        peg$decode(\"%$%;V/2#2J\\\"\\\"6J7K/#$+\\\")(\\\"'#&'#0<*%;V/2#2J\\\"\\\"6J7K/#$+\\\")(\\\"'#&'#&/D#;W/;$2J\\\"\\\"6J7K.\\\" &\\\"/'$8#:\\x98# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"$4\\x99\\\"\\\"5!7\\x9A/,#0)*4\\x99\\\"\\\"5!7\\x9A&&&#\"),\n        peg$decode(\"%4$\\\"\\\"5!7%/?#$4\\x9B\\\"\\\"5!7\\x9C0)*4\\x9B\\\"\\\"5!7\\x9C&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%2l\\\"\\\"6l7m/?#;Y/6$2n\\\"\\\"6n7o/'$8#:\\x9D# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%%;Z/\\xB3#28\\\"\\\"6879/\\xA4$;Z/\\x9B$28\\\"\\\"6879/\\x8C$;Z/\\x83$28\\\"\\\"6879/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+-)(-'#(,'#(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0790 &%2\\x9E\\\"\\\"6\\x9E7\\x9F/\\xA4#;Z/\\x9B$28\\\"\\\"6879/\\x8C$;Z/\\x83$28\\\"\\\"6879/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+,)(,'#(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u06F9 &%2\\x9E\\\"\\\"6\\x9E7\\x9F/\\x8C#;Z/\\x83$28\\\"\\\"6879/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+*)(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u067A &%2\\x9E\\\"\\\"6\\x9E7\\x9F/t#;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+()(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0613 &%2\\x9E\\\"\\\"6\\x9E7\\x9F/\\\\#;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+&)(&'#(%'#($'#(#'#(\\\"'#&'#.\\u05C4 &%2\\x9E\\\"\\\"6\\x9E7\\x9F/D#;Z/;$28\\\"\\\"6879/,$;[/#$+$)($'#(#'#(\\\"'#&'#.\\u058D &%2\\x9E\\\"\\\"6\\x9E7\\x9F/,#;[/#$+\\\")(\\\"'#&'#.\\u056E &%2\\x9E\\\"\\\"6\\x9E7\\x9F/,#;Z/#$+\\\")(\\\"'#&'#.\\u054F &%;Z/\\x9B#2\\x9E\\\"\\\"6\\x9E7\\x9F/\\x8C$;Z/\\x83$28\\\"\\\"6879/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$++)(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u04C7 &%;Z/\\xAA#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x83$2\\x9E\\\"\\\"6\\x9E7\\x9F/t$;Z/k$28\\\"\\\"6879/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+*)(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0430 &%;Z/\\xB9#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x92$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/k$2\\x9E\\\"\\\"6\\x9E7\\x9F/\\\\$;Z/S$28\\\"\\\"6879/D$;Z/;$28\\\"\\\"6879/,$;[/#$+))()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u038A &%;Z/\\xC8#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xA1$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/z$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/S$2\\x9E\\\"\\\"6\\x9E7\\x9F/D$;Z/;$28\\\"\\\"6879/,$;[/#$+()(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u02D5 &%;Z/\\xD7#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xB0$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x89$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/b$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/;$2\\x9E\\\"\\\"6\\x9E7\\x9F/,$;[/#$+')(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0211 &%;Z/\\xFE#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xD7$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xB0$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x89$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/b$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/;$2\\x9E\\\"\\\"6\\x9E7\\x9F/,$;Z/#$+()(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#.\\u0126 &%;Z/\\u011C#%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xF5$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xCE$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\xA7$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/\\x80$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/Y$%28\\\"\\\"6879/,#;Z/#$+\\\")(\\\"'#&'#.\\\" &\\\"/2$2\\x9E\\\"\\\"6\\x9E7\\x9F/#$+()(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#/& 8!:\\xA0! )\"),\n        peg$decode(\"%;#/M#;#.\\\" &\\\"/?$;#.\\\" &\\\"/1$;#.\\\" &\\\"/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;Z/;#28\\\"\\\"6879/,$;Z/#$+#)(#'#(\\\"'#&'#.# &;\\\\\"),\n        peg$decode(\"%;]/o#2J\\\"\\\"6J7K/`$;]/W$2J\\\"\\\"6J7K/H$;]/?$2J\\\"\\\"6J7K/0$;]/'$8':\\xA1' )(''#(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%2\\xA2\\\"\\\"6\\xA27\\xA3/2#4\\xA4\\\"\\\"5!7\\xA5/#$+\\\")(\\\"'#&'#.\\x98 &%2\\xA6\\\"\\\"6\\xA67\\xA7/;#4\\xA8\\\"\\\"5!7\\xA9/,$;!/#$+#)(#'#(\\\"'#&'#.j &%2\\xAA\\\"\\\"6\\xAA7\\xAB/5#;!/,$;!/#$+#)(#'#(\\\"'#&'#.B &%4\\xAC\\\"\\\"5!7\\xAD/,#;!/#$+\\\")(\\\"'#&'#.# &;!\"),\n        peg$decode(\"%%;!.\\\" &\\\"/[#;!.\\\" &\\\"/M$;!.\\\" &\\\"/?$;!.\\\" &\\\"/1$;!.\\\" &\\\"/#$+%)(%'#($'#(#'#(\\\"'#&'#/' 8!:\\xAE!! )\"),\n        peg$decode(\"$%22\\\"\\\"6273/,#;`/#$+\\\")(\\\"'#&'#0<*%22\\\"\\\"6273/,#;`/#$+\\\")(\\\"'#&'#&\"),\n        peg$decode(\";a.A &;b.; &;c.5 &;d./ &;e.) &;f.# &;g\"),\n        peg$decode(\"%3\\xAF\\\"\\\"5*7\\xB0/a#3\\xB1\\\"\\\"5#7\\xB2.G &3\\xB3\\\"\\\"5#7\\xB4.; &3\\xB5\\\"\\\"5$7\\xB6./ &3\\xB7\\\"\\\"5#7\\xB8.# &;6/($8\\\":\\xB9\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xBA\\\"\\\"5%7\\xBB/I#3\\xBC\\\"\\\"5%7\\xBD./ &3\\xBE\\\"\\\"5\\\"7\\xBF.# &;6/($8\\\":\\xC0\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xC1\\\"\\\"5'7\\xC2/1#;\\x90/($8\\\":\\xC3\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xC4\\\"\\\"5$7\\xC5/1#;\\xF0/($8\\\":\\xC6\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xC7\\\"\\\"5&7\\xC8/1#;T/($8\\\":\\xC9\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%3\\xCA\\\"\\\"5\\\"7\\xCB/N#%2>\\\"\\\"6>7?/,#;6/#$+\\\")(\\\"'#&'#.\\\" &\\\"/'$8\\\":\\xCC\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;h/P#%2>\\\"\\\"6>7?/,#;i/#$+\\\")(\\\"'#&'#.\\\" &\\\"/)$8\\\":\\xCD\\\"\\\"! )(\\\"'#&'#\"),\n        peg$decode(\"%$;j/&#0#*;j&&&#/\\\"!&,)\"),\n        peg$decode(\"%$;j/&#0#*;j&&&#/\\\"!&,)\"),\n        peg$decode(\";k.) &;+.# &;-\"),\n        peg$decode(\"2l\\\"\\\"6l7m.e &2n\\\"\\\"6n7o.Y &24\\\"\\\"6475.M &28\\\"\\\"6879.A &2<\\\"\\\"6<7=.5 &2@\\\"\\\"6@7A.) &2B\\\"\\\"6B7C\"),\n        peg$decode(\"%26\\\"\\\"6677/n#;m/e$$%2<\\\"\\\"6<7=/,#;m/#$+\\\")(\\\"'#&'#0<*%2<\\\"\\\"6<7=/,#;m/#$+\\\")(\\\"'#&'#&/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;n/A#2>\\\"\\\"6>7?/2$;o/)$8#:\\xCE#\\\"\\\" )(#'#(\\\"'#&'#\"),\n        peg$decode(\"$;p.) &;+.# &;-/2#0/*;p.) &;+.# &;-&&&#\"),\n        peg$decode(\"$;p.) &;+.# &;-0/*;p.) &;+.# &;-&\"),\n        peg$decode(\"2l\\\"\\\"6l7m.e &2n\\\"\\\"6n7o.Y &24\\\"\\\"6475.M &26\\\"\\\"6677.A &28\\\"\\\"6879.5 &2@\\\"\\\"6@7A.) &2B\\\"\\\"6B7C\"),\n        peg$decode(\";\\x91.# &;r\"),\n        peg$decode(\"%;\\x90/G#;'/>$;s/5$;'/,$;\\x84/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";M.# &;t\"),\n        peg$decode(\"%;\\x7F/E#28\\\"\\\"6879/6$;u.# &;x/'$8#:\\xCF# )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;v.# &;w/J#%26\\\"\\\"6677/,#;\\x83/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%2\\xD0\\\"\\\"6\\xD07\\xD1/:#;\\x80/1$;w.\\\" &\\\"/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%24\\\"\\\"6475/,#;{/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;z/3#$;y0#*;y&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\";*.) &;+.# &;-\"),\n        peg$decode(\";+.\\x8F &;-.\\x89 &22\\\"\\\"6273.} &26\\\"\\\"6677.q &28\\\"\\\"6879.e &2:\\\"\\\"6:7;.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E\"),\n        peg$decode(\"%;|/e#$%24\\\"\\\"6475/,#;|/#$+\\\")(\\\"'#&'#0<*%24\\\"\\\"6475/,#;|/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%$;~0#*;~&/e#$%22\\\"\\\"6273/,#;}/#$+\\\")(\\\"'#&'#0<*%22\\\"\\\"6273/,#;}/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"$;~0#*;~&\"),\n        peg$decode(\";+.w &;-.q &28\\\"\\\"6879.e &2:\\\"\\\"6:7;.Y &2<\\\"\\\"6<7=.M &2>\\\"\\\"6>7?.A &2@\\\"\\\"6@7A.5 &2B\\\"\\\"6B7C.) &2D\\\"\\\"6D7E\"),\n        peg$decode(\"%%;\\\"/\\x87#$;\\\".G &;!.A &2@\\\"\\\"6@7A.5 &2F\\\"\\\"6F7G.) &2J\\\"\\\"6J7K0M*;\\\".G &;!.A &2@\\\"\\\"6@7A.5 &2F\\\"\\\"6F7G.) &2J\\\"\\\"6J7K&/#$+\\\")(\\\"'#&'#/& 8!:\\xD2! )\"),\n        peg$decode(\";\\x81.# &;\\x82\"),\n        peg$decode(\"%%;O/2#2:\\\"\\\"6:7;/#$+\\\")(\\\"'#&'#.\\\" &\\\"/,#;S/#$+\\\")(\\\"'#&'#.\\\" &\\\"\"),\n        peg$decode(\"$;+.\\x83 &;-.} &2B\\\"\\\"6B7C.q &2D\\\"\\\"6D7E.e &22\\\"\\\"6273.Y &28\\\"\\\"6879.M &2:\\\"\\\"6:7;.A &2<\\\"\\\"6<7=.5 &2>\\\"\\\"6>7?.) &2@\\\"\\\"6@7A/\\x8C#0\\x89*;+.\\x83 &;-.} &2B\\\"\\\"6B7C.q &2D\\\"\\\"6D7E.e &22\\\"\\\"6273.Y &28\\\"\\\"6879.M &2:\\\"\\\"6:7;.A &2<\\\"\\\"6<7=.5 &2>\\\"\\\"6>7?.) &2@\\\"\\\"6@7A&&&#\"),\n        peg$decode(\"$;y0#*;y&\"),\n        peg$decode(\"%3\\x92\\\"\\\"5#7\\xD3/q#24\\\"\\\"6475/b$$;!/&#0#*;!&&&#/L$2J\\\"\\\"6J7K/=$$;!/&#0#*;!&&&#/'$8%:\\xD4% )(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"2\\xD5\\\"\\\"6\\xD57\\xD6\"),\n        peg$decode(\"2\\xD7\\\"\\\"6\\xD77\\xD8\"),\n        peg$decode(\"2\\xD9\\\"\\\"6\\xD97\\xDA\"),\n        peg$decode(\"2\\xDB\\\"\\\"6\\xDB7\\xDC\"),\n        peg$decode(\"2\\xDD\\\"\\\"6\\xDD7\\xDE\"),\n        peg$decode(\"2\\xDF\\\"\\\"6\\xDF7\\xE0\"),\n        peg$decode(\"2\\xE1\\\"\\\"6\\xE17\\xE2\"),\n        peg$decode(\"2\\xE3\\\"\\\"6\\xE37\\xE4\"),\n        peg$decode(\"2\\xE5\\\"\\\"6\\xE57\\xE6\"),\n        peg$decode(\"2\\xE7\\\"\\\"6\\xE77\\xE8\"),\n        peg$decode(\"2\\xE9\\\"\\\"6\\xE97\\xEA\"),\n        peg$decode(\"%;\\x85.Y &;\\x86.S &;\\x88.M &;\\x89.G &;\\x8A.A &;\\x8B.; &;\\x8C.5 &;\\x8F./ &;\\x8D.) &;\\x8E.# &;6/& 8!:\\xEB! )\"),\n        peg$decode(\"%;\\x84/G#;'/>$;\\x92/5$;'/,$;\\x94/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;\\x93/' 8!:\\xEC!! )\"),\n        peg$decode(\"%;!/5#;!/,$;!/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(0G*;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(&/& 8!:\\xED! )\"),\n        peg$decode(\"%;\\xB6/Y#$%;A/,#;\\xB6/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xB6/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;9/N#%2:\\\"\\\"6:7;/,#;9/#$+\\\")(\\\"'#&'#.\\\" &\\\"/'$8\\\":\\xEE\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;:.c &%;\\x98/Y#$%;A/,#;\\x98/#$+\\\")(\\\"'#&'#06*%;A/,#;\\x98/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#/& 8!:\\xEF! )\"),\n        peg$decode(\"%;L.# &;\\x99/]#$%;B/,#;\\x9B/#$+\\\")(\\\"'#&'#06*%;B/,#;\\x9B/#$+\\\")(\\\"'#&'#&/'$8\\\":\\xF0\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\x9A.\\\" &\\\"/>#;@/5$;M/,$;?/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%%;6/Y#$%;./,#;6/#$+\\\")(\\\"'#&'#06*%;./,#;6/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#.# &;H/' 8!:\\xF1!! )\"),\n        peg$decode(\";\\x9C.) &;\\x9D.# &;\\xA0\"),\n        peg$decode(\"%3\\xF2\\\"\\\"5!7\\xF3/:#;</1$;\\x9F/($8#:\\xF4#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\xF5\\\"\\\"5'7\\xF6/:#;</1$;\\x9E/($8#:\\xF7#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\xF8!! )\"),\n        peg$decode(\"%2\\xF9\\\"\\\"6\\xF97\\xFA/o#%2J\\\"\\\"6J7K/M#;!.\\\" &\\\"/?$;!.\\\" &\\\"/1$;!.\\\" &\\\"/#$+$)($'#(#'#(\\\"'#&'#.\\\" &\\\"/'$8\\\":\\xFB\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;6/J#%;</,#;\\xA1/#$+\\\")(\\\"'#&'#.\\\" &\\\"/)$8\\\":\\xFC\\\"\\\"! )(\\\"'#&'#\"),\n        peg$decode(\";6.) &;T.# &;H\"),\n        peg$decode(\"%;\\xA3/Y#$%;B/,#;\\xA4/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA4/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%3\\xFD\\\"\\\"5&7\\xFE.G &3\\xFF\\\"\\\"5'7\\u0100.; &3\\u0101\\\"\\\"5$7\\u0102./ &3\\u0103\\\"\\\"5%7\\u0104.# &;6/& 8!:\\u0105! )\"),\n        peg$decode(\";\\xA5.# &;\\xA0\"),\n        peg$decode(\"%3\\u0106\\\"\\\"5(7\\u0107/M#;</D$3\\u0108\\\"\\\"5(7\\u0109./ &3\\u010A\\\"\\\"5(7\\u010B.# &;6/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;6/Y#$%;A/,#;6/#$+\\\")(\\\"'#&'#06*%;A/,#;6/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u010C!! )\"),\n        peg$decode(\"%;\\xA9/& 8!:\\u010D! )\"),\n        peg$decode(\"%;\\xAA/k#;;/b$;\\xAF/Y$$%;B/,#;\\xB0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xB0/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\xAB.# &;\\xAC\"),\n        peg$decode(\"3\\u010E\\\"\\\"5$7\\u010F.S &3\\u0110\\\"\\\"5%7\\u0111.G &3\\u0112\\\"\\\"5%7\\u0113.; &3\\u0114\\\"\\\"5%7\\u0115./ &3\\u0116\\\"\\\"5+7\\u0117.# &;\\xAD\"),\n        peg$decode(\"3\\u0118\\\"\\\"5'7\\u0119./ &3\\u011A\\\"\\\"5)7\\u011B.# &;\\xAD\"),\n        peg$decode(\";6.# &;\\xAE\"),\n        peg$decode(\"%3\\u011C\\\"\\\"5\\\"7\\u011D/,#;6/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\";\\xAD.# &;6\"),\n        peg$decode(\"%;6/5#;</,$;\\xB1/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\";6.# &;H\"),\n        peg$decode(\"%;\\xB3/5#;./,$;\\x90/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u011E!! )\"),\n        peg$decode(\"%;\\x9E/' 8!:\\u011F!! )\"),\n        peg$decode(\"%;\\xB6/^#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/($8\\\":\\u0120\\\"!!)(\\\"'#&'#\"),\n        peg$decode(\"%%;7/e#$%2J\\\"\\\"6J7K/,#;7/#$+\\\")(\\\"'#&'#0<*%2J\\\"\\\"6J7K/,#;7/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#/\\\"!&,)\"),\n        peg$decode(\"%;L.# &;\\x99/]#$%;B/,#;\\xB8/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xB8/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u0121\\\" )(\\\"'#&'#\"),\n        peg$decode(\";\\xB9.# &;\\xA0\"),\n        peg$decode(\"%3\\u0122\\\"\\\"5#7\\u0123/:#;</1$;6/($8#:\\u0124#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u0125!! )\"),\n        peg$decode(\"%;\\x9E/' 8!:\\u0126!! )\"),\n        peg$decode(\"%$;\\x9A0#*;\\x9A&/x#;@/o$;M/f$;?/]$$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/'$8%:\\u0127% )(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\xBE\"),\n        peg$decode(\"%3\\u0128\\\"\\\"5&7\\u0129/k#;./b$;\\xC1/Y$$%;A/,#;\\xC1/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xC1/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#.# &;\\xBF\"),\n        peg$decode(\"%;6/k#;./b$;\\xC0/Y$$%;A/,#;\\xC0/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xC0/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;6/;#;</2$;6.# &;H/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\xC2.G &;\\xC4.A &;\\xC6.; &;\\xC8.5 &;\\xC9./ &;\\xCA.) &;\\xCB.# &;\\xC0\"),\n        peg$decode(\"%3\\u012A\\\"\\\"5%7\\u012B/5#;</,$;\\xC3/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;I/' 8!:\\u012C!! )\"),\n        peg$decode(\"%3\\u012D\\\"\\\"5&7\\u012E/\\x97#;</\\x8E$;D/\\x85$;\\xC5/|$$%$;'/&#0#*;'&&&#/,#;\\xC5/#$+\\\")(\\\"'#&'#0C*%$;'/&#0#*;'&&&#/,#;\\xC5/#$+\\\")(\\\"'#&'#&/,$;E/#$+&)(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";t.# &;w\"),\n        peg$decode(\"%3\\u012F\\\"\\\"5%7\\u0130/5#;</,$;\\xC7/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;I/' 8!:\\u0131!! )\"),\n        peg$decode(\"%3\\u0132\\\"\\\"5&7\\u0133/:#;</1$;I/($8#:\\u0134#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0135\\\"\\\"5%7\\u0136/]#;</T$%3\\u0137\\\"\\\"5$7\\u0138/& 8!:\\u0139! ).4 &%3\\u013A\\\"\\\"5%7\\u013B/& 8!:\\u013C! )/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u013D\\\"\\\"5)7\\u013E/R#;</I$3\\u013F\\\"\\\"5#7\\u0140./ &3\\u0141\\\"\\\"5(7\\u0142.# &;6/($8#:\\u0143#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0144\\\"\\\"5#7\\u0145/\\x93#;</\\x8A$;D/\\x81$%;\\xCC/e#$%2D\\\"\\\"6D7E/,#;\\xCC/#$+\\\")(\\\"'#&'#0<*%2D\\\"\\\"6D7E/,#;\\xCC/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#/,$;E/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0146\\\"\\\"5(7\\u0147./ &3\\u0148\\\"\\\"5$7\\u0149.# &;6/' 8!:\\u014A!! )\"),\n        peg$decode(\"%;6/Y#$%;A/,#;6/#$+\\\")(\\\"'#&'#06*%;A/,#;6/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\xCF/G#;./>$;\\xCF/5$;./,$;\\x90/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u014B!! )\"),\n        peg$decode(\"%;\\xD1/]#$%;A/,#;\\xD1/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xD1/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u014C\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\x99/]#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u014D\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;L.O &;\\x99.I &%;@.\\\" &\\\"/:#;t/1$;?.\\\" &\\\"/#$+#)(#'#(\\\"'#&'#/]#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u014E\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\xD4/]#$%;B/,#;\\xD5/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xD5/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u014F\\\" )(\\\"'#&'#\"),\n        peg$decode(\"%;\\x96/& 8!:\\u0150! )\"),\n        peg$decode(\"%3\\u0151\\\"\\\"5(7\\u0152/:#;</1$;6/($8#:\\u0153#! )(#'#(\\\"'#&'#.g &%3\\u0154\\\"\\\"5&7\\u0155/:#;</1$;6/($8#:\\u0156#! )(#'#(\\\"'#&'#.: &%3\\u0157\\\"\\\"5*7\\u0158/& 8!:\\u0159! ).# &;\\xA0\"),\n        peg$decode(\"%%;6/k#$%;A/2#;6/)$8\\\":\\u015A\\\"\\\"$ )(\\\"'#&'#0<*%;A/2#;6/)$8\\\":\\u015A\\\"\\\"$ )(\\\"'#&'#&/)$8\\\":\\u015B\\\"\\\"! )(\\\"'#&'#.\\\" &\\\"/' 8!:\\u015C!! )\"),\n        peg$decode(\"%;\\xD8/Y#$%;A/,#;\\xD8/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xD8/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\x99/Y#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%$;!/&#0#*;!&&&#/' 8!:\\u015D!! )\"),\n        peg$decode(\"%;\\xDB/Y#$%;B/,#;\\xDC/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xDC/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%3\\u015E\\\"\\\"5&7\\u015F.; &3\\u0160\\\"\\\"5'7\\u0161./ &3\\u0162\\\"\\\"5*7\\u0163.# &;6/& 8!:\\u0164! )\"),\n        peg$decode(\"%3\\u0165\\\"\\\"5&7\\u0166/:#;</1$;\\xDD/($8#:\\u0167#! )(#'#(\\\"'#&'#.} &%3\\xF5\\\"\\\"5'7\\xF6/:#;</1$;\\x9E/($8#:\\u0168#! )(#'#(\\\"'#&'#.P &%3\\u0169\\\"\\\"5+7\\u016A/:#;</1$;\\x9E/($8#:\\u016B#! )(#'#(\\\"'#&'#.# &;\\xA0\"),\n        peg$decode(\"3\\u016C\\\"\\\"5+7\\u016D.k &3\\u016E\\\"\\\"5)7\\u016F._ &3\\u0170\\\"\\\"5(7\\u0171.S &3\\u0172\\\"\\\"5'7\\u0173.G &3\\u0174\\\"\\\"5&7\\u0175.; &3\\u0176\\\"\\\"5*7\\u0177./ &3\\u0178\\\"\\\"5)7\\u0179.# &;6\"),\n        peg$decode(\";1.\\\" &\\\"\"),\n        peg$decode(\"%%;6/k#$%;A/2#;6/)$8\\\":\\u015A\\\"\\\"$ )(\\\"'#&'#0<*%;A/2#;6/)$8\\\":\\u015A\\\"\\\"$ )(\\\"'#&'#&/)$8\\\":\\u015B\\\"\\\"! )(\\\"'#&'#.\\\" &\\\"/' 8!:\\u017A!! )\"),\n        peg$decode(\"%;L.# &;\\x99/]#$%;B/,#;\\xE1/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xE1/#$+\\\")(\\\"'#&'#&/'$8\\\":\\u017B\\\" )(\\\"'#&'#\"),\n        peg$decode(\";\\xB9.# &;\\xA0\"),\n        peg$decode(\"%;\\xE3/Y#$%;A/,#;\\xE3/#$+\\\")(\\\"'#&'#06*%;A/,#;\\xE3/#$+\\\")(\\\"'#&'#&/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\xEA/k#;./b$;\\xED/Y$$%;B/,#;\\xE4/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xE4/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\xE5.; &;\\xE6.5 &;\\xE7./ &;\\xE8.) &;\\xE9.# &;\\xA0\"),\n        peg$decode(\"%3\\u017C\\\"\\\"5#7\\u017D/:#;</1$;\\xF0/($8#:\\u017E#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u017F\\\"\\\"5%7\\u0180/:#;</1$;T/($8#:\\u0181#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0182\\\"\\\"5(7\\u0183/F#;</=$;\\\\.) &;Y.# &;X/($8#:\\u0184#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0185\\\"\\\"5&7\\u0186/:#;</1$;6/($8#:\\u0187#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u0188\\\"\\\"5%7\\u0189/A#;</8$$;!0#*;!&/($8#:\\u018A#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;\\xEB/G#;;/>$;6/5$;;/,$;\\xEC/#$+%)(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\x92\\\"\\\"5#7\\xD3.# &;6/' 8!:\\u018B!! )\"),\n        peg$decode(\"%3\\xB1\\\"\\\"5#7\\u018C.G &3\\xB3\\\"\\\"5#7\\u018D.; &3\\xB7\\\"\\\"5#7\\u018E./ &3\\xB5\\\"\\\"5$7\\u018F.# &;6/' 8!:\\u0190!! )\"),\n        peg$decode(\"%;\\xEE/D#%;C/,#;\\xEF/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;U.) &;\\\\.# &;X/& 8!:\\u0191! )\"),\n        peg$decode(\"%%;!.\\\" &\\\"/[#;!.\\\" &\\\"/M$;!.\\\" &\\\"/?$;!.\\\" &\\\"/1$;!.\\\" &\\\"/#$+%)(%'#($'#(#'#(\\\"'#&'#/' 8!:\\u0192!! )\"),\n        peg$decode(\"%%;!/?#;!.\\\" &\\\"/1$;!.\\\" &\\\"/#$+#)(#'#(\\\"'#&'#/' 8!:\\u0193!! )\"),\n        peg$decode(\";\\xBE\"),\n        peg$decode(\"%;\\x9E/^#$%;B/,#;\\xF3/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xF3/#$+\\\")(\\\"'#&'#&/($8\\\":\\u0194\\\"!!)(\\\"'#&'#\"),\n        peg$decode(\";\\xF4.# &;\\xA0\"),\n        peg$decode(\"%2\\u0195\\\"\\\"6\\u01957\\u0196/L#;</C$2\\u0197\\\"\\\"6\\u01977\\u0198.) &2\\u0199\\\"\\\"6\\u01997\\u019A/($8#:\\u019B#! )(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;\\x9E/^#$%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#06*%;B/,#;\\xA0/#$+\\\")(\\\"'#&'#&/($8\\\":\\u019C\\\"!!)(\\\"'#&'#\"),\n        peg$decode(\"%;6/5#;0/,$;\\xF7/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"$;2.) &;4.# &;.0/*;2.) &;4.# &;.&\"),\n        peg$decode(\"$;%0#*;%&\"),\n        peg$decode(\"%;\\xFA/;#28\\\"\\\"6879/,$;\\xFB/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u019D\\\"\\\"5%7\\u019E.) &3\\u019F\\\"\\\"5$7\\u01A0/' 8!:\\u01A1!! )\"),\n        peg$decode(\"%;\\xFC/J#%28\\\"\\\"6879/,#;^/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\\\.) &;X.# &;\\x82/' 8!:\\u01A2!! )\"),\n        peg$decode(\";\\\".S &;!.M &2F\\\"\\\"6F7G.A &2J\\\"\\\"6J7K.5 &2H\\\"\\\"6H7I.) &2N\\\"\\\"6N7O\"),\n        peg$decode(\"2L\\\"\\\"6L7M.\\x95 &2B\\\"\\\"6B7C.\\x89 &2<\\\"\\\"6<7=.} &2R\\\"\\\"6R7S.q &2T\\\"\\\"6T7U.e &2V\\\"\\\"6V7W.Y &2P\\\"\\\"6P7Q.M &2@\\\"\\\"6@7A.A &2D\\\"\\\"6D7E.5 &22\\\"\\\"6273.) &2>\\\"\\\"6>7?\"),\n        peg$decode(\"%;\\u0100/b#28\\\"\\\"6879/S$;\\xFB/J$%2\\u01A3\\\"\\\"6\\u01A37\\u01A4/,#;\\xEC/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%3\\u01A5\\\"\\\"5%7\\u01A6.) &3\\u01A7\\\"\\\"5$7\\u01A8/' 8!:\\u01A1!! )\"),\n        peg$decode(\"%3\\xB1\\\"\\\"5#7\\xB2.6 &3\\xB3\\\"\\\"5#7\\xB4.* &$;+0#*;+&/' 8!:\\u01A9!! )\"),\n        peg$decode(\"%;\\u0104/\\x87#2F\\\"\\\"6F7G/x$;\\u0103/o$2F\\\"\\\"6F7G/`$;\\u0103/W$2F\\\"\\\"6F7G/H$;\\u0103/?$2F\\\"\\\"6F7G/0$;\\u0105/'$8):\\u01AA) )()'#(('#(''#(&'#(%'#($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;#/>#;#/5$;#/,$;#/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;\\u0103/,#;\\u0103/#$+\\\")(\\\"'#&'#\"),\n        peg$decode(\"%;\\u0103/5#;\\u0103/,$;\\u0103/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;q/T#$;m0#*;m&/D$%; /,#;\\xF8/#$+\\\")(\\\"'#&'#.\\\" &\\\"/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%2\\u01AB\\\"\\\"6\\u01AB7\\u01AC.) &2\\u01AD\\\"\\\"6\\u01AD7\\u01AE/w#;0/n$;\\u0108/e$$%;B/2#;\\u0109.# &;\\xA0/#$+\\\")(\\\"'#&'#0<*%;B/2#;\\u0109.# &;\\xA0/#$+\\\")(\\\"'#&'#&/#$+$)($'#(#'#(\\\"'#&'#\"),\n        peg$decode(\";\\x99.# &;L\"),\n        peg$decode(\"%2\\u01AF\\\"\\\"6\\u01AF7\\u01B0/5#;</,$;\\u010A/#$+#)(#'#(\\\"'#&'#\"),\n        peg$decode(\"%;D/S#;,/J$2:\\\"\\\"6:7;/;$;,.# &;T/,$;E/#$+%)(%'#($'#(#'#(\\\"'#&'#\")\n    ];\n    let peg$currPos = 0;\n    let peg$savedPos = 0;\n    const peg$posDetailsCache = [{ line: 1, column: 1 }];\n    let peg$maxFailPos = 0;\n    let peg$maxFailExpected = [];\n    let peg$silentFails = 0;\n    let peg$result;\n    if (options.startRule !== undefined) {\n        if (!(options.startRule in peg$startRuleIndices)) {\n            throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n        }\n        peg$startRuleIndex = peg$startRuleIndices[options.startRule];\n    }\n    function text() {\n        return input.substring(peg$savedPos, peg$currPos);\n    }\n    function location() {\n        return peg$computeLocation(peg$savedPos, peg$currPos);\n    }\n    function expected(description, location1) {\n        location1 = location1 !== undefined\n            ? location1\n            : peg$computeLocation(peg$savedPos, peg$currPos);\n        throw peg$buildStructuredError([peg$otherExpectation(description)], input.substring(peg$savedPos, peg$currPos), location1);\n    }\n    function error(message, location1) {\n        location1 = location1 !== undefined\n            ? location1\n            : peg$computeLocation(peg$savedPos, peg$currPos);\n        throw peg$buildSimpleError(message, location1);\n    }\n    function peg$literalExpectation(text1, ignoreCase) {\n        return { type: \"literal\", text: text1, ignoreCase: ignoreCase };\n    }\n    function peg$classExpectation(parts, inverted, ignoreCase) {\n        return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n    }\n    function peg$anyExpectation() {\n        return { type: \"any\" };\n    }\n    function peg$endExpectation() {\n        return { type: \"end\" };\n    }\n    function peg$otherExpectation(description) {\n        return { type: \"other\", description: description };\n    }\n    function peg$computePosDetails(pos) {\n        let details = peg$posDetailsCache[pos];\n        let p;\n        if (details) {\n            return details;\n        }\n        else {\n            p = pos - 1;\n            while (!peg$posDetailsCache[p]) {\n                p--;\n            }\n            details = peg$posDetailsCache[p];\n            details = {\n                line: details.line,\n                column: details.column\n            };\n            while (p < pos) {\n                if (input.charCodeAt(p) === 10) {\n                    details.line++;\n                    details.column = 1;\n                }\n                else {\n                    details.column++;\n                }\n                p++;\n            }\n            peg$posDetailsCache[pos] = details;\n            return details;\n        }\n    }\n    function peg$computeLocation(startPos, endPos) {\n        const startPosDetails = peg$computePosDetails(startPos);\n        const endPosDetails = peg$computePosDetails(endPos);\n        return {\n            source: peg$source,\n            start: {\n                offset: startPos,\n                line: startPosDetails.line,\n                column: startPosDetails.column\n            },\n            end: {\n                offset: endPos,\n                line: endPosDetails.line,\n                column: endPosDetails.column\n            }\n        };\n    }\n    function peg$fail(expected1) {\n        if (peg$currPos < peg$maxFailPos) {\n            return;\n        }\n        if (peg$currPos > peg$maxFailPos) {\n            peg$maxFailPos = peg$currPos;\n            peg$maxFailExpected = [];\n        }\n        peg$maxFailExpected.push(expected1);\n    }\n    function peg$buildSimpleError(message, location1) {\n        return new SyntaxError(message, [], \"\", location1);\n    }\n    function peg$buildStructuredError(expected1, found, location1) {\n        return new SyntaxError(SyntaxError.buildMessage(expected1, found), expected1, found, location1);\n    }\n    function peg$decode(s) {\n        return s.split(\"\").map((ch) => ch.charCodeAt(0) - 32);\n    }\n    function peg$parseRule(index) {\n        const bc = peg$bytecode[index];\n        let ip = 0;\n        const ips = [];\n        let end = bc.length;\n        const ends = [];\n        const stack = [];\n        let params;\n        while (true) {\n            while (ip < end) {\n                switch (bc[ip]) {\n                    case 0:\n                        stack.push(peg$consts[bc[ip + 1]]);\n                        ip += 2;\n                        break;\n                    case 1:\n                        stack.push(undefined);\n                        ip++;\n                        break;\n                    case 2:\n                        stack.push(null);\n                        ip++;\n                        break;\n                    case 3:\n                        stack.push(peg$FAILED);\n                        ip++;\n                        break;\n                    case 4:\n                        stack.push([]);\n                        ip++;\n                        break;\n                    case 5:\n                        stack.push(peg$currPos);\n                        ip++;\n                        break;\n                    case 6:\n                        stack.pop();\n                        ip++;\n                        break;\n                    case 7:\n                        peg$currPos = stack.pop();\n                        ip++;\n                        break;\n                    case 8:\n                        stack.length -= bc[ip + 1];\n                        ip += 2;\n                        break;\n                    case 9:\n                        stack.splice(-2, 1);\n                        ip++;\n                        break;\n                    case 10:\n                        stack[stack.length - 2].push(stack.pop());\n                        ip++;\n                        break;\n                    case 11:\n                        stack.push(stack.splice(stack.length - bc[ip + 1], bc[ip + 1]));\n                        ip += 2;\n                        break;\n                    case 12:\n                        stack.push(input.substring(stack.pop(), peg$currPos));\n                        ip++;\n                        break;\n                    case 13:\n                        ends.push(end);\n                        ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n                        if (stack[stack.length - 1]) {\n                            end = ip + 3 + bc[ip + 1];\n                            ip += 3;\n                        }\n                        else {\n                            end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n                            ip += 3 + bc[ip + 1];\n                        }\n                        break;\n                    case 14:\n                        ends.push(end);\n                        ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n                        if (stack[stack.length - 1] === peg$FAILED) {\n                            end = ip + 3 + bc[ip + 1];\n                            ip += 3;\n                        }\n                        else {\n                            end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n                            ip += 3 + bc[ip + 1];\n                        }\n                        break;\n                    case 15:\n                        ends.push(end);\n                        ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n                        if (stack[stack.length - 1] !== peg$FAILED) {\n                            end = ip + 3 + bc[ip + 1];\n                            ip += 3;\n                        }\n                        else {\n                            end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n                            ip += 3 + bc[ip + 1];\n                        }\n                        break;\n                    case 16:\n                        if (stack[stack.length - 1] !== peg$FAILED) {\n                            ends.push(end);\n                            ips.push(ip);\n                            end = ip + 2 + bc[ip + 1];\n                            ip += 2;\n                        }\n                        else {\n                            ip += 2 + bc[ip + 1];\n                        }\n                        break;\n                    case 17:\n                        ends.push(end);\n                        ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n                        if (input.length > peg$currPos) {\n                            end = ip + 3 + bc[ip + 1];\n                            ip += 3;\n                        }\n                        else {\n                            end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n                            ip += 3 + bc[ip + 1];\n                        }\n                        break;\n                    case 18:\n                        ends.push(end);\n                        ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n                        if (input.substr(peg$currPos, peg$consts[bc[ip + 1]].length) === peg$consts[bc[ip + 1]]) {\n                            end = ip + 4 + bc[ip + 2];\n                            ip += 4;\n                        }\n                        else {\n                            end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n                            ip += 4 + bc[ip + 2];\n                        }\n                        break;\n                    case 19:\n                        ends.push(end);\n                        ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n                        if (input.substr(peg$currPos, peg$consts[bc[ip + 1]].length).toLowerCase() === peg$consts[bc[ip + 1]]) {\n                            end = ip + 4 + bc[ip + 2];\n                            ip += 4;\n                        }\n                        else {\n                            end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n                            ip += 4 + bc[ip + 2];\n                        }\n                        break;\n                    case 20:\n                        ends.push(end);\n                        ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n                        if (peg$consts[bc[ip + 1]].test(input.charAt(peg$currPos))) {\n                            end = ip + 4 + bc[ip + 2];\n                            ip += 4;\n                        }\n                        else {\n                            end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n                            ip += 4 + bc[ip + 2];\n                        }\n                        break;\n                    case 21:\n                        stack.push(input.substr(peg$currPos, bc[ip + 1]));\n                        peg$currPos += bc[ip + 1];\n                        ip += 2;\n                        break;\n                    case 22:\n                        stack.push(peg$consts[bc[ip + 1]]);\n                        peg$currPos += peg$consts[bc[ip + 1]].length;\n                        ip += 2;\n                        break;\n                    case 23:\n                        stack.push(peg$FAILED);\n                        if (peg$silentFails === 0) {\n                            peg$fail(peg$consts[bc[ip + 1]]);\n                        }\n                        ip += 2;\n                        break;\n                    case 24:\n                        peg$savedPos = stack[stack.length - 1 - bc[ip + 1]];\n                        ip += 2;\n                        break;\n                    case 25:\n                        peg$savedPos = peg$currPos;\n                        ip++;\n                        break;\n                    case 26:\n                        params = bc.slice(ip + 4, ip + 4 + bc[ip + 3])\n                            .map(function (p) { return stack[stack.length - 1 - p]; });\n                        stack.splice(stack.length - bc[ip + 2], bc[ip + 2], peg$consts[bc[ip + 1]].apply(null, params));\n                        ip += 4 + bc[ip + 3];\n                        break;\n                    case 27:\n                        stack.push(peg$parseRule(bc[ip + 1]));\n                        ip += 2;\n                        break;\n                    case 28:\n                        peg$silentFails++;\n                        ip++;\n                        break;\n                    case 29:\n                        peg$silentFails--;\n                        ip++;\n                        break;\n                    default:\n                        throw new Error(\"Invalid opcode: \" + bc[ip] + \".\");\n                }\n            }\n            if (ends.length > 0) {\n                end = ends.pop();\n                ip = ips.pop();\n            }\n            else {\n                break;\n            }\n        }\n        return stack[0];\n    }\n    options.data = {}; // Object to which header attributes will be assigned during parsing\n    function list(head, tail) {\n        return [head].concat(tail);\n    }\n    peg$result = peg$parseRule(peg$startRuleIndex);\n    if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n        return peg$result;\n    }\n    else {\n        if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n            peg$fail(peg$endExpectation());\n        }\n        throw peg$buildStructuredError(peg$maxFailExpected, peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null, peg$maxFailPos < input.length\n            ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n            : peg$computeLocation(peg$maxFailPos, peg$maxFailPos));\n    }\n}\nconst parse = peg$parse;\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/grammar/pegjs/dist/grammar.js?");

/***/ }),

/***/ "./node_modules/sip.js/lib/grammar/uri.js":
/*!************************************************!*\
  !*** ./node_modules/sip.js/lib/grammar/uri.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   URI: () => (/* binding */ URI),\n/* harmony export */   equivalentURI: () => (/* binding */ equivalentURI)\n/* harmony export */ });\n/* harmony import */ var _parameters_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parameters.js */ \"./node_modules/sip.js/lib/grammar/parameters.js\");\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * URI.\n * @public\n */\nclass URI extends _parameters_js__WEBPACK_IMPORTED_MODULE_0__.Parameters {\n    /**\n     * Constructor\n     * @param scheme -\n     * @param user -\n     * @param host -\n     * @param port -\n     * @param parameters -\n     * @param headers -\n     */\n    constructor(scheme = \"sip\", user, host, port, parameters, headers) {\n        super(parameters || {});\n        this.headers = {};\n        // Checks\n        if (!host) {\n            throw new TypeError('missing or invalid \"host\" parameter');\n        }\n        for (const header in headers) {\n            // eslint-disable-next-line no-prototype-builtins\n            if (headers.hasOwnProperty(header)) {\n                this.setHeader(header, headers[header]);\n            }\n        }\n        // Raw URI\n        this.raw = {\n            scheme,\n            user,\n            host,\n            port\n        };\n        // Normalized URI\n        this.normal = {\n            scheme: scheme.toLowerCase(),\n            user,\n            host: host.toLowerCase(),\n            port\n        };\n    }\n    get scheme() { return this.normal.scheme; }\n    set scheme(value) {\n        this.raw.scheme = value;\n        this.normal.scheme = value.toLowerCase();\n    }\n    get user() { return this.normal.user; }\n    set user(value) {\n        this.normal.user = this.raw.user = value;\n    }\n    get host() { return this.normal.host; }\n    set host(value) {\n        this.raw.host = value;\n        this.normal.host = value.toLowerCase();\n    }\n    get aor() { return this.normal.user + \"@\" + this.normal.host; }\n    get port() { return this.normal.port; }\n    set port(value) {\n        this.normal.port = this.raw.port = value === 0 ? value : value;\n    }\n    setHeader(name, value) {\n        this.headers[this.headerize(name)] = (value instanceof Array) ? value : [value];\n    }\n    getHeader(name) {\n        if (name) {\n            return this.headers[this.headerize(name)];\n        }\n    }\n    hasHeader(name) {\n        // eslint-disable-next-line no-prototype-builtins\n        return !!name && !!this.headers.hasOwnProperty(this.headerize(name));\n    }\n    deleteHeader(header) {\n        header = this.headerize(header);\n        // eslint-disable-next-line no-prototype-builtins\n        if (this.headers.hasOwnProperty(header)) {\n            const value = this.headers[header];\n            delete this.headers[header];\n            return value;\n        }\n    }\n    clearHeaders() {\n        this.headers = {};\n    }\n    clone() {\n        return new URI(this._raw.scheme, this._raw.user || \"\", this._raw.host, this._raw.port, JSON.parse(JSON.stringify(this.parameters)), JSON.parse(JSON.stringify(this.headers)));\n    }\n    toRaw() {\n        return this._toString(this._raw);\n    }\n    toString() {\n        return this._toString(this._normal);\n    }\n    get _normal() { return this.normal; }\n    get _raw() { return this.raw; }\n    _toString(uri) {\n        let uriString = uri.scheme + \":\";\n        // add slashes if it's not a sip(s) URI\n        if (!uri.scheme.toLowerCase().match(\"^sips?$\")) {\n            uriString += \"//\";\n        }\n        if (uri.user) {\n            uriString += this.escapeUser(uri.user) + \"@\";\n        }\n        uriString += uri.host;\n        if (uri.port || uri.port === 0) {\n            uriString += \":\" + uri.port;\n        }\n        for (const parameter in this.parameters) {\n            // eslint-disable-next-line no-prototype-builtins\n            if (this.parameters.hasOwnProperty(parameter)) {\n                uriString += \";\" + parameter;\n                if (this.parameters[parameter] !== null) {\n                    uriString += \"=\" + this.parameters[parameter];\n                }\n            }\n        }\n        const headers = [];\n        for (const header in this.headers) {\n            // eslint-disable-next-line no-prototype-builtins\n            if (this.headers.hasOwnProperty(header)) {\n                // eslint-disable-next-line @typescript-eslint/no-for-in-array\n                for (const idx in this.headers[header]) {\n                    // eslint-disable-next-line no-prototype-builtins\n                    if (this.headers[header].hasOwnProperty(idx)) {\n                        headers.push(header + \"=\" + this.headers[header][idx]);\n                    }\n                }\n            }\n        }\n        if (headers.length > 0) {\n            uriString += \"?\" + headers.join(\"&\");\n        }\n        return uriString;\n    }\n    /*\n     * Hex-escape a SIP URI user.\n     * @private\n     * @param {String} user\n     */\n    escapeUser(user) {\n        let decodedUser;\n        // FIXME: This is called by toString above which should never throw, but\n        // decodeURIComponent can throw and I've seen one case in production where\n        // it did throw resulting in a cascading failure. This class should be\n        // fixed so that decodeURIComponent is not called at this point (in toString).\n        // The user should be decoded when the URI is constructor or some other\n        // place where we can catch the error before the URI is created or somesuch.\n        // eslint-disable-next-line no-useless-catch\n        try {\n            decodedUser = decodeURIComponent(user);\n        }\n        catch (error) {\n            throw error;\n        }\n        // Don't hex-escape ':' (%3A), '+' (%2B), '?' (%3F\"), '/' (%2F).\n        return encodeURIComponent(decodedUser)\n            .replace(/%3A/ig, \":\")\n            .replace(/%2B/ig, \"+\")\n            .replace(/%3F/ig, \"?\")\n            .replace(/%2F/ig, \"/\");\n    }\n    headerize(str) {\n        const exceptions = {\n            \"Call-Id\": \"Call-ID\",\n            \"Cseq\": \"CSeq\",\n            \"Min-Se\": \"Min-SE\",\n            \"Rack\": \"RAck\",\n            \"Rseq\": \"RSeq\",\n            \"Www-Authenticate\": \"WWW-Authenticate\",\n        };\n        const name = str.toLowerCase().replace(/_/g, \"-\").split(\"-\");\n        const parts = name.length;\n        let hname = \"\";\n        for (let part = 0; part < parts; part++) {\n            if (part !== 0) {\n                hname += \"-\";\n            }\n            hname += name[part].charAt(0).toUpperCase() + name[part].substring(1);\n        }\n        if (exceptions[hname]) {\n            hname = exceptions[hname];\n        }\n        return hname;\n    }\n}\n/**\n * Returns true if URIs are equivalent per RFC 3261 Section 19.1.4.\n * @param a - URI to compare\n * @param b - URI to compare\n *\n * @remarks\n * 19.1.4 URI Comparison\n * Some operations in this specification require determining whether two\n * SIP or SIPS URIs are equivalent.\n *\n * https://tools.ietf.org/html/rfc3261#section-19.1.4\n * @internal\n */\nfunction equivalentURI(a, b) {\n    // o  A SIP and SIPS URI are never equivalent.\n    if (a.scheme !== b.scheme) {\n        return false;\n    }\n    // o  Comparison of the userinfo of SIP and SIPS URIs is case-\n    //    sensitive.  This includes userinfo containing passwords or\n    //    formatted as telephone-subscribers.  Comparison of all other\n    //    components of the URI is case-insensitive unless explicitly\n    //    defined otherwise.\n    //\n    // o  The ordering of parameters and header fields is not significant\n    //    in comparing SIP and SIPS URIs.\n    //\n    // o  Characters other than those in the \"reserved\" set (see RFC 2396\n    //    [5]) are equivalent to their \"\"%\" HEX HEX\" encoding.\n    //\n    // o  An IP address that is the result of a DNS lookup of a host name\n    //    does not match that host name.\n    //\n    // o  For two URIs to be equal, the user, password, host, and port\n    //    components must match.\n    //\n    // A URI omitting the user component will not match a URI that\n    // includes one.  A URI omitting the password component will not\n    // match a URI that includes one.\n    //\n    // A URI omitting any component with a default value will not\n    // match a URI explicitly containing that component with its\n    // default value.  For instance, a URI omitting the optional port\n    // component will not match a URI explicitly declaring port 5060.\n    // The same is true for the transport-parameter, ttl-parameter,\n    // user-parameter, and method components.\n    //\n    // Defining sip:user@host to not be equivalent to\n    // sip:user@host:5060 is a change from RFC 2543.  When deriving\n    // addresses from URIs, equivalent addresses are expected from\n    // equivalent URIs.  The URI sip:user@host:5060 will always\n    // resolve to port 5060.  The URI sip:user@host may resolve to\n    // other ports through the DNS SRV mechanisms detailed in [4].\n    // FIXME: TODO:\n    // - character compared to hex encoding is not handled\n    // - password does not exist on URI currently\n    if (a.user !== b.user || a.host !== b.host || a.port !== b.port) {\n        return false;\n    }\n    // o  URI uri-parameter components are compared as follows:\n    function compareParameters(a, b) {\n        //  -  Any uri-parameter appearing in both URIs must match.\n        const parameterKeysA = Object.keys(a.parameters);\n        const parameterKeysB = Object.keys(b.parameters);\n        const intersection = parameterKeysA.filter(x => parameterKeysB.includes(x));\n        if (!intersection.every(key => a.parameters[key] === b.parameters[key])) {\n            return false;\n        }\n        //  -  A user, ttl, or method uri-parameter appearing in only one\n        //     URI never matches, even if it contains the default value.\n        if (![\"user\", \"ttl\", \"method\", \"transport\"].every(key => a.hasParam(key) && b.hasParam(key) || !a.hasParam(key) && !b.hasParam(key))) {\n            return false;\n        }\n        //  -  A URI that includes an maddr parameter will not match a URI\n        //     that contains no maddr parameter.\n        if (![\"maddr\"].every(key => a.hasParam(key) && b.hasParam(key) || !a.hasParam(key) && !b.hasParam(key))) {\n            return false;\n        }\n        //  -  All other uri-parameters appearing in only one URI are\n        //     ignored when comparing the URIs.\n        return true;\n    }\n    if (!compareParameters(a, b)) {\n        return false;\n    }\n    // o  URI header components are never ignored.  Any present header\n    //    component MUST be present in both URIs and match for the URIs\n    //    to match.  The matching rules are defined for each header field\n    //    in Section 20.\n    const headerKeysA = Object.keys(a.headers);\n    const headerKeysB = Object.keys(b.headers);\n    // No need to check if no headers\n    if (headerKeysA.length !== 0 || headerKeysB.length !== 0) {\n        // Must have same number of headers\n        if (headerKeysA.length !== headerKeysB.length) {\n            return false;\n        }\n        // Must have same headers\n        const intersection = headerKeysA.filter(x => headerKeysB.includes(x));\n        if (intersection.length !== headerKeysB.length) {\n            return false;\n        }\n        // FIXME: Not to spec. But perhaps not worth fixing?\n        // Must have same header values\n        // It seems too much to consider multiple headers with same name.\n        // It seems too much to compare two header params according to the rule of each header.\n        // We'll assume a single header and compare them string to string...\n        if (!intersection.every(key => a.headers[key].length && b.headers[key].length && a.headers[key][0] === b.headers[key][0])) {\n            return false;\n        }\n    }\n    return true;\n}\n\n\n//# sourceURL=webpack://zendesk-sip-phone/./node_modules/sip.js/lib/grammar/uri.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;